!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="559dc58e-81d1-4699-a59f-3e10141eb61e",e._sentryDebugIdIdentifier="sentry-dbid-559dc58e-81d1-4699-a59f-3e10141eb61e")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4535],{75006:function(e,t,n){var o={"./ar/base.json":[37043,7043],"./ar/chat.json":[76824,6824],"./ar/emojipicker.json":[62027,2027],"./ar/finance-cards.json":[35613,5613],"./ar/loading.json":[38155,8155],"./ar/settings.json":[54568,4568],"./ar/share.json":[7566,7566],"./ar/translation.json":[92696,2696],"./ar/upsell-x.json":[1048,1048],"./ar/upsell.json":[13276,3276],"./ar/workspace.json":[49534,9534],"./bn-BD/base.json":[8315,8315],"./bn-BD/chat.json":[10823,823],"./bn-BD/emojipicker.json":[6202,6202],"./bn-BD/finance-cards.json":[20671,671],"./bn-BD/loading.json":[30223,223],"./bn-BD/settings.json":[70708,708],"./bn-BD/share.json":[71185,1185],"./bn-BD/translation.json":[83084,3084],"./bn-BD/upsell-x.json":[64545,4545],"./bn-BD/upsell.json":[36585,6585],"./bn-BD/workspace.json":[24340,4340],"./cs-CZ/base.json":[13281,3281],"./cs-CZ/chat.json":[63548,3548],"./cs-CZ/emojipicker.json":[29607,9607],"./cs-CZ/finance-cards.json":[77266,7266],"./cs-CZ/loading.json":[32756,2756],"./cs-CZ/settings.json":[10079,79],"./cs-CZ/share.json":[6098,6098],"./cs-CZ/translation.json":[81093,1093],"./cs-CZ/upsell-x.json":[23035,3035],"./cs-CZ/upsell.json":[93715,3715],"./cs-CZ/workspace.json":[92960,2960],"./de/base.json":[91296,1296],"./de/chat.json":[97961,7961],"./de/emojipicker.json":[34678,4678],"./de/finance-cards.json":[83489,3489],"./de/loading.json":[66057,6057],"./de/settings.json":[49919,9919],"./de/share.json":[4605,4605],"./de/translation.json":[40418,418],"./de/upsell-x.json":[80580,580],"./de/upsell.json":[32620,2620],"./de/workspace.json":[30537,537],"./en/base.json":[83514,3514],"./en/chat.json":[82200,2200],"./en/emojipicker.json":[70975,975],"./en/finance-cards.json":[64190,4190],"./en/loading.json":[77239,7239],"./en/settings.json":[37192,7192],"./en/share.json":[88946,8946],"./en/translation.json":[17352,7352],"./en/upsell-x.json":[90042,8889],"./en/upsell.json":[10100,100],"./en/workspace.json":[29929,9929],"./es/base.json":[9787,9787],"./es/chat.json":[21958,1958],"./es/emojipicker.json":[84866,4866],"./es/finance-cards.json":[12266,2266],"./es/loading.json":[61324,1324],"./es/settings.json":[15661,5661],"./es/share.json":[36810,9811],"./es/translation.json":[28555,8555],"./es/upsell-x.json":[69901,3224],"./es/upsell.json":[73746,3746],"./es/workspace.json":[34613,4613],"./fa-IR/base.json":[24397,4397],"./fa-IR/chat.json":[15253,5253],"./fa-IR/emojipicker.json":[99014,9014],"./fa-IR/finance-cards.json":[62288,2288],"./fa-IR/loading.json":[74007,4007],"./fa-IR/settings.json":[43656,3656],"./fa-IR/share.json":[67383,7383],"./fa-IR/translation.json":[40994,994],"./fa-IR/upsell-x.json":[74834,4834],"./fa-IR/upsell.json":[72169,2169],"./fa-IR/workspace.json":[75696,5696],"./fil-PH/base.json":[37719,7719],"./fil-PH/chat.json":[18854,8854],"./fil-PH/emojipicker.json":[17785,7785],"./fil-PH/finance-cards.json":[41648,1648],"./fil-PH/loading.json":[61930,1930],"./fil-PH/settings.json":[29434,9434],"./fil-PH/share.json":[38960,8960],"./fil-PH/translation.json":[31221,1221],"./fil-PH/upsell-x.json":[38018,8018],"./fil-PH/upsell.json":[79959,9959],"./fil-PH/workspace.json":[24966,4966],"./fr/base.json":[43218,3013],"./fr/chat.json":[6288,6288],"./fr/emojipicker.json":[5629,5629],"./fr/finance-cards.json":[96891,6891],"./fr/loading.json":[49816,9816],"./fr/settings.json":[17118,7118],"./fr/share.json":[5571,5571],"./fr/translation.json":[21899,1899],"./fr/upsell-x.json":[35474,5474],"./fr/upsell.json":[41128,1128],"./fr/workspace.json":[94105,4105],"./he-IL/base.json":[18353,8353],"./he-IL/chat.json":[30797,797],"./he-IL/emojipicker.json":[9189,9189],"./he-IL/finance-cards.json":[91305,1305],"./he-IL/loading.json":[86202,6833],"./he-IL/settings.json":[64291,4291],"./he-IL/share.json":[53340,3340],"./he-IL/translation.json":[34790,4790],"./he-IL/upsell-x.json":[49585,9585],"./he-IL/upsell.json":[54875,4875],"./he-IL/workspace.json":[37664,7664],"./hi-IN/base.json":[53237,3237],"./hi-IN/chat.json":[47850,7850],"./hi-IN/emojipicker.json":[74386,4386],"./hi-IN/finance-cards.json":[6167,6167],"./hi-IN/loading.json":[97810,7810],"./hi-IN/settings.json":[87968,7968],"./hi-IN/share.json":[9404,9404],"./hi-IN/translation.json":[68882,8882],"./hi-IN/upsell-x.json":[27100,7100],"./hi-IN/upsell.json":[95225,5225],"./hi-IN/workspace.json":[72881,2881],"./hu-HU/base.json":[94654,4654],"./hu-HU/chat.json":[22052,2052],"./hu-HU/emojipicker.json":[78129,8129],"./hu-HU/finance-cards.json":[95799,5799],"./hu-HU/loading.json":[12278,2278],"./hu-HU/settings.json":[14524,4524],"./hu-HU/share.json":[62922,2922],"./hu-HU/translation.json":[71793,1793],"./hu-HU/upsell-x.json":[30424,424],"./hu-HU/upsell.json":[54136,4136],"./hu-HU/workspace.json":[25e3,5e3],"./id/base.json":[21606,1606],"./id/chat.json":[70139,139],"./id/emojipicker.json":[26023,6023],"./id/finance-cards.json":[84393,4393],"./id/loading.json":[2578,2578],"./id/settings.json":[31328,1328],"./id/share.json":[57581,7581],"./id/translation.json":[70933,933],"./id/upsell-x.json":[5274,5274],"./id/upsell.json":[72198,2198],"./id/workspace.json":[7427,7427],"./it/base.json":[38034,8034],"./it/chat.json":[56785,6785],"./it/emojipicker.json":[56877,6877],"./it/finance-cards.json":[98636,8636],"./it/loading.json":[39355,9355],"./it/settings.json":[21533,1533],"./it/share.json":[25271,5271],"./it/translation.json":[58783,8783],"./it/upsell-x.json":[78094,8094],"./it/upsell.json":[79846,9846],"./it/workspace.json":[24083,4083],"./ja/base.json":[69256,9256],"./ja/chat.json":[74204,4204],"./ja/emojipicker.json":[17014,7014],"./ja/finance-cards.json":[36136,6136],"./ja/loading.json":[32590,2590],"./ja/settings.json":[85054,5054],"./ja/share.json":[52321,2321],"./ja/translation.json":[62560,2560],"./ja/upsell-x.json":[28022,8022],"./ja/upsell.json":[92170,2170],"./ja/workspace.json":[93477,3477],"./ko/base.json":[26131,6131],"./ko/chat.json":[68671,8671],"./ko/emojipicker.json":[77829,7829],"./ko/finance-cards.json":[90965,965],"./ko/loading.json":[20852,852],"./ko/settings.json":[72798,2798],"./ko/share.json":[43761,3761],"./ko/translation.json":[77260,7260],"./ko/upsell-x.json":[51002,1002],"./ko/upsell.json":[13658,3658],"./ko/workspace.json":[84761,4761],"./ms-MY/base.json":[37665,7665],"./ms-MY/chat.json":[68871,8871],"./ms-MY/emojipicker.json":[97898,7898],"./ms-MY/finance-cards.json":[84187,4187],"./ms-MY/loading.json":[84199,4199],"./ms-MY/settings.json":[253,253],"./ms-MY/share.json":[37205,7205],"./ms-MY/translation.json":[83012,3012],"./ms-MY/upsell-x.json":[88001,8001],"./ms-MY/upsell.json":[71253,1253],"./ms-MY/workspace.json":[34956,4956],"./nl/base.json":[32884,2884],"./nl/chat.json":[77799,7799],"./nl/emojipicker.json":[29692,9692],"./nl/finance-cards.json":[1911,1911],"./nl/loading.json":[35904,8453],"./nl/settings.json":[2280,2280],"./nl/share.json":[11319,1319],"./nl/translation.json":[68447,8447],"./nl/upsell-x.json":[76273,6273],"./nl/upsell.json":[43302,3302],"./nl/workspace.json":[39340,9340],"./pl/base.json":[15019,5019],"./pl/chat.json":[21828,1828],"./pl/emojipicker.json":[22872,2872],"./pl/finance-cards.json":[18759,8759],"./pl/loading.json":[66885,6885],"./pl/settings.json":[23450,3450],"./pl/share.json":[91860,1860],"./pl/translation.json":[70938,938],"./pl/upsell-x.json":[66750,6750],"./pl/upsell.json":[32932,2932],"./pl/workspace.json":[56773,6773],"./pt/base.json":[5514,5514],"./pt/chat.json":[93804,3804],"./pt/emojipicker.json":[90065,65],"./pt/finance-cards.json":[95558,5558],"./pt/loading.json":[8583,8583],"./pt/settings.json":[15344,5344],"./pt/share.json":[95700,5700],"./pt/translation.json":[21572,1572],"./pt/upsell-x.json":[75649,5649],"./pt/upsell.json":[25,25],"./pt/workspace.json":[9161,9161],"./ro-RO/base.json":[13836,3836],"./ro-RO/chat.json":[7420,7420],"./ro-RO/emojipicker.json":[83502,3502],"./ro-RO/finance-cards.json":[97816,7816],"./ro-RO/loading.json":[44493,4493],"./ro-RO/settings.json":[76575,6575],"./ro-RO/share.json":[32965,2965],"./ro-RO/translation.json":[23247,3247],"./ro-RO/upsell-x.json":[61166,1166],"./ro-RO/upsell.json":[23218,3218],"./ro-RO/workspace.json":[86738,6738],"./ru/base.json":[67742,7742],"./ru/chat.json":[79817,9817],"./ru/emojipicker.json":[21020,1020],"./ru/finance-cards.json":[33380,3380],"./ru/loading.json":[28395,8395],"./ru/settings.json":[61157,1157],"./ru/share.json":[92660,2660],"./ru/translation.json":[37469,845],"./ru/upsell-x.json":[64519,4519],"./ru/upsell.json":[26511,6511],"./ru/workspace.json":[60775,775],"./sv-SE/base.json":[92870,2870],"./sv-SE/chat.json":[35645,5645],"./sv-SE/emojipicker.json":[13415,3415],"./sv-SE/finance-cards.json":[41310,1310],"./sv-SE/loading.json":[50197,197],"./sv-SE/settings.json":[7499,7499],"./sv-SE/share.json":[48287,8287],"./sv-SE/translation.json":[40059,59],"./sv-SE/upsell-x.json":[44283,4283],"./sv-SE/upsell.json":[58826,8826],"./sv-SE/workspace.json":[77286,7286],"./sv/base.json":[71275,1275],"./sv/chat.json":[40758,758],"./sv/emojipicker.json":[17899,7899],"./sv/finance-cards.json":[42480,2480],"./sv/loading.json":[10048,48],"./sv/settings.json":[30791,791],"./sv/share.json":[7215,7215],"./sv/translation.json":[16636,6636],"./sv/upsell-x.json":[78265,8265],"./sv/upsell.json":[12635,2635],"./sv/workspace.json":[30493,493],"./th/base.json":[1800,1800],"./th/chat.json":[25745,5745],"./th/emojipicker.json":[82889,2889],"./th/finance-cards.json":[39271,9271],"./th/loading.json":[19288,9288],"./th/settings.json":[52235,2235],"./th/share.json":[5321,5321],"./th/translation.json":[81203,1203],"./th/upsell-x.json":[19078,9078],"./th/upsell.json":[91578,1578],"./th/workspace.json":[13965,3965],"./tr/base.json":[61459,1459],"./tr/chat.json":[30416,416],"./tr/emojipicker.json":[16375,6375],"./tr/finance-cards.json":[69078,1292],"./tr/loading.json":[11465,1465],"./tr/settings.json":[74816,4816],"./tr/share.json":[8798,8798],"./tr/translation.json":[4080,4080],"./tr/upsell-x.json":[94216,7504],"./tr/upsell.json":[40350,350],"./tr/workspace.json":[33098,3098],"./uk-UA/base.json":[89584,9584],"./uk-UA/chat.json":[12024,2024],"./uk-UA/emojipicker.json":[22120,2120],"./uk-UA/finance-cards.json":[18254,8254],"./uk-UA/loading.json":[80958,958],"./uk-UA/settings.json":[18160,8160],"./uk-UA/share.json":[78840,8840],"./uk-UA/translation.json":[21341,1341],"./uk-UA/upsell-x.json":[17565,7565],"./uk-UA/upsell.json":[26606,6606],"./uk-UA/workspace.json":[35573,5573],"./vi/base.json":[80506,506],"./vi/chat.json":[98036,8036],"./vi/emojipicker.json":[20972,972],"./vi/finance-cards.json":[96269,6269],"./vi/loading.json":[59683,9683],"./vi/settings.json":[75991,5991],"./vi/share.json":[54724,4724],"./vi/translation.json":[43579,3579],"./vi/upsell-x.json":[69843,9843],"./vi/upsell.json":[20773,773],"./vi/workspace.json":[11814,1814],"./zh-TW/base.json":[98695,8695],"./zh-TW/chat.json":[23693,3693],"./zh-TW/emojipicker.json":[30039,39],"./zh-TW/finance-cards.json":[43908,3908],"./zh-TW/loading.json":[65687,5687],"./zh-TW/settings.json":[32659,2659],"./zh-TW/share.json":[78038,8038],"./zh-TW/translation.json":[4497,4497],"./zh-TW/upsell-x.json":[83756,3756],"./zh-TW/upsell.json":[13180,3180],"./zh-TW/workspace.json":[81885,1885],"./zh/base.json":[39416,9416],"./zh/chat.json":[44249,4249],"./zh/emojipicker.json":[43897,3897],"./zh/finance-cards.json":[14706,4706],"./zh/loading.json":[55334,5334],"./zh/settings.json":[95236,5236],"./zh/share.json":[54554,4554],"./zh/translation.json":[929,929],"./zh/upsell-x.json":[52607,2607],"./zh/upsell.json":[90048,9646],"./zh/workspace.json":[37726,7726]};function s(e){if(!n.o(o,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=o[e],s=t[0];return n.e(t[1]).then(function(){return n.t(s,19)})}s.keys=function(){return Object.keys(o)},s.id=75006,e.exports=s},75395:function(){},503:function(){},74431:function(e,t,n){"use strict";n.d(t,{A:function(){return p},g:function(){return u}});var o=n(2899),s=n(67206),r=n(19951),a=n(71851),i=n(40881),l=n(4694),c=n(70702),d=n(10576);function u(e){let{assetUrl:t}=e,{t:n}=(0,c.$G)("chat"),{resolvedTheme:r}=(0,i.F)(),{isLoading:a,error:d,data:u}=(0,s.aM)({queryKey:["text-asset",t],queryFn:async()=>{if(!t)throw Error("Asset URL is required");let e=await fetch(t,{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch: ".concat(e.statusText));return await e.text()},enabled:!!t}),f="dark"===r;return((0,l.useEffect)(()=>{document.body.dataset.agThemeMode=f?"dark":"light"},[f]),a)?(0,o.jsx)("div",{className:"p-4",children:n("Loading text…","Loading text…")}):d?(0,o.jsx)("div",{className:"p-4",children:n("errorMessage","Error: {{error}}",{error:d.message})}):u?(0,o.jsx)(p,{editable:!1,csvStringContent:u}):(0,o.jsx)("div",{className:"p-4",children:n("No text content available.","No text content available.")})}function p(e){let{csvStringContent:t,editable:n,onContentUpdate:s}=e,[i,c]=(0,l.useState)([]),[u,p]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=(0,d.ij)(t,{type:"string"}),n=e.SheetNames[0],o=e.Sheets[n];c(d.P6.sheet_to_json(o))},[t]),(0,l.useEffect)(()=>{i.length>0&&p(Object.keys(i[0]).filter(e=>!e.startsWith("__EMPTY")).map(e=>({field:e,flex:1,editable:n,onCellValueChanged:e=>{null!==e.node.rowIndex&&s&&s(d.P6.sheet_to_csv(d.P6.json_to_sheet(i)))}})))},[n,s,i]);let f=(0,l.useMemo)(()=>{let e=window.innerHeight;return 42*i.length<.8*e},[i.length]);return(0,o.jsx)("div",{className:"w-full h-[80vh]",children:(0,o.jsx)(a.s,{rowHeight:42,rowData:i,columnDefs:u,modules:[r.ea9],defaultColDef:{resizable:!0},suppressFieldDotNotation:!0,autoSizeStrategy:{type:"fitGridWidth",defaultMinWidth:200},domLayout:f?"autoHeight":"normal"})})}},88416:function(e,t,n){"use strict";let o;n.d(t,{kw:function(){return eH},GJ:function(){return eO}});var s=n(2899),r=n(76038),a=n(59578),i=n(81211),l=n(72242),c=n(64327),d=n(74239),u=n(56672),p=n(4694),f=n(38398),m=n(74431),h=n(37330),g=n(69492),v=n(19903),x=n(95541),j=n(40881),y=n(45820),b=n(53952);let k={base:"vs-dark",inherit:!0,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{"editor.background":"#18191B"}},w={base:"vs",inherit:!0,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{"editor.background":"#FDFDFC"}};x._m.config({paths:{vs:window.location.origin+"/vs/"}});let C=()=>x._m.init().then(e=>{o=e,e.editor.defineTheme("dark",k),e.editor.defineTheme("light",w),e.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0,noSemanticValidation:!0}),e.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0,noSemanticValidation:!0})}).catch(e=>{b.Tb(e)});var N=n(74542);async function _(e,t,n){let o=g.gK.getState();if(!o.conversationId)return!1;try{await o.sendResponse({message:t,parentResponseId:o.lastMessageId,conversationId:o.conversationId,fileAttachmentIds:[],webpageUrls:[],setOpimisticUserResponse:!0,setUserResponse:!0,metadata:{selectedText:n,artifactAction:e}})}catch(e){(0,N.H)("artifact:ask",e)}}var I=n(34116),E=n(60250),A=n(30430),T=n(73069),S=n(3667),D=n(70702),R=n(6087),L=n(15571);let z={resize:"none"};function B(e){let{onSubmit:t}=e,[n,o]=(0,p.useState)(""),{t:r}=(0,D.$G)("chat");return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(n),o("")},className:"flex gap-1 items-center",role:"form",children:[(0,s.jsx)(L.Z,{value:n,style:z,onChange:e=>{o(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||(e.preventDefault(),t(n),o(""))},minRows:1,maxRows:4,autoFocus:!0,dir:"auto",className:"rounded-xl px-2 border-none shadow-none text-primary focus-visible:ring-0 min-h-[20px] min-w-[220px] resize-none focus:outline-none font-sm bg-popover",placeholder:r("Edit or explain…","Edit or explain…")}),(0,s.jsx)(I.zx,{type:"submit",size:"icon",className:"bg-primary h-8 self-end","aria-label":r("Submit","Submit"),children:(0,s.jsx)(R.Hf,{size:20})})]})}let F={size:20,className:"text-secondary"};function M(e){let{onAskGrok:t,onExplain:n}=e,[o,r]=(0,p.useState)(!1),{t:a}=(0,D.$G)("chat");return t&&o?(0,s.jsx)("div",{className:"bg-popover border p-1 rounded-2xl flex",children:(0,s.jsx)(B,{onSubmit:t})}):t||n?(0,s.jsx)(T.M,{children:(0,s.jsxs)(S.E.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},className:"bg-popover border p-1 rounded-2xl flex shadow-lg",children:[t?(0,s.jsxs)(I.zx,{variant:"ghost",className:"rounded-xl focus-visible:ring-0 text-primary",onClick:()=>r(!0),children:[(0,s.jsx)(E.Z,{...F}),a("Ask Grok","Ask Grok")]}):null,n?(0,s.jsxs)(I.zx,{variant:"ghost",className:"rounded-xl focus-visible:ring-0 text-primary",onClick:n,children:[(0,s.jsx)(A.Z,{...F}),a("explain-button.label","Explain")]}):null]},"selection_menu")}):null}let P=e=>{let{syntax:t,editable:n,value:r,onContentUpdate:a}=e,l=(0,p.useRef)(),c=(0,i.g)(),d=c.SHOW_ARTIFACTS_ASK_GROK_BUTTON,u=c.SHOW_ARTIFACTS_EXPLAIN_BUTTON,{resolvedTheme:f}=(0,j.F)();(0,p.useEffect)(()=>{C()},[]);let m=(0,p.useCallback)((e,t)=>{t.isFlush||a(e)},[a]),h=(0,p.useCallback)(()=>{l.current&&l.current();let e=null==o?void 0:o.editor.getEditors()[0];if(e){var t;let n=e.getSelection();if(!n)return;let r=null===(t=e.getModel())||void 0===t?void 0:t.getValueInRange(n);if(r){let t=document.createElement("div"),a=(0,y.createRoot)(t),i={getId:()=>"selected-text.widget",getDomNode:()=>t,getPosition:()=>o?{position:{lineNumber:n.endLineNumber,column:n.startColumn},preference:[o.editor.ContentWidgetPositionPreference.BELOW,o.editor.ContentWidgetPositionPreference.ABOVE]}:{position:{lineNumber:n.endLineNumber,column:n.startColumn},preference:[]}};a.render((0,s.jsx)("div",{onMouseUp:e=>e.stopPropagation(),children:(0,s.jsx)(M,{onAskGrok:d?t=>(e.removeContentWidget(i),_("ask",t,r)):void 0,onExplain:u?()=>(e.removeContentWidget(i),_("explain","Explain",r)):void 0})})),e.addContentWidget(i),l.current=()=>e.removeContentWidget(i)}}},[]),g=(0,p.useMemo)(()=>({readOnly:!n,contextmenu:!1,suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",lineNumbers:"off",quickSuggestions:!1,fontFamily:"var(--font-ibm-plex-mono)",fontSize:14,stickyScroll:{enabled:!1},wordBasedSuggestions:"off",wordWrap:"on",parameterHints:{enabled:!1},hover:{enabled:!1},minimap:{enabled:!1},scrollbar:{useShadows:!1},scrollBeyondLastLine:!1,padding:{bottom:30}}),[n]);return(0,s.jsx)("div",{className:"w-full h-full",onMouseUp:h,children:(0,s.jsx)(x.ZP,{height:"100%",width:"100%",language:t,value:r,onChange:m,theme:"dark"===f?"dark":"light",options:g})})};var H=n(82095),O=n(37446),U=n(12707);let Z=(0,p.memo)(e=>{let{summary:t,isLast:n}=e;return(0,s.jsx)(S.E.div,{className:"duration-500 ease-out",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-6 h-6",children:n?(0,s.jsx)(O.$,{className:"w-6 h-6"}):(0,s.jsx)(U.gwl,{className:"w-6 h-6"})}),(0,s.jsx)("h2",{className:"text-primary font-semibold",children:t})]})},t)});function W(e){let{content:t}=e,{t:n}=(0,D.$G)("chat"),o=null==t?void 0:t.split("\n").slice(0,-1).join("\n"),r=(0,p.useMemo)(()=>(function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=/^(?:\s*\/\/([^\n]*))|(?:\/\*([\s\S]*?)\*\/)|(?:<!--([\s\S]*?)-->)/gm;for(;null!==(t=o.exec(e));){let e=(t[1]||t[2]||t[3]).replace(/React/gi,"report");n.push(e)}return n})(null!=o?o:"",[n("artifact.report.loading","Analyzing data")]),[o,n]);return(0,s.jsx)("div",{className:" inset-0 bg-background-secondary/50 backdrop-blur-md flex justify-center ",children:(0,s.jsx)("div",{className:"rounded-lg bg-background-secondary px-12 py-8 mx-8 w-full max-w-[650px] my-4 border border-border-l1 shadow-lg",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute px-[11px] py-[20px] h-full",children:(0,s.jsx)("div",{className:"w-0.5 bg-border-l2 h-full"})}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:(0,s.jsx)(T.M,{children:r.map((e,t)=>(0,s.jsx)(Z,{summary:e,isLast:t===r.length-1},t))})})]})})})}var V=n(83711),G=n(38040),q=n(53429),$=n(75361),K=n(5893);let X=(e,t)=>{let{t:n}=(0,D.$G)("chat");(0,G.y)(V.gu,async o=>{var s;if(o.preventDefault(),!e||!e.id||!e.title||!e.versionId||e.incomplete||void 0===t)return!1;let r=(0,K.O)({id:e.id,versionId:e.versionId,text:t,contentType:null!==(s=e.contentType)&&void 0!==s?s:"text/plain",title:e.title});try{if(await (0,q.i4)(e.id,e.versionId,r))$.Am.success(n("artifact.save.success","The changes have been saved"));else throw Error("Failed to save artifacts")}catch(e){b.Tb(e),$.Am.error(n("artifact.save.fail","Failed to save changes"))}},[t])};var Y=n(54173),J=n(37305),Q=n(42895),ee=n(64431),et=n(38742),en=n(10925),eo=n(62484),es=n(64447),er=n(23191),ea=n(2072),ei=n(40093),el=n(34168),ec=n(14999),ed=n(14274),eu=n(99867),ep=n(87391),ef=n(842),em=n(44199),eh=n(393),eg=e=>{let{node:t}=e,[n,o]=(0,p.useState)(!1),{t:r}=(0,D.$G)("base"),{resolvedTheme:a}=(0,j.F)(),[i,c]=(0,p.useState)(!1),d=t.attrs.language||"plain",u=(0,p.useCallback)(()=>c(!i),[i]),f=(0,p.useCallback)(()=>{if(""===t.textContent.trim())return;let e=t.textContent;e=e.replace(/(\n)$/,""),navigator.clipboard.writeText(e).then(()=>{o(!0),setTimeout(()=>o(!1),2e3)}).catch(e=>{(0,N.H)("artifact-markdown",e)})},[t.textContent]),m=(0,p.useMemo)(()=>t.textContent.split("\n").length-1,[t.textContent]);return(0,s.jsx)(er.T5,{className:"codeblock",children:(0,s.jsxs)("div",{className:"relative my-3 -mr-2 right-1 md:-mr-8 md:right-4 rounded-xl",children:[(0,s.jsx)("div",{className:"flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1",children:(0,s.jsx)("span",{className:"font-mono text-secondary text-xs",children:d})}),(0,s.jsx)("div",{className:"sticky right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-28 @[0px]/preview:top-5",children:(0,s.jsxs)("div",{className:"absolute bottom-1 right-1 flex flex-row gap-0.5",children:[(0,s.jsx)(I.zx,{variant:"sticky",size:"sm",onClick:u,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.Z,{className:"size-4"}),(0,s.jsx)("span",{className:"hidden @sm:block",children:r("Expand","Expand")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ef.Z,{className:"size-4"}),(0,s.jsx)("span",{className:"hidden @sm:block",children:r("Collapse","Collapse")})]})}),(0,s.jsx)(I.zx,{onClick:f,variant:"sticky",size:"sm",disabled:n,children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(em.Z,{className:"size-4"}),(0,s.jsx)("span",{className:"hidden @sm:block",children:r("Copied","Copied")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eh.Z,{className:"size-4"}),(0,s.jsx)("span",{className:"hidden @sm:block",children:r("Copy","Copy")})]})})]})}),i?(0,s.jsx)("div",{className:(0,l.cn)("dark"===a?"bg-surface-inset":"bg-surface-l1","text-fg-secondary","border border-border-l1 border-t-0","text-[.9em] leading-[1.5em]","rounded-b-[12px] p-[16px]","italic"),children:r("lines",{count:m,defaultValue_one:"{{count}} hidden line",defaultValue_other:"{{count}} hidden lines"})}):(0,s.jsx)("pre",{className:(0,l.cn)("whitespace-pre-wrap break-all overflow-x-auto text-primary bg-surface-l1 dark:bg-surface-inset m-0 rounded-t-none rounded-b-2xl","border border-border-l1 border-t-0"),children:(0,s.jsx)(er.ms,{as:"code",spellCheck:"false",className:t.attrs.language?"language-".concat(t.attrs.language):""})})]})})};let ev=/^```([a-z]+)?[\s\n]$/,ex=/^~~~([a-z]+)?[\s\n]$/,ej=ec.NB.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;let{languageClassPrefix:n}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["pre",(0,ec.P1)(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>t=>{let{commands:n}=t;return n.setNode(this.name,e)},toggleCodeBlock:e=>t=>{let{commands:n}=t;return n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!n||!t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;let{state:n}=t,{selection:o}=n,{$from:s,empty:r}=o;if(!r||s.parent.type!==this.type)return!1;let a=s.parentOffset===s.parent.nodeSize-2,i=s.parent.textContent.endsWith("\n\n");return!!a&&!!i&&t.chain().command(e=>{let{tr:t}=e;return t.delete(s.pos-2,s.pos),!0}).exitCode().run()},ArrowDown:e=>{let{editor:t}=e;if(!this.options.exitOnArrowDown)return!1;let{state:n}=t,{selection:o,doc:s}=n,{$from:r,empty:a}=o;if(!a||r.parent.type!==this.type||r.parentOffset!==r.parent.nodeSize-2)return!1;let i=r.after();return void 0!==i&&(s.nodeAt(i)?t.commands.command(e=>{let{tr:t}=e;return t.setSelection(ed.Y1.near(s.resolve(i))),!0}):t.commands.exitCode())}}},addInputRules(){return[(0,ec.zK)({find:ev,type:this.type,getAttributes:e=>({language:e[1]})}),(0,ec.zK)({find:ex,type:this.type,getAttributes:e=>({language:e[1]})})]},addNodeView:()=>(0,er.fW)(eg,{stopEvent:e=>"copy"!==e.event.type&&"cut"!==e.event.type})}),ey=[];async function eb(e){if(ey.includes(e)||!o)return!1;try{return await o.editor.colorize("",e,{}),ey.push(e),!0}catch(e){return b.Tb(e),!1}}async function ek(e){let{}=e;o||await C()}let ew="light";function eC(e){let{doc:t,name:n}=e,s=[];for(let e of(0,ec.N2)(t,e=>e.type.name===n)){var r,a,i;let t=e.pos+1,n=e.node.attrs.language,l=null!==(r=null==o?void 0:o.editor.tokenize(e.node.textContent,n))&&void 0!==r?r:[[]],c=e.node.textContent.split("\n");for(let e=0;e<l.length;e++){let n=c[e].length,o=l[e];for(let e=0;e<o.length;e++){let r=o[e],l=t+r.offset,c=t+(null!==(i=null===(a=o[e+1])||void 0===a?void 0:a.offset)&&void 0!==i?i:n),d=function(e,t){var n;let o=e.rules.filter(e=>t.startsWith(e.token)).reduce((e,t)=>t.token.length>e.token.length?t:e,{token:""});return{color:(null==o?void 0:o.foreground)?"#".concat(o.foreground):void 0,fontStyle:null!==(n=null==o?void 0:o.fontStyle)&&void 0!==n?n:"normal"}}("dark"===e_()?k:w,r.type),u=eu.p.inline(l,c,{style:d.color?"color: ".concat(d.color):void 0});s.push(u)}t+=n+1}}return eu.EH.create(t,s)}let eN=ej.extend({name:"codeBlock",addKeyboardShortcuts(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),ArrowUp:e=>{let{editor:t}=e;if(!this.options.exitOnArrowUp)return!1;let{state:n}=t,{selection:o}=n,{$from:s,empty:r}=o;if(!r||s.parent.type!==this.type||0!==s.parentOffset)return!1;let a=s.before();return void 0!==a&&0===a&&t.commands.insertContentAt({from:0,to:0},{type:"paragraph"})},"Shift-Enter":e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;let{state:n}=t,{selection:o}=n,{$from:s,empty:r}=o;if(!r||s.parent.type!==this.type)return!1;let a=s.parentOffset===s.parent.nodeSize-2,i=s.parent.textContent.endsWith("\n\n");return!!a&&!!i&&t.chain().command(e=>{let{tr:t}=e;return t.delete(s.pos-2,s.pos),!0}).exitCode().run()}}},addOptions(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),theme:e_(),exitOnArrowUp:!0}},addProseMirrorPlugins(){var e;return[...(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[],new ed.Sy({key:new ed.H$("monaco"),view(e){let t=this.name;class n{update(e,t){this.checkUndecoratedBlocks()}destroy(){}async initDecorations(){let n=e.state.doc;await ek({doc:n,name:t});let o=e.state.tr.setMeta("monacoPluginForceDecoration",!0);e.dispatch(o)}async checkUndecoratedBlocks(){var t;let n=(0,ec.N2)(e.state.doc,e=>"codeBlock"===e.type.name);if((await Promise.all(n.map(e=>eb(e.node.attrs.language)))).includes(!0)){let t=e.state.tr.setMeta("monacoPluginForceDecoration",!0);e.dispatch(t)}let o=null!==(t=document.documentElement.style.getPropertyValue("color-scheme"))&&void 0!==t?t:"light";if(o!==ew){ew=o;let t=e.state.tr.setMeta("monacoPluginForceDecoration",!0);e.dispatch(t)}}constructor(){this.initDecorations()}}return new n},state:{init:(e,t)=>{let{doc:n}=t;return eC({doc:n,name:this.name,theme:this.options.theme})},apply:(e,t,n,o)=>{let s=n.selection.$head.parent.type.name,r=o.selection.$head.parent.type.name,a=(0,ec.N2)(n.doc,e=>e.type.name===this.name),i=(0,ec.N2)(o.doc,e=>e.type.name===this.name),l=e.docChanged&&([s,r].includes(this.name)||i.length!==a.length||e.steps.some(e=>void 0!==e.from&&void 0!==e.to&&a.some(t=>t.pos>=e.from&&t.pos+t.node.nodeSize<=e.to))),c=e.getMeta("themeChange");return e.getMeta("monacoPluginForceDecoration")||c||l?(c&&(this.options.theme=c),eC({doc:e.doc,name:this.name,theme:this.options.theme})):t.map(e.mapping,e.doc)}},props:{decorations(e){return this.getState(e)}}})]}});function e_(){var e;return null!==(e=document.documentElement.style.getPropertyValue("color-scheme"))&&void 0!==e?e:"light"}var eI=n(97404),eE=n(41811),eA=n(98450),eT=n(70656),eS=n(32701),eD=n(27414);let eR="text-secondary hover:text-primary hover",eL=e=>{var t;let{editor:n,editable:o}=e;(0,er.sZ)({editor:n,selector:e=>e.transactionNumber});let{t:r}=(0,D.$G)("chat"),{client:a}=(0,d.useStatsigClient)(),i=function(e){let{t}=(0,D.$G)("chat"),{client:n}=(0,d.useStatsigClient)();return[{label:t("text.size.normal","Normal text"),isActive:e.isActive("paragraph"),select:()=>{e.chain().focus().setParagraph().run(),n.logEvent("artifact_text_tool_paragraph_selected",void 0,{})}},{label:t("text.size.heading1","Heading 1"),isActive:e.isActive("heading",{level:1}),className:"text-[17px] font-bold",select:()=>{e.chain().focus().setHeading({level:1}).run(),n.logEvent("artifact_text_tool_heading1_selected",void 0,{})}},{label:t("text.size.heading2","Heading 2"),isActive:e.isActive("heading",{level:2}),className:"text-[16px] font-bold",select:()=>{e.chain().focus().setHeading({level:2}).run(),n.logEvent("artifact_text_tool_heading2_selected",void 0,{})}},{label:t("text.size.heading3","Heading 3"),isActive:e.isActive("heading",{level:3}),className:"text-[15px] font-bold",select:()=>{e.chain().focus().setHeading({level:3}).run(),n.logEvent("artifact_text_tool_heading3_selected",void 0,{})}}]}(n),c=o&&null!==(t=i.find(e=>e.isActive))&&void 0!==t?t:i[0];return(0,s.jsxs)("div",{className:(0,l.cn)("flex items-center relative",o?void 0:"opacity-50 pointer-events-none"),children:[(0,s.jsxs)(eI.h_,{children:[(0,s.jsx)(eI.$F,{asChild:!0,children:(0,s.jsxs)(I.zx,{variant:"ghost",size:"sm",className:"p-1 w-32 flex justify-between px-4 overflow-hidden rounded-full text-secondary hover:text-primary",children:[c.label,(0,s.jsx)(R.v4,{strokeWidth:2,className:"size-5 sm:size-4 opacity-50"})]})}),(0,s.jsx)(eI.AW,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:i.map(e=>(0,s.jsx)(eI.Xi,{onClick:e.select,className:e.className,children:e.label},e.label))})]}),(0,s.jsx)(eE.Z,{orientation:"vertical",className:"h-8 mr-2 ml-1"}),(0,s.jsx)(I.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleBold().run(),a.logEvent("artifact_text_tool_bold_toggled",void 0,{enabled:n.isActive("bold").toString()})},className:(0,l.cn)(eR,o&&n.isActive("bold")?"bg-toggle-hover text-primary":""),tooltipContent:r("text.style.bold","Bold"),"aria-label":r("text.style.bold","Bold"),children:(0,s.jsx)(eA.X20,{className:"!size-5"})}),(0,s.jsx)(I.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleItalic().run(),a.logEvent("artifact_text_tool_italic_toggled",void 0,{enabled:n.isActive("italic").toString()})},className:(0,l.cn)(eR,o&&n.isActive("italic")?"bg-toggle-hover text-primary":""),tooltipContent:r("text.style.italic","Italic"),"aria-label":r("text.style.italic","Italic"),children:(0,s.jsx)(eA.MzY,{className:"!size-5"})}),(0,s.jsx)(I.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleUnderline().run(),a.logEvent("artifact_text_tool_underline_toggled",void 0,{enabled:n.isActive("underline").toString()})},className:(0,l.cn)(eR,o&&n.isActive("underline")?"bg-toggle-hover text-primary":""),tooltipContent:r("text.style.underline","Underline"),"aria-label":r("text.style.underline","Underline"),children:(0,s.jsx)(eT.Z,{size:18})}),(0,s.jsx)(eE.Z,{orientation:"vertical",className:"h-8 ml-2 mr-1"}),(0,s.jsx)(I.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleList("bulletList","listItem").run(),a.logEvent("artifact_text_tool_bullet_list_toggled",void 0,{enabled:n.isActive("bulletList").toString()})},className:(0,l.cn)(eR,o&&n.isActive("bulletList")?"bg-toggle-hover text-primary":""),tooltipContent:r("text.format.list","List"),"aria-label":r("text.format.list","List"),children:(0,s.jsx)(eS.Z,{size:18})}),(0,s.jsx)(I.g$,{variant:"ghost",size:"iconMd",onClick:()=>{n.chain().focus().toggleOrderedList().run(),a.logEvent("artifact_text_tool_ordered_list_toggled",void 0,{enabled:n.isActive("orderedList").toString()})},className:(0,l.cn)(eR,o&&n.isActive("orderedList")?"bg-toggle-hover text-primary":""),tooltipContent:r("text.format.ordered-list","Ordered list"),"aria-label":r("text.format.ordered-list","Ordered list"),children:(0,s.jsx)(eD.Z,{size:19})})]})},ez=n(82554).EK.extend({renderHTML(e){let{HTMLAttributes:t}=e;return["span",(0,ec.P1)(t,{class:"text-sm px-1 rounded-sm !font-mono bg-sunset/10 text-rust dark:bg-dawn/10 dark:text-dawn"}),""]}}),eB=[ea.Z,ee.ZP.configure({resizable:!0}),eo.Z.configure({HTMLAttributes:{class:"border-border"}}),en.Z,et.Z,ei.U,ez,eN,el.ZP.configure({types:["heading","paragraph","bulletList","orderedList"]}),es.Z],eF=e=>{let{content:t,editable:n,onSetMenu:o,setContent:r}=e,{theme:a}=(0,j.F)(),i=(0,er.jE)({extensions:eB,content:t,editable:n,onTransaction:e=>{let{editor:t,transaction:o}=e;n&&o.steps.length>0&&!o.getMeta("preventUpdate")&&r(t.storage.markdown.getMarkdown())}});return(0,p.useEffect)(()=>{i&&i.commands.command(()=>!0)},[a]),(0,p.useEffect)(()=>{if(!i||i.view.hasFocus())return;let{from:e,to:n}=i.state.selection;try{i.commands.setContent(t)}catch(e){b.Tb(e)}i.commands.setTextSelection({from:e,to:n})},[!!i,t]),(0,p.useEffect)(()=>{i&&i.setEditable(n)},[n]),(0,p.useEffect)(()=>{if(i&&o)return o((0,s.jsx)(eL,{editor:i,editable:n})),()=>o(void 0)},[i,o,n]),(0,s.jsx)("div",{className:"[&_.ProseMirror]:!outline-0 [&_.ProseMirror]:!h-full [&_h1]:leading-10 [&_h2]:leading-8 [&_h2]:mb-2 [&_p_strong]:font-bold h-full",children:(0,s.jsx)(er.kg,{editor:i,className:"h-full"})})},eM=e=>{let{children:t,onAskGrok:n,onExplain:o,disabled:r}=e,a=(0,p.useRef)(null),l=(0,i.g)(),c=l.SHOW_ARTIFACTS_ASK_GROK_BUTTON,d=l.SHOW_ARTIFACTS_EXPLAIN_BUTTON,[u,f]=p.useState(""),[m,h]=p.useState({left:0,top:0}),g=p.useCallback(()=>{r||setTimeout(()=>{let e=window.getSelection();if(e){let t=e.toString().trim();if(t.length>0){let n=e.getRangeAt(0).getBoundingClientRect(),o=0,s=0;if(a.current){let e=a.current.getBoundingClientRect();o=e.left,s=e.top}h({left:n.left-o,top:n.bottom-s}),f(t)}else f("")}},0)},[r]),v=p.useCallback(e=>(f(""),n(u,e)),[u]),x=p.useCallback(()=>(f(""),o(u)),[u]),j=p.useCallback(()=>{let e=()=>{g(),window.removeEventListener("mouseup",e)};window.addEventListener("mouseup",e)},[g]);return(0,p.useEffect)(()=>{let e=()=>{f(""),window.removeEventListener("mousedown",e)};return""!==u&&window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[u]),(0,s.jsxs)("div",{onMouseDown:j,onMouseUp:g,ref:a,className:"relative h-full w-full",children:[t,""!==u?(0,s.jsx)("div",{className:"absolute",style:{top:m.top+10,left:m.left},onMouseDown:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation(),children:(0,s.jsx)(M,{onAskGrok:c?v:void 0,onExplain:d?x:void 0})}):null]})},eP=[];function eH(e){var t,n;let{artifact:o,onSetMenu:r,readOnly:x}=e,{mode:j,setMode:y,isRefreshing:b}=(0,c.nf)(),{isLoading:k}=(0,Q.g)(o),w=(0,d.useStatsigClient)(),C=(0,f.Z)(),N=(0,p.useRef)(C.pathname),I=(0,p.useRef)(null),E=(0,i.g)(),A=(0,g.gK)(u.Z("setSidePanelContent")),T=["text/plain","text/markdown"],S=(0,v.MH)(o),D="text/csv"===o.contentType||"application/csv"===o.contentType,{onTextUpdate:R}=(0,K.K)(),L=(0,p.useRef)(o);L.current=o;let z=(0,p.useCallback)(e=>{L.current.incomplete||R(L.current,e)},[R]);(0,p.useEffect)(()=>{if(o.id){var e;w.logEvent("artifact_shown",void 0,{contentType:null!==(e=o.contentType)&&void 0!==e?e:"undefined"})}},[o.id]),(0,p.useEffect)(()=>{N.current!==C.pathname&&A(void 0)},[C.pathname]);let B=o.contentType&&!T.includes(o.contentType),F=o.incomplete?h._I:h.Cn,M=(0,v.VD)(o)&&E.ENABLE_REPORT_LOADING_SCREEN,O=B?j:"preview";(0,p.useEffect)(()=>{y(!o.incomplete&&S||M?"preview":"code")},[o.id,o.incomplete]);let U=eU(o.contentType),Z=(0,p.useCallback)((e,t)=>{var n;return w.logEvent("artifact_ask_grok_clicked",void 0,{contentType:null!==(n=o.contentType)&&void 0!==n?n:"undefined"}),_("ask",t,e)},[o.contentType]),V=(0,p.useCallback)(e=>{var t;return w.logEvent("artifact_explain_clicked",void 0,{contentType:null!==(t=o.contentType)&&void 0!==t?t:"undefined"}),_("explain","Explain",e)},[o.contentType]),G=(0,J.G)(o);X(o,G);let[q,$,ee,et]=(0,a.y)(null!=G?G:"",null!==(t=eU(o.contentType))&&void 0!==t?t:""),en=(0,v.L2)(o)&&et();(0,p.useEffect)(()=>{en&&"preview"===O&&!o.incomplete&&q()},[en,G,O,o.incomplete]);let eo=(0,Y.g)(o,null!=G?G:""),es=(0,p.useMemo)(()=>{var e,t;return e=null!=G?G:"",t=eo.script,(0,v.qy)(o)?function(e){let t=getComputedStyle(document.documentElement).getPropertyValue("--background").trim(),n=getComputedStyle(document.documentElement).getPropertyValue("color").trim();return'\n<html>\n  <head>\n    <script src="https://cdn.jsdelivr.net/pyodide/v0.27.3/full/pyodide.js"></script>\n    <script id="python-script" type="text/python">\n'.concat(e,"\ndef task_done_callback(task):\n  exc = task.exception()\n  if exc:\n    import traceback\n    traceback.print_exception(exc)\n\nimport asyncio\nfor task in asyncio.all_tasks():\n  task.add_done_callback(task_done_callback)\n    </script>\n    <style>\n      * {\n        font-family: Menlo, monospace;\n      }\n      #repl-container {\n        background-color: #111111;\n        color: white;\n        padding-left: 16px;\n        padding-right: 10px;\n        padding-bottom: 5px;\n        margin: 0px;\n      }\n      #input {\n        background-color: transparent;\n        border: none;\n        color: white;\n        width: 100%;\n        resize: none;\n        min-height: 1em;\n        overflow: hidden;\n        font-size: 16px;\n        outline: none; /* Added to remove active border */\n      }\n      #output {\n        margin: 0px;\n        padding-top: 1em;\n        padding-bottom: 0px;\n        background-color: transparent;\n        border: none;\n        color: white;\n        width: 100%;\n        resize: none;\n        min-height: 1em;\n        max-height: 80vh;\n        overflow: auto;\n        white-space: pre-wrap;\n        overflow-wrap: break-word;\n        font-size: 16px;\n      }\n      #doc-container {\n        color: ").concat(n,';\n        font-size: 12px;\n        padding-left: 16px;\n        padding-right: 10px;\n        padding-bottom: 5px;\n      }\n      #canvas {\n        max-width: 100%;\n        max-height: 100%;\n        object-fit: contain;\n      }\n      .center-canvas {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 100vh;\n      }\n    </style>\n  </head>\n  <body style="background-color: ').concat(t,';">\n    <div id="repl-container">\n      <pre id="output">Loading...\n</pre>\n      <div style="display: flex; align-items: center">\n        <span style="padding-right: 5px">>>></span>\n        <textarea id="input" rows="1" style="flex: 1" placeholder=""></textarea>\n      </div>\n    </div>\n    <div id="canvas-container">\n      <canvas id="canvas" width="1" height="1" onresize="onCanvasResize()"></canvas>\n    </div>\n    <div id="chart-container">\n    </div>\n    <script>\n      let pyodide;\n      let commandHistoryIdx = 0;\n      let commandHistory = [];\n      let outputDiv;\n      let inputArea;\n      let chartContainer;\n      let replContainer;\n      let canvasContainer;\n      function generateCommandHistory() {\n        const regex = />>> (.+?)$/gm;\n        const matches = outputDiv.innerText.matchAll(regex);\n        const capturedGroups = Array.from(matches).map((match) => match[1]);\n        return capturedGroups;\n      }\n\n      function onCanvasResize() {\n        outputDiv.style.maxHeight = "10em";\n      }\n\n      var seenCanvas = new Set();\n      function redirectCanvas() {\n        const observer = new MutationObserver((mutations) => {\n          mutations.forEach((mutation) => {\n            mutation.addedNodes.forEach((node) => {\n              // Check if the node is a DIV that might contain a canvas\n              if (node.tagName === "DIV") {\n                const matplotlibCanvas = node.querySelector("canvas");\n                if (matplotlibCanvas) {\n                  if (seenCanvas.has(matplotlibCanvas.id)) {\n                    return;\n                  }\n                  seenCanvas.add(matplotlibCanvas.id);\n                  node.remove()\n                  matplotlibCanvas.remove();\n                  if (matplotlibCanvas.id.includes("rubberband")) {\n                    return;\n                  }\n\n                  const imageData = matplotlibCanvas.toDataURL(\'image/png\');\n                  const img = document.createElement(\'img\');\n                  img.src = imageData;\n                  img.style.maxWidth = "100%";\n                  img.style.maxHeight = "100%";\n                  img.style.objectFit = "contain";\n                  chartContainer.appendChild(img);\n\n                  outputDiv.style.maxHeight = "10em";\n\n                  const originalCanvas = document.getElementById("canvas");\n                  if (originalCanvas) {\n                    originalCanvas.remove();\n                  }\n                }\n              }\n            });\n          });\n        });\n\n        observer.observe(document.body, { childList: true, subtree: true });\n      }\n\n      function streamOutput(text) {\n        if (outputDiv.textContent)\n        {\n          outputDiv.textContent += "\\n" + text;\n        }\n        else\n        {\n          outputDiv.textContent = text;\n        }\n        outputDiv.scrollTop = outputDiv.scrollHeight; // Auto-scroll\n        commandHistory = generateCommandHistory().reverse();\n      }\n\n      let stderrOutput = "";\n      function createStderrHandler() {\n        return {\n          write(text) {\n            replContainer.style.display = "block";\n\n            if (typeof text === \'object\') {\n              text = new TextDecoder().decode(text);\n            }\n\n            if (!stderrOutput)\n            {\n              outputDiv.textContent += "\\n";\n            }\n            stderrOutput += text;\n            console.error(\'STDERR:\', text);\n            outputDiv.textContent += text;\n            outputDiv.scrollTop = outputDiv.scrollHeight; // Auto-scroll\n            return text.length;\n          },\n          flush() {\n            outputDiv.textContent += "\\n";\n            stderrOutput = "";\n          }\n        };\n      }\n\n      async function main() {\n        redirectCanvas();\n\n        outputDiv = document.getElementById("output");\n        inputArea = document.getElementById("input");\n        chartContainer = document.getElementById("chart-container");\n        replContainer = document.getElementById("repl-container");\n        canvasContainer = document.getElementById("canvas-container");\n\n        pyodide = await loadPyodide();\n        pyodide._api._skip_unwind_fatal_error = true;\n        pyodide.setStdout({ batched: streamOutput });\n        pyodide.setStderr(createStderrHandler());\n\n        const sdl2Canvas = document.getElementById("canvas");\n        pyodide.canvas.setCanvas2D(sdl2Canvas);\n\n        await pyodide.loadPackage("micropip");\n        const micropip = pyodide.pyimport("micropip");\n        await micropip.install("pygame-ce");\n        await micropip.install("matplotlib");\n        outputDiv.textContent = "";\n\n        const pythonCode = document.getElementById("python-script");\n        await pyodide.loadPackagesFromImports(pythonCode?.textContent);\n\n        pyodide.runPythonAsync(pythonCode?.textContent).then(function(msg) {\n          if (pythonCode?.textContent.includes("import pygame")) {\n            replContainer.style.display = "none";\n            canvasContainer.classList.add("center-canvas");\n          }\n          if (pythonCode?.textContent.includes("import matplotlib")) {\n            replContainer.style.display = "none";\n          }\n        }).catch(function(msg) {\n          outputDiv.textContent = msg;\n        });\n\n        inputArea.focus();\n        inputArea.addEventListener("keydown", handleInput);\n\n      }\n\n      async function handleInput(event) {\n        if (\n          event.key === "ArrowUp" &&\n          commandHistoryIdx + 1 < commandHistory.length\n        ) {\n          commandHistoryIdx++;\n          inputArea.value = commandHistory[commandHistoryIdx];\n          setTimeout(() => {\n            inputArea.selectionStart = inputArea.value.length;\n            inputArea.selectionEnd = inputArea.value.length;\n          }, 0);\n        } else if (event.key === "ArrowDown" && commandHistoryIdx >= 0) {\n          commandHistoryIdx--;\n          inputArea.value = commandHistory[commandHistoryIdx] || "";\n          setTimeout(() => {\n            inputArea.selectionStart = inputArea.value.length;\n            inputArea.selectionEnd = inputArea.value.length;\n          }, 0);\n        } else if (event.key === "Enter" && !event.shiftKey) {\n          event.preventDefault();\n          const code = inputArea.value.trim();\n\n          if (code) {\n            outputDiv.textContent += "\\n>>> " + code;\n            inputArea.disabled = true;\n\n            try {\n              const result = await pyodide.runPythonAsync(code);\n              if (result !== undefined) {\n                outputDiv.textContent += "\\n" + result;\n              }\n            } catch (error) {\n              if (error.message)\n                outputDiv.textContent += "\\nError: " + error.message;\n            }\n            outputDiv.scrollTop = outputDiv.scrollHeight; // Auto-scroll\n            inputArea.disabled = false;\n            inputArea.value = "";\n            inputArea.focus();\n            commandHistory = generateCommandHistory().reverse();\n            commandHistoryIdx = -1;\n          }\n        }\n      }\n      main();\n    </script>\n  </body>\n</html>')}(e):(0,v.L5)(o)?"\n<script>\nvar _grok_errors = [];\nvar _grok_errorContainer;\nvar _grok_errorMessageContainer;\nfunction htmlEscape(str) {\n    if (!str || typeof str !== 'string') return str;\n    return str\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#39;');\n}\nfunction logError(message) {\n  message = htmlEscape(message);\n  if (!_grok_errorContainer) {\n    _grok_errorContainer = document.createElement('div');\n    _grok_errorContainer.style.position = 'fixed';\n    _grok_errorContainer.style.top = '10px';\n    _grok_errorContainer.style.right = '10px';\n    _grok_errorContainer.style.width = '50%';\n    _grok_errorContainer.style.minWidth = '300px';\n    _grok_errorContainer.style.backgroundColor = 'white';\n    _grok_errorContainer.style.border = '1px solid #ccc';\n    _grok_errorContainer.style.borderRadius = '8px';\n    _grok_errorContainer.style.padding = '5px 10px';\n    _grok_errorContainer.style.zIndex = '1000';\n    _grok_errorContainer.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.1)';\n    document.body.appendChild(_grok_errorContainer);\n\n    _grok_errorMessageContainer = document.createElement('div');\n    _grok_errorContainer.appendChild(_grok_errorMessageContainer);\n\n    var dismissButton = document.createElement('button');\n\n    dismissButton.textContent = 'x';\n    dismissButton.style.position = 'absolute';\n    dismissButton.style.top = '10px';\n    dismissButton.style.right = '10px';\n    dismissButton.style.zIndex = '1001';\n    dismissButton.style.cursor = 'pointer';\n    dismissButton.style.backgroundColor = 'red';\n    dismissButton.style.color = 'white';\n    dismissButton.style.border = 'none';\n    dismissButton.style.borderRadius = '4px';\n    dismissButton.style.padding = '5px 10px';\n    _grok_errorContainer.appendChild(dismissButton);\n\n    dismissButton.addEventListener('click', function(e) {\n      _grok_errorContainer.style.display = 'none';\n    });\n  }\n  _grok_errors.push(message);\n  _grok_errorMessageContainer.innerHTML = '<pre style=\"white-space: pre-wrap; word-wrap: break-word;\"><b>JavaScript Errors</b>\\n\\n' + _grok_errors.join('<hr/>') + '</pre>';\n}\nwindow.onerror = (message) => {\n  logError(message);\n};\nwindow.onunhandledrejection = function(event) {\n  logError(event.reason);\n};\n\nvar OriginalXHR = window.XMLHttpRequest;\nwindow.XMLHttpRequest = function () {\n  const xhr = new OriginalXHR();\n  var requestUrl = \"\"\n\n  var originalOpen = xhr.open;\n  xhr.open = function (method, url, ...args) {\n    requestUrl = url;\n    originalOpen.apply(xhr, [method, url, ...args]);\n  };\n\n  xhr.addEventListener('error', (event) => {\n    logError('XMLHttpRequest error for URL: ' + (xhr.responseURL || requestUrl));\n  });\n\n  xhr.addEventListener('timeout', () => {\n    logError('XMLHttpRequest timeout');\n  });\n  xhr.addEventListener('load', () => {\n    if (xhr.status >= 400) {\n      logError('XMLHttpRequest HTTP error: ' + xhr.responseURL + ' returned ' + xhr.status + ' ' + xhr.statusText);\n    }\n  });\n  return xhr;\n};\n\nvar originalFetch = window.fetch;\nwindow.fetch = function (...args) {\n\n  return originalFetch(...args)\n    .catch((error) => {\n      logError('Global fetch network error: ' + error);\n      throw error;\n    })\n    .then((response) => {\n      if (!response.ok) {\n        logError('Fetch HTTP error: ' + response.url + ' returned ' + response.status + ' ' + response.statusText);\n      }\n      return response;\n    });\n};\n\nconsole.error = function(message, ...args) {\n  // If there are additional arguments, apply basic string formatting\n  if (args.length > 0) {\n    let formattedMessage = message;\n    args.forEach((arg, index) => {\n      formattedMessage = formattedMessage.replace(/%[sd]/, arg);\n    });\n    logError(formattedMessage);\n  } else {\n    logError(message);\n  }\n};\n\n</script>\n<script>\n  document.addEventListener('click', function(event) {\n    const anchor = event.target.closest('a');\n    if (anchor && anchor.getAttribute('href').startsWith('#')) {\n      event.preventDefault();\n      const targetId = anchor.getAttribute('href').substring(1);\n      const targetElement = document.getElementById(targetId);\n      if (targetElement) {\n        targetElement.scrollIntoView({ behavior: 'smooth' });\n      }\n    }\n  });\n</script>"+(t+e):e},[o,G,eo.script]),er=!x&&E.ENABLE_ARTIFACTS_EDITING&&!o.incomplete&&!k,ea=T.includes(null!==(n=o.contentType)&&void 0!==n?n:""),ei=M&&(!eo.loaded||o.incomplete);return D&&E.ENABLE_CSV_RENDERING?(0,s.jsx)(s.Fragment,{children:G&&(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full mx-auto px-8",children:(0,s.jsx)(m.A,{editable:er,onContentUpdate:z,csvStringContent:G})})}):(0,s.jsx)("div",{className:"bg-foreground dark:bg-background h-full w-full overflow-y-auto",ref:I,children:(0,s.jsx)("div",{className:"h-full w-full flex flex-col",children:(0,s.jsxs)("div",{className:(0,l.cn)("bg-background-secondary flex-1 flex relative flex-col"),children:["preview"===O&&(0,s.jsx)("div",{className:(0,l.cn)("flex-1 bg-background-secondary",ea?void 0:"absolute w-full h-full left-0 z-10"),children:ea?(0,s.jsx)("div",{className:"prose w-full h-full p-6 md:p-8 max-w-4xl mx-auto",children:(0,s.jsx)(eM,{onAskGrok:Z,onExplain:V,disabled:o.incomplete,children:E.ENABLE_ARTIFACTS_EDITING&&!x?(0,s.jsx)(eF,{content:null!=G?G:"",editable:er,setContent:z,onSetMenu:r}):(0,s.jsx)(F,{sender:"",xposts:eP,webSearchResults:eP,children:null!=G?G:""})})}):(0,s.jsxs)(s.Fragment,{children:[ei?(0,s.jsx)(W,{content:null!=G?G:""}):!b&&!o.incomplete&&!en&&(0,s.jsx)(eO,{srcDoc:es,autofocus:!0})," ",(0,s.jsx)(H.Y,{className:"pt-2 px-5",runCodeResult:$,isRunningCode:ee})]})}),ea?null:(0,s.jsx)(P,{syntax:eW(U),editable:er,value:null!=G?G:"",onContentUpdate:z})]})})})}function eO(e){let{srcDoc:t,autofocus:n}=e,{nonce:o}=(0,r.O)(),a=(0,p.useRef)(null),{isIframeReady:i,injectHTML:l}=(0,v.aX)({iframeRef:a});return(0,p.useEffect)(()=>{l(t)},[i,t]),(0,s.jsx)("iframe",{className:"w-full h-full",sandbox:"allow-scripts allow-same-origin",src:"https://artifacts.grokusercontent.com",ref:a,nonce:o,onLoad:()=>{if(n){var e,t;null===(t=a.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.focus()}}})}function eU(e){if(e){if(e.startsWith("text/x-c++src"))return"cpp";if(e.includes("html"))return"html";if(e.startsWith("text/")){let t=e.slice(5);if(t)return t}if(e.startsWith("text/x-")){let t=e.slice(7);if(t)return t}}}let eZ={jsx:"javascript",tsx:"typescript","x-typescript":"typescript","x-dockerfile":"dockerfile","ld+json":"json","x-csrc":"c","x-c++src":"cpp","x-java":"java","x-arduino":"cpp","x-java-source":"java","x-python":"python","x-scala":"scala","x-haskell":"haskell","x-kotlin":"kotlin","text/x-shellscript":"shell","x-rustsrc":"rust","x-go":"go","x-ruby":"ruby","x-swift":"swift","x-sh":"shell","x-sql":"sql","x-perl":"perl","x-common-lisp":"lisp","x-clojure":"clojure","x-erlang":"erlang","x-elixir":"elixir","x-lua":"lua","x-r-source":"r","x-fortran":"fortran","x-pascal":"pascal","x-php":"php","x-ada":"ada","x-cobol":"cobol","x-assembly":"assembly","x-asm":"asm","x-basic":"basic","x-csharp":"csharp","x-fsharp":"fsharp",coffeescript:"coffee","x-objective-c":"objective-c","x-objectivec":"objective-c","x-objcsrc":"objective-c"},eW=e=>{var t;return e?null!==(t=eZ[e.toLowerCase()])&&void 0!==t?t:e.toLowerCase():e}},19903:function(e,t,n){"use strict";n.d(t,{BO:function(){return i},L2:function(){return c},L5:function(){return u},MH:function(){return h},VD:function(){return g},aX:function(){return s},hz:function(){return p},qy:function(){return a}});var o=n(4694);let s=e=>{let{iframeRef:t}=e,[n,s]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=()=>s(!0);return t.current&&t.current.addEventListener("load",()=>s(!0)),()=>{var n;null===(n=t.current)||void 0===n||n.removeEventListener("load",e)}},[t.current]),{isIframeReady:n,injectHTML:(0,o.useCallback)(e=>{var n;(null===(n=t.current)||void 0===n?void 0:n.contentWindow)&&t.current.contentWindow.postMessage({type:"html",html:e},"https://artifacts.grokusercontent.com")},[])}},r=["text/x-python","text/python"];function a(e){var t;return r.includes(null!==(t=e.contentType)&&void 0!==t?t:"")}function i(e){var t;return a(e)&&(null===(t=e.content)||void 0===t?void 0:t.includes("import pygame"))}let l=["text/cpp","text/c","text/x-c++src","text/javascript","text/typescript","text/bash",...r];function c(e){var t;return!i(e)&&l.includes(null!==(t=e.contentType)&&void 0!==t?t:"")}let d=["text/html"];function u(e){return d.includes(f(e))}function p(e){var t;let n=f(e);return null!==(t=n.split("/")[1])&&void 0!==t?t:n}function f(e){var t,n;return null!==(n=null===(t=e.contentType)||void 0===t?void 0:t.split(";")[0])&&void 0!==n?n:""}let m=["text/plain","text/markdown","text/html"];function h(e){return m.includes(f(e))}function g(e){var t,n;return null!==(n=null===(t=e.contentType)||void 0===t?void 0:t.includes("report"))&&void 0!==n&&n}},85632:function(e,t,n){"use strict";n.d(t,{z:function(){return H}});var o=n(2899),s=n(6087),r=n(34116),a=n(94408),i=n(59578),l=n(81211),c=n(46913),d=n(64327),u=n(53952),p=n(74239),f=n(67206),m=n(29626),h=n(393),g=n(26353),v=n(64011),x=n(4694),j=n(70702),y=n(75361),b=n(19903),k=n(54173),w=n(37305),C=n(37446),N=n(85635),_=n(73637),I=n(11346);function E(e){let{artifact:t}=e,{mode:n,setMode:s}=(0,d.nf)(),{t:r}=(0,j.$G)("chat"),a=(0,b.MH)(t),i=(0,l.g)(),c=(0,b.VD)(t)&&i.ENABLE_REPORT_LOADING_SCREEN;return(0,x.useEffect)(()=>{s(!t.incomplete&&a||c?"preview":"code")},[t.id,t.incomplete,a,c,s]),(0,o.jsx)(N.mQ,{className:"flex-1 flex-row justify-center flex",defaultValue:"code",value:n,onValueChange:e=>s(e),children:(0,o.jsxs)(N.dr,{children:[(0,o.jsxs)(N.SP,{className:"gap-1",value:"code","aria-label":r("Code","Code"),children:[(0,o.jsx)(_.Z,{className:"size-4"}),(0,o.jsx)("span",{className:"hidden md:inline",children:r("Code","Code")})]}),(0,o.jsxs)(N.SP,{className:"gap-1",value:"preview","aria-label":r("Preview","Preview"),disabled:t.incomplete&&!c,children:[t.incomplete?(0,o.jsx)(C.$,{size:"xxs"}):(0,o.jsx)(I.Z,{className:"size-3"}),(0,o.jsx)("span",{className:"hidden md:inline",children:c?r("artifact.preview.document","Document"):r("Preview","Preview")})]})]})})}var A=n(19788);async function T(e){var t;let n=A.TU.parse(e,{async:!1,breaks:!0,gfm:!0}),o=new Blob([n],{type:"text/html"}),s=document.createElement("div");s.innerHTML=n;let r=[new ClipboardItem({"text/plain":new Blob([null!==(t=s.textContent)&&void 0!==t?t:""],{type:"text/plain"}),"text/html":o})];try{return await navigator.clipboard.write(r),!0}catch(e){return u.Tb(e),!1}}var S=n(69492),D=n(97404),R=n(17010),L=n(72242),z=n(62719),B=n(41370),F=n(42895),M=n(28116);let P=e=>{let{artifact:t,readOnly:n}=e,{setSidePanelContent:s,sidePanelContent:a}=(0,S.gK)(),{client:i}=(0,p.useStatsigClient)(),{versions:l,isLoading:c}=(0,F.g)(t),{t:d}=(0,j.$G)("chat"),u=(0,x.useMemo)(()=>{var e;return[...null!==(e=null==l?void 0:l.artifacts)&&void 0!==e?e:[]].reverse().filter(e=>"string"==typeof e.fullArtifact).map(e=>({...e,artifact:(0,M.u)(e.fullArtifact)}))},[null==l?void 0:l.artifacts]),f=(0,x.useCallback)(e=>{if(e){var n;i.logEvent("artifact_versions_open",void 0,{contentType:null!==(n=t.contentType)&&void 0!==n?n:"undefined"})}},[t.contentType,i]),m=c||!(null==l?void 0:l.artifacts)||l.artifacts.length<2;return(0,o.jsxs)(D.h_,{onOpenChange:f,children:[(0,o.jsx)(D.$F,{asChild:!0,disabled:m,children:(0,o.jsx)(r.g$,{variant:"ghost",size:"icon",className:(0,L.cn)("rounded-full",m?"opacity-50":void 0),tooltipContent:(0,o.jsx)("p",{children:d("Version History","Version History")}),"aria-label":d("Version History","Version History"),tooltipProps:{delayDuration:300},children:(0,o.jsx)(B.Z,{strokeWidth:2,size:18})})}),(0,o.jsx)(D.AW,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:u.map((e,t)=>{var r,i;let l;if(e.createTime){let t=Date.parse(e.createTime);l=(0,z.U)(t,Date.now(),{locale:R.Z.language})}let c=(null==a?void 0:a.type)==="artifact"&&e.artifact.id===(null==a?void 0:null===(r=a.data)||void 0===r?void 0:r.artifact.id)&&e.artifact.versionId===(null==a?void 0:null===(i=a.data)||void 0===i?void 0:i.artifact.versionId);return(0,o.jsxs)(D.Xi,{onClick:()=>{s({type:"artifact",data:{artifact:e.artifact,readOnly:n}});let t=document.getElementById("artifact_card_".concat(e.artifact.versionId));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},className:(0,L.cn)("flex flex-col items-start px-3 py-2",c?"bg-toggle-hover":void 0),children:[(0,o.jsx)("div",{className:"font-medium text-sm",children:d("artifact.version.number","Version {{version_number}}",{version_number:u.length-t})}),l?(0,o.jsx)("div",{className:"text-xs text-secondary",children:l}):void 0]},"version_".concat(t))})})]})};function H(e){var t,n,C;let{artifact:N,contentButtons:_,readOnly:I,standalone:A}=e,{t:S}=(0,j.$G)("chat"),{client:D}=(0,p.useStatsigClient)(),R=(0,w.G)(N),{refresh:L,mode:z}=(0,d.nf)(),B=(0,l.g)(),[F,M]=(0,x.useState)(!1),[H,Z]=(0,x.useState)(!1),W=(0,x.useRef)(),{mutate:V}=(0,f.Db)({mutationFn:()=>c.xU.chatShareArtifact({conversationId:N.conversationId,body:{responseId:N.responseId}})}),G=(0,x.useCallback)(e=>{y.Am.error("Failed to share artifact"),e&&u.Tb(e)},[]),q=(0,x.useCallback)(async()=>{var e;D.logEvent("artifact_publish_click",void 0,{contentType:null!==(e=N.contentType)&&void 0!==e?e:"undefined"});let t=async()=>new Promise((e,t)=>{V(void 0,{onSuccess:n=>{if(!n.sharedArtifactId)return G(Error("Could't find sharedArtifactId")),t();e("".concat(window.location.origin,"/artifact/").concat(n.sharedArtifactId))},onError:e=>{G(e),t()}})});try{let e=await t(),n=new ClipboardItem({"text/plain":new Blob([e],{type:"text/plain"})});navigator.clipboard.write([n]).then(()=>{y.Am.success(S("Copied public artifact link to clipboard.","Copied public artifact link to clipboard.")),Z(!0),setTimeout(()=>Z(!1),1e3)}).catch(e=>y.Am.error(e.message))}catch(e){G(e)}},[]),[,,,$]=(0,i.y)(null!=R?R:"",null!==(C=null!==(n=N.language)&&void 0!==n?n:N.contentType)&&void 0!==C?C:""),K=!B.DISABLE_PYTHON_ARTIFACTS,X=(null===(t=N.contentType)||void 0===t?void 0:t.includes("text/html"))||K&&(0,b.BO)(N)||$(),Y=(0,x.useCallback)(async()=>{var e;D.logEvent("artifact_copy_click",void 0,{contentType:null!==(e=N.contentType)&&void 0!==e?e:"undefined"}),R&&("text/markdown"===N.contentType?await T(R):await navigator.clipboard.writeText(R),M(!0),W.current&&(clearTimeout(W.current),W.current=void 0),W.current=setTimeout(()=>M(!1),2e3))},[R,N.contentType,D]),J=(0,k.g)(N,null!=R?R:""),Q=(0,x.useCallback)(()=>{var e,t;if(D.logEvent("artifact_download_click",void 0,{contentType:null!==(e=N.contentType)&&void 0!==e?e:"undefined"}),R){let e=N.contentType||"plain/text",n=v.extension(e)||U[e]||"txt",o=(null===(t=N.title)||void 0===t?void 0:t.replace(/\.[^/.]+$/,""))||N.id||"".concat(Date.now().toString()),s=new Blob([(e.includes("text/html")?J.script:"")+R],{type:e}),r=window.URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download="".concat(o,".").concat(n),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)}},[J,N.title,R,N.contentType,N.id,D]);return N.id?(0,o.jsxs)("div",{className:"flex w-full justify-between items-center mr-2",children:[null!=_?_:null,X?(0,o.jsx)("div",{className:"pr-4",children:(0,o.jsx)(E,{artifact:N})}):null,(0,o.jsxs)("div",{className:"flex gap-2 items-center",children:[X&&"preview"===z?(0,o.jsxs)(a.u,{delayDuration:300,children:[(0,o.jsx)(a.aJ,{asChild:!0,children:(0,o.jsx)(r.zx,{variant:"ghost",size:"icon",className:"rounded-full",onClick:L,"aria-label":S("Refresh","Refresh"),children:(0,o.jsx)(s.Iy,{...O})})}),(0,o.jsx)(a._v,{children:(0,o.jsx)("p",{children:S("Refresh","Refresh")})})]}):null,(0,o.jsx)(P,{artifact:N,readOnly:I}),(0,o.jsxs)(a.u,{delayDuration:300,children:[(0,o.jsx)(a.aJ,{asChild:!0,children:(0,o.jsx)(r.zx,{variant:"ghost",size:"icon",className:"rounded-full",onClick:Y,"aria-label":S("Copy Contents","Copy Contents"),children:F?(0,o.jsx)(m.Z,{...O}):(0,o.jsx)(h.Z,{...O,size:16})})}),(0,o.jsx)(a._v,{children:(0,o.jsx)("p",{children:S("Copy Contents","Copy Contents")})})]}),(0,o.jsxs)(a.u,{delayDuration:300,children:[(0,o.jsx)(a.aJ,{asChild:!0,children:(0,o.jsx)(r.zx,{variant:"ghost",size:"icon",className:"rounded-full",onClick:Q,"aria-label":S("Download to file","Download to file"),children:(0,o.jsx)(s._8,{...O,size:20})})}),(0,o.jsx)(a._v,{children:(0,o.jsx)("p",{children:S("Download to file","Download to file")})})]}),!A&&B.SHOW_ARTIFACTS_SHARE_BUTTON?(0,o.jsxs)(a.u,{delayDuration:300,children:[(0,o.jsx)(a.aJ,{asChild:!0,children:(0,o.jsx)(r.zx,{variant:"ghost",size:"icon",className:"rounded-full",onClick:q,"aria-label":S("Publish artifact","Publish artifact"),children:(0,o.jsx)(g.Z,{...O})})}),(0,o.jsx)(a._v,{children:(0,o.jsx)("p",{children:H?S("Copied public link!","Copied public link!"):S("Publish artifact","Publish artifact")})})]}):null]})]}):null}let O={size:18,strokeWidth:2},U={"text/python":"py","text/go":"go","text/rust":"rs","text/javascript":"js","text/typescript":"ts","text/jsx":"js","text/tsx":"ts","text/cpp":"cpp","text/java":"java"}},54173:function(e,t,n){"use strict";n.d(t,{g:function(){return j}});var o=n(76038),s=n(78394),r=n(49810),a=n(3189),i=n(73197),l=n(56672),c=n(4694),d=n(98437).lW;let u=[],p="officedocument.spreadsheetml",f=e=>{let[t,n]=(0,c.useState)({}),o=(0,i.CI)(e=>e.byConversationId)[e]||u,r=(0,a.a)(l.Z("fetchGetAsset"));return(0,c.useEffect)(()=>{let e=new Set;o.forEach(t=>{(t.fileAttachments||[]).forEach(t=>e.add(t))}),e.forEach(e=>{e in t||r({assetId:e}).then(t=>{n(n=>({...n,[e]:(0,s.I)(t)}))}).catch(()=>{console.error("Error fetching asset metadata",e)})})},[r,o,t,e]),t},m=e=>{let t=f(e),n=(0,i.CI)(e=>e.byConversationId)[e]||u,o=(0,c.useRef)([]);return(0,c.useMemo)(()=>{let e=n.flatMap(e=>(e.fileAttachments||[]).map(e=>t[e]).filter(Boolean));return e.length===o.current.length&&e.every((e,t)=>e===o.current[t])?o.current:(o.current=e,e)},[n,t])},h=/loadFileData\((['"])([^'"]+)\1\)/g,g=[],v=e=>{let t=(0,c.useRef)(g);return(0,c.useMemo)(()=>{if(!e)return t.current=g,g;let n=[...e.matchAll(h)].map(e=>e[2]),o=t.current;return n.length===o.length&&n.every((e,t)=>e===o[t])?o:(t.current=n,n)},[e])},x=(e,t)=>{let[n,o]=(0,c.useState)({}),[s,a]=(0,c.useState)(!1),[i,l]=(0,c.useState)(!1),u=(0,c.useMemo)(()=>e.map(e=>({url:(0,r.Vh)(t,e.fileUri),fileName:e.fileName,fileMimeType:e.fileMimeType})),[e,t]);return(0,c.useEffect)(()=>{let e=async()=>{a(!0),l(!1);try{let e=u.map(async e=>{let{url:t,fileName:n,fileMimeType:o}=e,s=await fetch(null!=t?t:"",{method:"GET",credentials:"include"});if((null==n?void 0:n.endsWith(".xlsx"))||(null==o?void 0:o.includes(p))){let e=await s.arrayBuffer(),t=d.from(e).toString("base64");return[n,t]}let r=await s.text();return[n,r]}),t=await Promise.all(e);o(Object.fromEntries(t))}catch(e){console.error(e),l(!0)}finally{a(!1)}};u.length>0&&setTimeout(e,0)},[u]),{fileData:n,loading:s,error:i}};function j(e,t){var n;let s=!e.incomplete&&(null===(n=e.contentType)||void 0===n?void 0:n.includes("text/html")),r=v(s&&null!=t?t:""),a=m(s?e.conversationId:""),i=(0,c.useMemo)(()=>a.filter(e=>{var t;return r.includes(null!==(t=null==e?void 0:e.fileName)&&void 0!==t?t:"")}),[a,r]),{ASSET_SERVER_URL:l}=(0,o.O)(),{fileData:d,loading:u}=x(i,l),[f,h]=(0,c.useMemo)(()=>{let e=!1,t=i.reduce((t,n)=>{var o,s,r;let a=(null==n?void 0:null===(o=n.fileMimeType)||void 0===o?void 0:o.includes(p))||(null==n?void 0:null===(s=n.fileName)||void 0===s?void 0:s.endsWith(".xlsx"));return t[null!==(r=null==n?void 0:n.fileName)&&void 0!==r?r:""]=a,e=e||a,t},{});return[e,JSON.stringify(t)]},[i]);return{script:(0,c.useMemo)(()=>{let e=JSON.stringify(d);return(f?'<script type="text/javascript" src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>':"")+'<script type="text/javascript">\n        var gk_isXlsx = '.concat(f,";\n        var gk_xlsxFileLookup = ").concat(h,";\n        var gk_fileData = ").concat(e,";\n        function filledCell(cell) {\n          return cell !== '' && cell != null;\n        }\n        function loadFileData(filename) {\n        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {\n            try {\n                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });\n                var firstSheetName = workbook.SheetNames[0];\n                var worksheet = workbook.Sheets[firstSheetName];\n\n                // Convert sheet to JSON to filter blank rows\n                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });\n                // Filter out blank rows (rows where all cells are empty, null, or undefined)\n                var filteredData = jsonData.filter(row => row.some(filledCell));\n\n                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row\n                var headerRowIndex = filteredData.findIndex((row, index) =>\n                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length\n                );\n                // Fallback\n                if (headerRowIndex === -1 || headerRowIndex > 25) {\n                  headerRowIndex = 0;\n                }\n\n                // Convert filtered JSON back to CSV\n                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays\n                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });\n                return csv;\n            } catch (e) {\n                console.error(e);\n                return \"\";\n            }\n        }\n        return gk_fileData[filename] || \"\";\n        }\n        </script>")},[d,f,h]),loading:u,loaded:Object.keys(d).length>0}}},37305:function(e,t,n){"use strict";n.d(t,{G:function(){return l}});var o=n(64327),s=n(4694),r=n(28116),a=n(5893),i=n(42895);let l=e=>{let{versions:t}=(0,i.g)(e),{content:n}=(0,a.K)(),{edits:l}=(0,o.N)(),c=(0,s.useMemo)(()=>{var n,o,s;if(!e||!e.id||!e.versionId)return;let a=null===(n=l[e.id])||void 0===n?void 0:n[e.versionId];if(a)return a.content;if(!t)return e.content;let i=(null!==(o=null==t?void 0:t.artifacts)&&void 0!==o?o:[]).sort((e,t)=>{var n,o;return Date.parse(null!==(n=e.createTime)&&void 0!==n?n:"")-Date.parse(null!==(o=t.createTime)&&void 0!==o?o:"")}).findLast(t=>t.artifactId===e.id&&t.artifactVersionId===e.versionId);if(!i)return e.content;let{content:c}=(0,r.u)(null!==(s=i.fullArtifact)&&void 0!==s?s:"");return"string"!=typeof c?e.content:c},[t,e.id,e.versionId,e.content,l]);return(null==e?void 0:e.incomplete)?c:null!=n?n:c}},5893:function(e,t,n){"use strict";n.d(t,{K:function(){return i},O:function(){return l}});var o=n(53429),s=n(64327),r=n(74239),a=n(4694);let i=()=>{let e=(0,a.useRef)(void 0),{saveEdit:t}=(0,s.N)(),n=(0,r.useStatsigClient)(),i=(0,a.useRef)(),c=(0,a.useCallback)((e,s)=>{(null==e?void 0:e.id)&&(null==e?void 0:e.versionId)&&(t(e.id,e.versionId,null!=s?s:""),clearTimeout(i.current),i.current=setTimeout(()=>{if(e.id&&e.title&&e.versionId&&!e.incomplete&&void 0!==s){var t,r;let a=l({id:e.id,versionId:e.versionId,text:s,contentType:null!==(t=e.contentType)&&void 0!==t?t:"text/plain",title:e.title});(0,o.i4)(e.id,e.versionId,a),n.logEvent("artifact_updated",void 0,{contentType:null!==(r=e.contentType)&&void 0!==r?r:"undefined"})}},1e3))},[t,n]);return{content:e.current,onTextUpdate:c}},l=e=>{let{text:t,id:n,versionId:o,contentType:s,title:r}=e,a=t.replaceAll("xaiArtifact","xai\xadArtifact");return'<xaiArtifact artifact_id="'.concat(n,'" artifact_version_id="').concat(o,'" title="').concat(r,'" contentType="').concat(s,'">').concat(a,"</xaiArtifact>")}},42895:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var o=n(53429),s=n(67206),r=n(4694);let a=e=>{var t;let n=(0,r.useRef)(null==e?void 0:e.incomplete);(0,r.useEffect)(()=>{n.current=null==e?void 0:e.incomplete},[null==e?void 0:e.id,null==e?void 0:e.versionId]);let{data:a,refetch:i,isError:l,isLoading:c}=(0,s.aM)({queryKey:["artifact_versions",null==e?void 0:e.id],enabled:!(null===(t=null==e?void 0:e.incomplete)||void 0===t||t),queryFn:async()=>{if((null==e?void 0:e.id)&&e.conversationId)return(0,o.$7)(e.id,e.conversationId)}});return(0,r.useEffect)(()=>{!0===n.current&&(null==e?void 0:e.incomplete)===!1&&setTimeout(()=>{i()},1e3)},[null==e?void 0:e.incomplete]),{versions:a,refetch:i,isLoading:c,isError:l}}},85792:function(e,t,n){"use strict";n.d(t,{j:function(){return S}});var o=n(2899),s=n(69492),r=n(49810),a=n(56672),i=n(4694),l=n(81211),c=n(6087),d=n(34116),u=n(94408),p=n(72242),f=n(48792),m=n(65395),h=n(32875),g=n(12707),v=n(67206),x=n(68402),j=n(43010),y=n(76072),b=n(52457),k=n(65671),w=n(21333),C=n(70702),N=n(76038),_=n(37446);let I=e=>{let{metadata:t,localFile:n,className:s}=e,{ASSET_SERVER_URL:a}=(0,N.O)(),{parsedFileUri:i,fileUri:l}=t,c=i.length>0?i:l,{data:d,isError:u,isLoading:f}=(0,v.aM)({queryKey:["asset",c],queryFn:()=>(0,r.Vh)(a,c)}),m=n&&URL.createObjectURL(n);return u||!m&&(f||!d)?(0,o.jsx)("figure",{className:(0,p.cn)("grid w-10 aspect-square place-items-center bg-fg-primary/10",s),children:(0,o.jsx)(E,{mimeType:t.thirdPartyFileMimeType||t.fileMimeType,className:"size-4 shrink-0"})}):(0,o.jsxs)("figure",{className:(0,p.cn)("relative flex-shrink-0 aspect-square rounded-s-xl overflow-hidden",s),children:[(0,o.jsx)("img",{alt:"",className:(0,p.cn)("h-full mx-auto object-cover"),src:d||m}),n&&!d&&(0,o.jsx)("div",{className:"inset-0 absolute grid place-items-center",children:(0,o.jsx)(_.$,{className:"size-4",role:"status",size:"xs"})})]})},E=e=>{let{mimeType:t,className:n}=e,{t:s}=(0,C.$G)("base"),a=t.toLowerCase();return a.includes("/csv")?(0,o.jsx)(x.Z,{className:n,role:"img","aria-label":s("asset-chip-table.label","Table File")}):a.includes("application/pdf")||a.includes("text/")||a.includes("markdown")?(0,o.jsx)(j.Z,{className:n,role:"img","aria-label":s("asset-chip-text.label","Text File")}):a.includes("image/")?(0,o.jsx)(y.Z,{className:n,role:"img","aria-label":s("asset-chip-image.label","Image File")}):a.includes(r.Hu)?(0,o.jsx)(f.Z,{className:(0,p.cn)("text-[#4285F4]",n),role:"img","aria-label":s("asset-chip-google-docs.label","Google Docs")}):a.includes(r.Vb)?(0,o.jsx)(m.Z,{className:(0,p.cn)("text-[#34A853]",n),role:"img","aria-label":s("asset-chip-google-sheets.label","Google Sheets")}):a.includes(r.JY)?(0,o.jsx)(h.Z,{className:(0,p.cn)("text-[#FBBC04]",n),role:"img","aria-label":s("asset-chip-google-slides.label","Google Slides")}):a.includes(r.t0)||a.includes(r.AB)?(0,o.jsx)(g.RjO,{className:(0,p.cn)("text-[#4285F4]",n),role:"img","aria-label":s("asset-chip-microsoft-word.label","Microsoft Word")}):a.includes(r.vU)||a.includes(r.hW)?(0,o.jsx)(g.Fqh,{className:(0,p.cn)("text-[#34A853]",n),role:"img","aria-label":s("asset-chip-microsoft-excel.label","Microsoft Excel")}):a.includes(r.vG)||a.includes(r.LA)?(0,o.jsx)(g.oaQ,{className:(0,p.cn)("text-[#FBBC04]",n),role:"img","aria-label":s("asset-chip-microsoft-powerpoint.label","Microsoft PowerPoint")}):(0,o.jsx)(b.Z,{className:n,role:"img","aria-label":s("asset-chip-generic.label","Generic File")})},A=e=>{let{metadata:t,isShared:n,isDeleted:s,localFile:r,className:a}=e,{t:i}=(0,C.$G)("base"),l=(0,p.cn)("shrink-0",a);return void 0===t?(0,o.jsx)("figure",{className:(0,p.cn)("grid w-10 aspect-square place-items-center bg-fg-primary/10 rounded-s-xl",l),children:(0,o.jsx)(_.$,{className:"size-4",role:"status",size:"xs"})}):t instanceof Error?(0,o.jsx)("figure",{className:(0,p.cn)("grid w-10 aspect-square place-items-center bg-fg-primary/10 rounded-s-xl",l),children:(0,o.jsx)(k.Z,{className:"size-4",role:"alert","aria-label":i("asset-chip-alert.label","Error")})}):!t.fileMimeType.startsWith("image/")||n||s?(0,o.jsx)("figure",{className:(0,p.cn)("grid w-10 aspect-square place-items-center bg-fg-primary/10 rounded-s-xl",l),children:(0,o.jsx)(E,{mimeType:s?"":t.thirdPartyFileMimeType||t.fileMimeType,className:"size-4"})}):(0,o.jsx)(I,{localFile:r,metadata:t,className:a})};function T(e){let{fileName:t,metadata:n,localFile:s,isShared:r,isDisabled:a,isFileSelected:i,showRemoveIcon:l,handleClick:f,handleRemove:m,isDeleted:h,showTrashRemoveIcon:g,labelClassName:v,variant:x="chip",allowCompact:j=!1}=e,{t:y}=(0,C.$G)("base"),b=y("asset-chip.deleted","Deleted file"),k=!(n instanceof Error)&&((null==n?void 0:n.fileMimeType.startsWith("image/"))||(null==s?void 0:s.type.startsWith("image/")))&&j,N=(0,o.jsxs)("div",{className:(0,p.cn)("flex flex-row items-center text-sm transition ease-in-out gap-2 relative group/chip",r||a?"cursor-default text-secondary":"cursor-pointer text-primary",{"bg-chip border border-border-l1 hover:bg-button-secondary-hover px-3 rounded-xl h-10":"chip"===x,"justify-between pr-1.5":l,"bg-button-secondary-hover":i,"animate-pulse":void 0===n,"text-fg-secondary":n instanceof Error,"px-0 [&>figure]:w-full [&>figure]:h-full p-0.5":k}),onClick:f,children:[(0,o.jsx)(A,{localFile:s,metadata:n,isShared:r,isDeleted:h,className:(0,p.cn)({"rounded-lg w-8 h-8":"list-item"===x,"-ms-3 w-10":"chip"===x,"ms-0 me-0 rounded-[9px] [&>img]:h-full [&>img]:w-full":k})}),!k&&(0,o.jsx)("span",{className:(0,p.cn)("truncate max-w-full me-auto sm:max-w-[250px]",v),children:h?b:t}),l&&(0,o.jsx)(d.zx,{className:k?"absolute transition-all scale-50 opacity-0 -top-1.5 -right-1.5 group-hover/chip:opacity-100 group-hover/chip:scale-100 border border-border-l1 bg-surface-base hover:bg-surface-l2":"rounded-full ml-1 p-0.5 flex-shrink-0",variant:"ghostSecondary",size:"iconSm","aria-label":y("asset-chip-remove.label","Remove"),onClick:m,children:g?(0,o.jsx)(w.Z,{className:"text-red-400",size:16}):(0,o.jsx)(c.b0,{className:"size-4"})})]});return"list-item"===x?N:(0,o.jsxs)(u.u,{delayDuration:300,disableHoverableContent:!0,children:[(0,o.jsx)(u.aJ,{asChild:!0,children:N}),(0,o.jsx)(u._v,{side:"bottom",children:n instanceof Error?n.message:t})]})}function S(e){let{fileName:t,metadata:n,localFile:c,onClick:d,onRemove:u,isShared:p,isDisabled:f,removeRequiresConfirmation:m,isDeleted:h,asset:g,labelClassName:v,hideEdit:x,allowCompact:j,variant:y}=e,b=(0,l.g)(),[k,w]=(0,i.useState)(!m),C=(0,s.gK)(a.Z("sidePanelContent")),N=(0,s.gK)(a.Z("setSidePanelContent")),_=void 0===n,I=n instanceof Error,E=(0,i.useMemo)(()=>{if(!_&&!I)return function(e){var t;let n=null===(t=e.thirdPartyFileMimeType)||void 0===t?void 0:t.toLowerCase();if(n){if(n.includes(r.Hu))return"https://docs.google.com/document/d/".concat(e.thirdPartyFileId);if(n.includes(r.Vb))return"https://docs.google.com/spreadsheets/d/".concat(e.thirdPartyFileId);if(n.includes(r.JY))return"https://docs.google.com/presentation/d/".concat(e.thirdPartyFileId);if([r.t0,r.AB,r.vU,r.hW,r.vG,r.LA].some(e=>n.includes(e)))return"https://onedrive.live.com/view.aspx?resid=".concat(e.thirdPartyFileId)}}(n)},[I,_,n]),A=(0,i.useCallback)(()=>{E&&window.open(E,"_blank","noopener,noreferrer")},[E]),S=(0,i.useCallback)(e=>{e.stopPropagation(),k?null==u||u(null==g?void 0:g.assetId):w(!0)},[u,k,g]),D=!!u&&!f&&(!m||b.SHOW_DELETE_ASSET),R=(0,i.useMemo)(()=>!_&&!I&&(null==C?void 0:C.type)==="asset"&&C.data.fileMetadataId===n.fileMetadataId,[_,I,C,n]),L=(0,i.useCallback)(()=>{if(!h&&!f&&!p&&!_&&!I){if(d){d(g);return}if(E){A();return}if(R){N(void 0);return}N({type:"asset",data:n,hideEdit:x})}},[R,f,n,d,p,_,I,g,N]);return(0,o.jsx)(T,{fileName:t,localFile:c,metadata:n,isShared:p,isDisabled:f||h,isFileSelected:R,showRemoveIcon:D,handleClick:L,handleRemove:S,isDeleted:h,showTrashRemoveIcon:m&&k,labelClassName:v,variant:y,allowCompact:j})}},78394:function(e,t,n){"use strict";n.d(t,{I:function(){return a},k:function(){return i}});var o=n(2899),s=n(4694),r=n(85792);let a=e=>({fileMetadataId:e.assetId,fileName:e.name,fileMimeType:e.mimeType,fileUri:e.key,parsedFileUri:e.previewImageKey,createTime:e.createTime,fileSource:e.fileSource,thirdPartyFileId:e.thirdPartyFileId,thirdPartyFileMimeType:e.thirdPartyFileMimeType});function i(e){let{asset:t,onRemoveAsset:n,isShared:i,isDisabled:l,labelClassName:c,hideEdit:d,allowCompact:u=!1}=e,p=(0,s.useMemo)(()=>a(t),[t]),f=(0,s.useCallback)(()=>{null==n||n(t)},[n,t]);return(0,o.jsx)(r.j,{fileName:t.name,metadata:p,onRemove:n?f:void 0,isShared:i,isDisabled:l,isDeleted:t.isDeleted,asset:t,labelClassName:c,hideEdit:d,allowCompact:u})}},97404:function(e,t,n){"use strict";n.d(t,{$F:function(){return d},AW:function(){return h},Ph:function(){return p},TG:function(){return m},Xi:function(){return g},bO:function(){return v},cq:function(){return u},h_:function(){return c},kt:function(){return f}});var o=n(2899),s=n(72242),r=n(84643),a=n(98450),i=n(83788),l=n(4694);let c=r.fC,d=r.xz;r.ZA;let u=r.Uv,p=r.Tr;r.Ee;let f=l.forwardRef((e,t)=>{let{className:n,inset:i,children:l,...c}=e;return(0,o.jsxs)(r.fF,{ref:t,className:(0,s.cn)("flex cursor-pointer select-none items-center rounded-xl px-3 py-1.5 text-sm outline-none focus:bg-button-ghost-hover data-[state=open]:bg-button-ghost-hover [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",i&&"pl-8",n),...c,children:[l,(0,o.jsx)(a.XCv,{className:"ml-auto text-fg-secondary"})]})});f.displayName=r.fF.displayName;let m=l.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(r.tu,{ref:t,className:(0,s.cn)("z-50 overflow-hidden rounded-2xl border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})});m.displayName=r.tu.displayName;let h=l.forwardRef((e,t)=>{let{className:n,sideOffset:a=4,...i}=e;return(0,o.jsx)(r.Uv,{children:(0,o.jsx)(r.VY,{ref:t,sideOffset:a,collisionPadding:{top:16,left:16,right:16,bottom:16},className:(0,s.cn)("z-50 overflow-hidden rounded-2xl bg-surface-l4 border border-border-l1 text-primary backdrop-blur-md p-1 shadow-sm shadow-black/5","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 max-h-[--radix-dropdown-menu-content-available-height] overflow-auto",n),...i})})});h.displayName=r.VY.displayName;let g=l.forwardRef((e,t)=>{let{className:n,inset:a,...i}=e;return(0,o.jsx)(r.ck,{ref:t,className:(0,s.cn)("relative flex select-none items-center cursor-pointer px-3 py-2 rounded-xl text-sm outline-none focus:bg-button-ghost-hover",a&&"pl-8",n),...i})});g.displayName=r.ck.displayName;let v=l.forwardRef((e,t)=>{let{className:n,children:i,checked:l,...c}=e;return(0,o.jsxs)(r.oC,{ref:t,className:(0,s.cn)("relative flex cursor-pointer select-none items-center rounded-xl py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-button-ghost-hover focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:l,...c,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(r.wU,{children:(0,o.jsx)(a.nQG,{className:"w-4 h-4"})})}),i]})});v.displayName=r.oC.displayName,l.forwardRef((e,t)=>{let{className:n,children:a,...l}=e;return(0,o.jsxs)(r.Rk,{ref:t,className:(0,s.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-popover-hover focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...l,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(r.wU,{children:(0,o.jsx)(i.Z,{className:"w-2 h-2 fill-current"})})}),a]})}).displayName=r.Rk.displayName,l.forwardRef((e,t)=>{let{className:n,inset:a,...i}=e;return(0,o.jsx)(r.__,{ref:t,className:(0,s.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",n),...i})}).displayName=r.__.displayName,l.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(r.Z0,{ref:t,className:(0,s.cn)("-mx-1 my-1 h-px bg-muted",n),...a})}).displayName=r.Z0.displayName},85635:function(e,t,n){"use strict";n.d(t,{SP:function(){return d},dr:function(){return c},mQ:function(){return l},nU:function(){return u}});var o=n(2899),s=n(97108),r=n(4694),a=n(72242);let i=(0,n(48038).j)("inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"px-3 py-1 rounded-md data-[state=active]:bg-foreground data-[state=active]:text-primary data-[state=active]:shadow",underline:"text-md me-3 pb-1 border-b text-secondary border-transparent data-[state=active]:text-primary data-[state=active]:border-primary"}},defaultVariants:{variant:"default"}}),l=s.fC,c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,o.jsx)(s.aV,{ref:t,className:(0,a.cn)("inline-flex items-center justify-center rounded-lg bg-ivory dark:bg-jet/20 p-1 text-secondary",n),...r})});c.displayName=s.aV.displayName;let d=r.forwardRef((e,t)=>{let{className:n,variant:r,...l}=e;return(0,o.jsx)(s.xz,{ref:t,className:(0,a.cn)(i({variant:r}),n),...l})});d.displayName=s.xz.displayName;let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,o.jsx)(s.VY,{ref:t,className:(0,a.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...r})});u.displayName=s.VY.displayName},83711:function(e,t,n){"use strict";n.d(t,{C6:function(){return a},FG:function(){return i},VM:function(){return s},Zz:function(){return c},aj:function(){return l},gu:function(){return d},op:function(){return r}}),n(2899);var o=n(70702);let s="cmd+j, ctrl+j",r="cmd+shift+j, ctrl+shift+j",a="cmd+k, ctrl+shift+k",i="cmd+enter, ctrl+enter",l="cmd+,, ctrl+,",c="cmd+shift+p, ctrl+shift+p",d="cmd+s, ctrl+s";o.cC,o.cC,o.cC,o.cC,o.cC},38040:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var o=n(99306),s=n(4694);function r(e,t,n){(0,s.useEffect)(()=>((0,o.Z)(e,t),()=>o.Z.unbind(e,t)),[...n,e])}o.Z.filter=()=>!0},53429:function(e,t,n){"use strict";n.d(t,{$7:function(){return r},S3:function(){return i},i4:function(){return a}});var o=n(46913),s=n(53952);async function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.xU;return await n.chatGetArtifactById({artifactId:e,body:{conversationId:t}})}async function a(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.xU;try{if((await r.chatUpdateArtifact({artifactId:e,body:{artifactVersionId:t,fullArtifact:n}})).artifactVersionId)return!0}catch(e){return s.Tb(e),!1}}async function i(e){let{artifactId:t,artifactVersionId:n,isInline:r}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.xU;try{if((await a.chatUpdateArtifactInlineStatus({artifactId:t,body:{artifactVersionId:n,inlineStatus:r?"SHOW_INLINE_ARTIFACT_INLINE_STATUS":"SHOW_SIDEBAR_ARTIFACT_INLINE_STATUS"}})).artifactVersionId)return!0}catch(e){return s.Tb(e),!1}}},49810:function(e,t,n){"use strict";n.d(t,{AB:function(){return i},Hu:function(){return o},JY:function(){return r},LA:function(){return u},Vb:function(){return s},Vh:function(){return p},hW:function(){return c},t0:function(){return a},vG:function(){return d},vU:function(){return l}});let o="application/vnd.google-apps.document",s="application/vnd.google-apps.spreadsheet",r="application/vnd.google-apps.presentation",a="application/msword",i="application/vnd.openxmlformats-officedocument.wordprocessingml.document",l="application/vnd.ms-excel",c="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",d="application/vnd.ms-powerpoint",u="application/vnd.openxmlformats-officedocument.presentationml.presentation";function p(e,t){if(!t)return;let n=new URL(e);return n.pathname=t,n.toString()}},17010:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(87325),s=n(64944),r=n(70702),a=n(88101),i=n(6848);o.ZP.use(i.Z).use(r.Db).use((0,s.Z)((e,t)=>n(75006)("./".concat(e,"/").concat(t,".json")))).init({fallbackLng:"en",supportedLngs:a.bB.map(e=>e[0]),debug:!1,detection:{lookupLocalStorage:"i18nextLng",lookupCookie:"i18nextLng",order:["localStorage","cookie","navigator"],caches:["localStorage","cookie"],cookieMinutes:525600},partialBundledLanguages:!0,nonExplicitSupportedLngs:!1,react:{bindI18n:"loaded languageChanged",bindI18nStore:"added",useSuspense:!0}});var l=o.ZP},88101:function(e,t,n){"use strict";n.d(t,{bB:function(){return i},k1:function(){return r},l2:function(){return a},nD:function(){return o},sm:function(){return s},w1:function(){return c}});let o=["ar","de","en","es","fr","id","it","ja","ko","nl","pl","pt","ru","sv","tr","uk-UA","vi","zh","zh-TW"],s="en",r={ar:{nativeName:"العربية",name:"Arabic"},en:{nativeName:"English",name:"English"},es:{nativeName:"Espa\xf1ol",name:"Spanish"},de:{nativeName:"Deutsch",name:"German"},fr:{nativeName:"Fran\xe7ais",name:"French"},id:{nativeName:"Bahasa Indonesia",name:"Indonesian"},it:{nativeName:"Italiano",name:"Italian"},ja:{nativeName:"日本語",name:"Japanese"},pl:{nativeName:"Polski",name:"Polish"},ko:{nativeName:"한국어",name:"Korean"},nl:{nativeName:"Nederlands",name:"Dutch"},pt:{nativeName:"Portugu\xeas",name:"Portuguese"},ru:{nativeName:"Русский",name:"Russian"},sv:{nativeName:"Svenska",name:"Swedish"},tr:{nativeName:"T\xfcrk\xe7e",name:"Turkish"},"uk-UA":{nativeName:"Українська мова",name:"Ukrainian"},vi:{nativeName:"Tiếng Việt",name:"Vietnamese"},zh:{nativeName:"简体中文",name:"Simplified Chinese"},"zh-TW":{nativeName:"繁體中文",name:"Traditional Chinese"}},a=Object.entries(r).reduce((e,t)=>{let[n,o]=t;return e[n]=o.nativeName,e},{}),i=Object.entries(a),l=new Set(["ar","he","fa","ur","ps","sd","ug","ha","ks","ku"]);function c(e){if(!e)return"ltr";let t=e.split("-")[0].toLowerCase();return l.has(t)?"rtl":"ltr"}},73848:function(e,t,n){"use strict";n.d(t,{b:function(){return a},p:function(){return i}});var o=n(95315);let s=/^(https?:\/\/)?[^\s/]+\.[^\s/]+(\/[^\s/]+)*\/?$/i,r=/\.(jpg|jpeg|png|gif|bmp|webp|tiff?|svg)$/i;function a(e){try{let t=new URL(e).hostname;return null==t?void 0:t.replace(/^www\./,"")}catch(t){return e}}function i(e){if(!s.test(e))return!1;let{domain:t,isIcann:n}=(0,o.Qc)(e,{detectIp:!1,mixedInputs:!1});return!(!t||!n||r.test(e))}},64327:function(e,t,n){"use strict";n.d(t,{N:function(){return c},dV:function(){return l},nf:function(){return i}});var o=n(30722),s=n.n(o),r=n(11194),a=n(85035);let i=(0,r.U)(e=>({mode:"code",setMode:t=>e({mode:t}),artifactsByConversationId:{},isRefreshing:!1,refresh:()=>{e({isRefreshing:!0}),setTimeout(()=>e({isRefreshing:!1}),100)},upsertArtifact:(t,n)=>{t.id&&t.timestamp&&e(e=>{var o,r,a;return{artifactsByConversationId:{...e.artifactsByConversationId,[n]:{...null!==(r=e.artifactsByConversationId[n])&&void 0!==r?r:{},[t.id]:s().orderBy(s().uniqBy([t,...null!==(a=null===(o=e.artifactsByConversationId[n])||void 0===o?void 0:o[t.id])&&void 0!==a?a:[]],"identifier"),"timestamp","asc")}}}})}})),l=(0,r.U)()((0,a.tJ)(e=>({inlineSettings:{},setInlineSetting:(t,n)=>{e(e=>({inlineSettings:{...e.inlineSettings,[t]:{updateTime:Date.now(),isInline:n}}}))}}),{name:"inline-artifacts"})),c=(0,r.U)()((0,a.tJ)(e=>({edits:{},saveEdit:(t,n,o)=>{e(e=>{var s,r,a,i;let l=null!==(a=null===(r=e.edits[t])||void 0===r?void 0:null===(s=r[n])||void 0===s?void 0:s.lastSyncTime)&&void 0!==a?a:0,c={editTime:Date.now(),lastSyncTime:l,content:o};return{edits:{...e.edits,[t]:{...null!==(i=e.edits[t])&&void 0!==i?i:{},[n]:c}}}})},updateLastSyncTime:(t,n)=>{e(e=>{var o,s;let r=null===(o=e.edits[t])||void 0===o?void 0:o[n];if(!r)return{};let a={...r,lastSynctime:Date.now()};return{edits:{...e.edits,[t]:{...null!==(s=e.edits[t])&&void 0!==s?s:{},[n]:a}}}})}}),{name:"artifacts-edits"}))},3189:function(e,t,n){"use strict";n.d(t,{a:function(){return f}});var o=n(29598),s=n(46913),r=n(30722),a=n.n(r),i=n(41307);let l={},c={},d={},u={};class p{constructor(e,t){this.set=e,this.get=t,this.byId=l,this.promiseById=c,this.listByReq=d,this.promiseListByReq=u,this.upsertAsset=(0,o.H)(this.set,"byId","assetId"),this.appendAssets=(0,o.R3)(this.set,"byId","assetId"),this.removeAsset=(0,o.Od)(this.set,"byId"),this.idsertPromise=(0,o.Qd)(this.set,"promiseById"),this.removePromise=(0,o.Od)(this.set,"promiseById"),this.idsertList=(0,o.Qd)(this.set,"listByReq"),this.idsertPromiseList=(0,o.Qd)(this.set,"promiseListByReq"),this.fetchCreateAsset=e=>{let t=this.get(),n=s.af.assetRepositoryCreateAsset({body:e}).then(e=>e);return n.then(e=>{t.idsertPromise(n,e.assetId),t.upsertAsset(e)}),n},this.fetchDeleteAsset=e=>{let t=this.get(),n=s.af.assetRepositoryDeleteAsset(e);return t.removePromise(e.assetId),t.removeAsset(e.assetId),n},this.fetchDeleteAssetMetadata=e=>{let t=this.get(),n=s.af.assetRepositorySoftDeleteAssetMetadata(e);return n.then(()=>{t.removePromise(e.assetId),t.removeAsset(e.assetId),t.set(t=>({...t,listByReq:a().mapValues(t.listByReq,t=>({...t,assets:t.assets.filter(t=>t.assetId!==e.assetId)}))})),i.O.getState().set(t=>({...t,attachListByConversationId:a().mapValues(t.attachListByConversationId,t=>t.filter(t=>t.assetId!==e.assetId))}))}).catch(e=>{console.error(e)}),n},this.fetchGetAsset=e=>{let t=this.get();if(e.assetId in t.byId)return Promise.resolve(t.byId[e.assetId]);if(e.assetId in t.promiseById)return t.promiseById[e.assetId];let n=s.af.assetRepositoryGetAssetMetadata(e).then(e=>e);return t.idsertPromise(n,e.assetId),n.then(t.upsertAsset),n},this.fetchListAssets=e=>{let t=this.get(),n=a()(e).omit(e,["pageToken","pageSize"]).entries().sortBy().value().toString(),o=t.listByReq[n];if(o&&o.nextPageToken!==e.pageToken)return Promise.resolve(o);let r=a()(e).omit(e,["pageSize"]).entries().sortBy().value().toString(),i=t.promiseListByReq[r];if(i)return i;let l=s.af.assetRepositoryListAssetMetadata(e).then(e=>e).then(e=>{if(!e.assets)throw Error("No assets returned");t.appendAssets(e.assets);let n={};return e.assets.map(e=>{n[e.assetId]=Promise.resolve(e)}),t.set(e=>({promiseById:{...e.promiseById,...n}})),{assets:((null==o?void 0:o.assets)||[]).concat(e.assets),nextPageToken:e.nextPageToken}});return t.idsertPromiseList(l,r),l.then(e=>t.idsertList(e,n)),l}}}let f=(0,o.MT)(p)}}]);