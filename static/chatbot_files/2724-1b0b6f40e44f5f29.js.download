!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8d932d6d-7484-4a50-bb31-5aaa654f63b6",e._sentryDebugIdIdentifier="sentry-dbid-8d932d6d-7484-4a50-bb31-5aaa654f63b6")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2724],{82724:function(e,t,s){s.d(t,{ChatTopNav:function(){return ti}});var n=s(2899),a=s(43335),r=s(26777),l=s(72242),i=s(17431),o=s(4694);let c=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(i.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full border border-border hover:opacity-75 duration-150",s),...a})});c.displayName=i.fC.displayName;let d=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(i.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",s),...a})});d.displayName=i.Ee.displayName;let u=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(i.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full",s),...a})});u.displayName=i.NY.displayName;let h=e=>{let{className:t,user:s}=e,a=(0,o.useMemo)(()=>[null==s?void 0:s.givenName,null==s?void 0:s.familyName].map(e=>null==e?void 0:e[0]).join("").substring(0,2),[s]);return(0,n.jsxs)(c,{className:t,children:[(0,n.jsx)(d,{src:null==s?void 0:s.profileImageUrl,alt:"pfp"}),(0,n.jsx)(u,{className:"bg-surface-l4 text-fg-primary shadow-sm dark:shadow-none border-border-l1",children:a})]})};var x=s(34116),p=s(88101),m=s(97404),g=s(25459),f=s(76038),v=s(6087),j=s(71331),b=e=>(0,n.jsxs)(j.J,{...e,children:[(0,n.jsx)("path",{d:"M3 5L19 5",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M3 12H7",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"}),(0,n.jsx)("circle",{cx:"16",cy:"15",r:"4",stroke:"currentColor"}),(0,n.jsx)("path",{d:"M19 18L21 20",stroke:"currentColor",strokeLinecap:"square"}),(0,n.jsx)("path",{d:"M3 19H7",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"})]}),y=s(8781),w=s(70702),N=s(6936),k=s(42210),C=s(40955),S=s(98450),I=s(35);let D=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY,{ref:t,className:(0,l.cn)("flex w-full flex-col overflow-hidden rounded-xl text-popover-foreground",s),...a})});D.displayName=I.mY.displayName;let E=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsxs)("div",{className:"flex items-center border-b-2 border-input-border px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(S._Ve,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(I.mY.Input,{ref:t,className:(0,l.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...a})]})});E.displayName=I.mY.Input.displayName;let _=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY.List,{ref:t,className:(0,l.cn)("overflow-y-auto overflow-x-hidden p-1",s),...a})});_.displayName=I.mY.List.displayName,o.forwardRef((e,t)=>(0,n.jsx)(I.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e})).displayName=I.mY.Empty.displayName,o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY.Group,{ref:t,className:(0,l.cn)("overflow-hidden px-2.5 py-2 text-sm text-muted-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...a})}).displayName=I.mY.Group.displayName,o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY.Separator,{ref:t,className:(0,l.cn)("-mx-1 h-px bg-border",s),...a})}).displayName=I.mY.Separator.displayName;let P=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY.Item,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center gap-2 px-3.5 py-3 text-sm outline-none","after:absolute after:inset-1 after:rounded-lg after:transition ease-in-out","focus:after:bg-card-hover","[&[data-selected='true']]:after:bg-card-hover",s),...a})});P.displayName=I.mY.Item.displayName;var z=s(44199);function A(e){let{locale:t,onChange:s}=e,{t:a}=(0,w.$G)();return(0,n.jsxs)(D,{children:[(0,n.jsx)(E,{placeholder:a("Search language","Search language")}),(0,n.jsx)(_,{children:p.nD.map(e=>(0,n.jsx)(L,{locale:e,selected:t===e,onSelect:s},e))})]})}function L(e){let{locale:t,selected:s,onSelect:a}=e,{name:r,nativeName:l}=p.k1[t];return(0,n.jsxs)(P,{value:t,keywords:[l,r],onSelect:()=>a(t),className:"justify-between cursor-pointer",children:[l,s?(0,n.jsx)(z.Z,{className:"size-4","data-testid":"check-icon"}):(0,n.jsx)("span",{className:"text-muted-foreground",children:r})]})}function O(e){let{open:t,onOpenChange:s,locale:a,onLocaleChange:r}=e,{t:i}=(0,w.$G)(),o=(0,y.w)(),c=(0,l.cn)("bg-background rounded-2xl outline-none h-[calc(100dvh-64px-128px)] w-full md:w-[400px] max-w-3xl flex flex-col md:h-[min(500px,90dvh)]",{"rounded-b-none":o});return(0,n.jsxs)(k.c,{open:t,setOpen:s,contentClassName:c,"aria-labelledby":"language-selector-title",children:[(0,n.jsx)(N.$N,{className:"sr-only",children:i("Language Selector","Language Selector")}),(0,n.jsx)(A,{locale:a,onChange:r})]})}var F=s(36270),M=s(83376),G=s(77215),T=s(76256);let R=e=>{let{className:t,children:s}=e;return(0,n.jsx)("div",{className:(0,l.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-fg-secondary inline-flex flex-row items-center gap-1","mt-0.5","w-fit",t),children:s})};function Z(e){let{subscriptionType:t}=e,{t:s}=(0,w.$G)("base");return"PremiumPlus"===t?(0,n.jsx)(R,{className:"text-[#bb992e] dark:text-[#C4A06B]",children:s("Premium+","Premium+")}):"Premium"===t?(0,n.jsx)(R,{className:"text-[#426db1] dark:text-[#7F93B0]",children:s("Premium","Premium")}):"Free"===t||""===t?(0,n.jsx)(R,{children:s("Basic","Basic")}):null}let B="/link-x-account-error";var U=s(81211),H=s(55911),$=s(74542),V=s(43701),W=s(67206),Y=s(2974),X=s(14075),K=s(56672);function q(e){let{children:t,className:s}=e,a=(0,l.cn)("text-sm font-medium",s);return(0,n.jsx)("div",{className:a,children:t})}function J(e){let{children:t}=e;return(0,n.jsx)("div",{className:"text-xs text-secondary text-pretty",children:t})}function Q(e){let{children:t,action:s,hidden:a,className:r}=e,i=(0,o.useId)();if(a)return null;let c=(0,o.isValidElement)(s)?(0,o.cloneElement)(s,{"aria-labelledby":i}):s;return(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between w-full gap-4 px-3",children:[(0,n.jsx)("div",{className:(0,l.cn)("max-w-sm min-w-0",r),id:i,children:t}),(0,n.jsx)("div",{className:"text-right min-w-24",children:c})]})}function ee(e){var t;let{onManage:s}=e,{t:a}=(0,w.$G)("settings"),l=(0,r.kP)(),i=null===(t=l.user)||void 0===t?void 0:t.xSubscriptionType,c=(0,U.g)(),d=(0,X.useRouter)(),{data:u}=(0,H.Pd)(),p=c.HIDE_SUBSCRIPTION_FLOWS_FROM_PREMIUM_PLUS_USERS&&"PremiumPlus"===i||(null==u?void 0:u.hasSubscriptions),m=(0,W.Db)({mutationFn:async()=>{let e=window.location.host,t="".concat(e.startsWith("localhost")?"http://":"https://").concat(e).concat("/api/link-x-account/"),s=await (0,G.t)(t,"X");d.push(s||B)},onError:e=>{(0,$.H)("settings-account",e),d.push(B)}}),g=(0,o.useMemo)(()=>{var e;return!!(null===(e=l.user)||void 0===e?void 0:e.xUserId)},[l.user]);return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[l.user&&(0,n.jsx)(Q,{action:(0,n.jsx)(x.zx,{variant:"card",size:"pill",className:"text-sm group",onClick:s,children:a("Manage","Manage")}),children:(0,n.jsxs)("div",{className:"flex flex-row items-center w-full gap-2",children:[(0,n.jsx)(h,{className:"w-12 h-12",user:l.user}),(0,n.jsxs)("div",{className:"p-1 min-w-0 text-sm",children:[(0,n.jsx)(q,{children:"".concat(l.user.givenName," ").concat(l.user.familyName)}),(0,n.jsx)("div",{className:"text-secondary truncate",children:l.user.email})]})]})}),c.SHOW_X_BADGE&&l.user&&g&&(0,n.jsx)(Q,{action:(0,n.jsx)(Z,{subscriptionType:i}),children:(0,n.jsx)(q,{children:a("\uD835\uDD4F Status","\uD835\uDD4F Status")})}),l.user&&!g&&(0,n.jsx)(Q,{action:(0,n.jsx)(x.zx,{variant:"card",size:"pill",className:"text-sm",disabled:m.isPending,onClick:()=>m.mutate(),children:a("Connect","Connect")}),children:(0,n.jsx)(q,{children:a("Connect X Account","Connect your \uD835\uDD4F Account")})}),(0,n.jsx)(et,{}),!p&&c.SHOW_SUBSCRIPTION_FLOWS&&(0,n.jsx)(T.VE,{className:"mt-auto"})]})}function et(){let{t:e,i18n:t}=(0,w.$G)("settings"),s=(0,V.F)(K.Z("selectedLanguage")),[a,r]=(0,o.useState)(!1),l=(0,o.useMemo)(()=>s||t.languages.find(e=>e in p.l2)||p.sm,[t.languages,s]),i=(0,o.useCallback)(e=>{t.changeLanguage(e).then(()=>{V.F.getState().setSelectedLanguage(e),r(!1)}).catch(e=>(0,$.H)("settings-account",e))},[t]),c=(0,n.jsx)(x.zx,{variant:"card",size:"pill",onClick:()=>r(!0),children:e("Change","Change")});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q,{action:c,children:(0,n.jsxs)(q,{className:"flex items-center gap-2",children:[e("Language","Language"),(0,n.jsx)(Y.Z,{size:16,className:"text-secondary"})]})}),(0,n.jsx)(O,{locale:l,open:a,onLocaleChange:i,onOpenChange:r})]})}var es=s(89916),en=s(44836);function ea(){let{t:e}=(0,w.$G)("settings"),t=(0,U.g)(),s=(0,V.F)(K.Z("userSettings")),a=(0,V.F)(K.Z("fetchSetPreference"));return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,n.jsx)(es.oX,{}),(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.displayUserMessageMarkdown,onCheckedChange:e=>a("displayUserMessageMarkdown",e)}),children:(0,n.jsx)(q,{children:e("Display Your Message In Markdown","Display Your Message In Markdown")})}),(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.autoWrapLongLinesCode,onCheckedChange:e=>a("autoWrapLongLinesCode",e)}),children:(0,n.jsx)(q,{children:e("Wrap Long Lines For Code Blocks By Default","Wrap Long Lines For Code Blocks By Default")})}),(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.showConversationPreviews,onCheckedChange:e=>a("showConversationPreviews",e)}),children:(0,n.jsx)(q,{children:e("Show Conversation Previews in History","Show Conversation Previews in History")})}),(null==t?void 0:t.ENABLE_CONVERSATION_TABS)&&(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.showActiveTabs,onCheckedChange:e=>a("showActiveTabs",e)}),children:(0,n.jsx)(q,{children:e("Show Active Conversation Tabs","Show Active Conversation Tabs")})})]})}function er(){let{t:e}=(0,w.$G)("settings"),t=(0,U.g)(),s=(0,V.F)(K.Z("userSettings")),a=(0,V.F)(K.Z("fetchSetPreference"));return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.autoOpenSearchResults,onCheckedChange:e=>a("autoOpenSearchResults",e)}),children:(0,n.jsx)(q,{children:e("Automatically Open Search Results","Automatically Open Search Results")})}),(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.disableAutoScroll,onCheckedChange:e=>a("disableAutoScroll",e)}),children:(0,n.jsx)(q,{children:e("Disable Auto Scroll","Disable Auto Scroll")})}),(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.showFollowUpSuggestions,onCheckedChange:e=>a("showFollowUpSuggestions",e)}),children:(0,n.jsx)(q,{children:e("Show Follow Up Suggestions","Show Follow Up Suggestions")})}),(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.hideArtifacts,onCheckedChange:e=>a("hideArtifacts",e)}),children:(0,n.jsx)(q,{children:e("settings-tab.behavior.artifacts.disable","Disable Sidebar Editor For Code And Documents")})}),(null==t?void 0:t.ENABLE_BROWSER_NOTIFICATIONS)&&(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.browserNotificationsEnabled,onCheckedChange:e=>a("browserNotificationsEnabled",e)}),children:(0,n.jsx)(q,{children:e('Notify When "Think" Or "DeepSearch" Completes','Notify When "Think" Or "DeepSearch" Completes')})}),t.ENABLE_WEBPAGE_ATTACHMENTS&&(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.autoDetectWebpageAttachments,onCheckedChange:e=>a("autoDetectWebpageAttachments",e)}),children:(0,n.jsx)(q,{children:e("settings.behavior.auto-detect-webpage-attachments",{defaultValue:"Read Webpage Content of Pasted URLs"})})}),(null==t?void 0:t.ENABLE_BRAVE_COMPLETIONS)&&(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:s.preferences.disableTypeahead,onCheckedChange:e=>a("disableTypeahead",e)}),children:(0,n.jsx)(q,{children:e("settings.behavior.disable-typeahead",{defaultValue:"Disable Typeahead Suggestions"})})})]})}var el=s(63255),ei=s(77119),eo=s(68060),ec=s(13771),ed=s(74239),eu=s(75361);function eh(e){var t;let{onManage:s,onDelete:a}=e,{t:i}=(0,w.$G)("settings"),c=(0,U.g)(),{client:d}=(0,ed.useStatsigClient)(),u=(0,r.kP)(),h=(0,ei.o)(),p=(0,V.F)(K.Z("userSettings")),m=(0,V.F)(K.Z("fetchSetUserSettings")),[g,f]=(0,o.useState)(!1),v=(0,o.useCallback)(()=>{s()},[]),j=(0,o.useCallback)(()=>{a()},[]),b=(0,o.useMemo)(()=>(0,eo.g)(u.countryCode),[u.countryCode]);return(0,n.jsxs)("div",{className:"flex flex-col w-full gap-6",children:[(0,n.jsxs)(Q,{action:(0,n.jsx)(en.r,{checked:!p.excludeFromTraining,onCheckedChange:e=>{var t,s;d.logEvent("set_exclude_from_training",String(!e),{userId:null!==(s=null===(t=u.user)||void 0===t?void 0:t.userId)&&void 0!==s?s:""}),m({...p,excludeFromTraining:!e}).catch(()=>{eu.Am.error(i("settings-data.error","Failed to update settings"))})}}),children:[(0,n.jsx)(q,{children:i("Improve the Model","Improve the Model")}),(0,n.jsx)(J,{children:i("Improve the Model.description","By allowing your data to be used for training our models, you help enhance your own experience and improve the quality of the model for all users. We take measures to ensure your privacy is protected throughout the process.")})]}),(null===(t=u.user)||void 0===t?void 0:t.xUserId)&&(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:p.allowXPersonalization,onCheckedChange:e=>{var t,s;d.logEvent("set_allow_x_personalization",String(e),{userId:null!==(s=null===(t=u.user)||void 0===t?void 0:t.userId)&&void 0!==s?s:""}),m({...p,allowXPersonalization:e}).catch(()=>{eu.Am.error(i("settings-data.error","Failed to update settings"))})}}),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(q,{children:i("Personalize Grok using X","Personalize Grok using \uD835\uDD4F")}),(0,n.jsxs)(J,{children:[i("Personalize Grok using X.description","Allow your \uD835\uDD4F data to be used for personalizing and enhancing your Grok experience. This data includes:")," ",i("Personalize Grok using X.permissions","\uD835\uDD4F user profile, \uD835\uDD4F account information and location, \uD835\uDD4F settings, \uD835\uDD4F preferences, posts viewable on your \uD835\uDD4F account.")]})]})}),c.ENABLE_MEMORY_TOGGLE&&u.user&&(0,n.jsx)(Q,{action:(0,n.jsx)(en.r,{checked:p.enableMemory,onCheckedChange:e=>{var t,s;d.logEvent("set_enable_memory",String(e),{userId:null!==(s=null===(t=u.user)||void 0===t?void 0:t.userId)&&void 0!==s?s:""}),m({...p,enableMemory:e}).catch(()=>{eu.Am.error(i("settings-data.error","Failed to update settings"))})},disabled:b&&!p.enableMemory}),className:(0,l.cn)(b&&"opacity-50"),children:(0,n.jsxs)("div",{children:[(0,n.jsxs)(q,{className:"flex flex-row items-center gap-1.5",children:[i("Personalize Grok with your conversation history","Personalize Grok with your conversation history"),(0,n.jsx)(el.v,{})]}),(0,n.jsxs)(J,{children:[i("Personalize Grok with your conversation history.description","Allow Grok to remember details from your previous conversations. You can delete individual conversations to forget the associated details. Temporary chats are never stored."),b&&(0,n.jsxs)("span",{className:"italic",children:[" ",i("Personalize Grok with your conversation history.gdpr","This feature is not available in your region.")]})]})]})}),(0,n.jsx)(Q,{action:(0,n.jsx)(x.zx,{variant:"card",size:"pill",className:"text-sm",onClick:v,children:i("Export","Export")}),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(q,{children:i("Export Account Data","Export Account Data")}),(0,n.jsx)(J,{children:i("Export Account Data.description","You can download all data associated with your account below. This data includes everything stored in all xAI products.")})]})}),(0,n.jsxs)(Q,{action:(0,n.jsx)(x.zx,{variant:"card",size:"pill",className:(0,l.cn)("text-sm",g&&"text-red-500"),onBlur:()=>f(!1),onClick:()=>{g?(ec.t.getState().fetchSoftDeleteAllConversations().catch(()=>{console.error(i("Failed to delete conversations","Failed to delete conversations"))}),h.routeToConversation(void 0),f(!1)):f(!0)},children:g?i("Are you sure?","Are you sure?"):i("Delete","Delete")}),children:[(0,n.jsx)(q,{children:i("Delete All Conversations","Delete All Conversations")}),(0,n.jsx)(J,{children:i("Delete All Conversations.description","Delete all of your conversation data.")})]}),(0,n.jsxs)(Q,{action:(0,n.jsx)(x.zx,{variant:"card",size:"pill",className:"max-w-full text-sm text-red-500",onClick:j,children:(0,n.jsx)("span",{className:"truncate",children:i("Permanently Delete","Delete")})}),children:[(0,n.jsx)(q,{children:i("Delete Account","Delete Account")}),(0,n.jsx)(J,{children:i("Delete Account.description","Permanently delete your account and associated data from the xAI platform. Deletions are immediate and cannot be undone.")})]})]})}var ex=s(30190),ep=s(64846),em=s(60193);function eg(){let{t:e}=(0,w.$G)("settings"),{client:t}=(0,ed.useStatsigClient)(),s=(0,V.F)(e=>e.userSettings.preferences.selectedSystemPromptId),a=(0,ep.Zv)(e=>s?e.draftPromptById[s]:void 0),r=(0,ep.Zv)(e=>s?e.byId[s]:void 0);(0,o.useEffect)(()=>{!a&&s&&ep.Zv.getState().upsertDraftPrompt((null==r?void 0:r.prompt)||"",s)},[s]);let i=(0,o.useMemo)(()=>!!(0,ep.DL)(s)&&(!r&&!!a||!!r&&a!==r.prompt),[a,r]),c=(0,ep.Zv)(K.Z("list")),d=(0,o.useMemo)(()=>c.find(e=>!e.isPreset)||ep.X5,[c]),u=(0,o.useMemo)(()=>c.filter(e=>e.isPreset),[c]),h=(0,o.useCallback)(e=>{let s=V.F.getState();s.userSettings.preferences.selectedSystemPromptId===e.personalityId?(t.logEvent("settings-personality-selected","none",{personalityId:"none"}),s.userSettings.preferences.selectedSystemPromptId=void 0,s.fetchSetPreference("selectedSystemPromptId",void 0).catch(e=>{(0,$.H)("settings-personality:handleSelectPersonality",e)})):(t.logEvent("settings-personality-selected",e.personalityId,{personalityId:e.personalityId}),s.userSettings.preferences.selectedSystemPromptId=e.personalityId,s.fetchSetPreference("selectedSystemPromptId",e.personalityId).catch(e=>{(0,$.H)("settings-personality:handleSelectPersonality",e)}))},[t]),x=(0,o.useCallback)(e=>{let t=ep.Zv.getState(),s=V.F.getState(),n=s.userSettings.preferences.selectedSystemPromptId;if(!n)return;t.upsertDraftPrompt(e,n);let a=t.byId[n];a?t.fetchUpdatePersonality({personalityId:n,name:a.name,description:a.description,prompt:e,isPreset:!0}).catch(e=>{(0,$.H)("settings-personality:handleSave",e),eu.Am.error(e.message)}):t.fetchCreatePersonality({...ep.X5,prompt:e}).then(e=>{s.fetchSetPreference("selectedSystemPromptId",e.personalityId).catch(e=>{(0,$.H)("settings-personality:handleSelectPersonality",e)})}).catch(e=>{(0,$.H)("settings-personality:handleSave",e),eu.Am.error(e.message)})},[s]),p=(0,o.useCallback)(()=>{let e=ep.Zv.getState(),t=V.F.getState().userSettings.preferences.selectedSystemPromptId;t&&e.upsertDraftPrompt((null==r?void 0:r.prompt)||"",t)},[r,s]),m=(0,o.useCallback)(e=>{let t=ep.Zv.getState();s&&t.upsertDraftPrompt(e,s)},[s]),g=(0,o.useId)();return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"pl-4 pb-3 text-sm font-semibold",children:e("Customize Grok's Response","Customize Grok's Response")}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 px-1 mb-6",children:[d&&(0,n.jsx)(ef,{personality:d,isSelected:(0,ep.DL)(s),handleSelectPersonality:h}),u.map(e=>(0,n.jsx)(ef,{personality:e,isSelected:s===e.personalityId,handleSelectPersonality:h},e.personalityId))]}),(0,n.jsxs)("div",{className:(0,l.cn)("flex-col gap-2 px-1",s?"flex":"hidden"),children:[(0,n.jsx)("div",{className:"flex items-center gap-2 pl-3 text-sm tex‹t-primary",children:(0,n.jsx)("label",{htmlFor:g,className:(0,l.cn)({"text-secondary":!(0,ep.DL)(s)}),children:e("Custom Instructions","Custom Instructions")})}),(0,n.jsx)(ex.v,{value:a||"",onChange:m,isDirty:i,placeholder:e("How should Grok behave?","How should Grok behave?"),onSave:x,onReset:p,disabled:!(0,ep.DL)(s),textareaId:g})]}),(0,n.jsxs)("div",{className:(0,l.cn)("flex flex-row gap-2 h-full px-8  items-center text-sm text-secondary",s?"hidden":"flex"),children:[(0,n.jsx)(em.Z,{className:"size-4 shrink-0"}),e("Select an instruction set from above to customize Grok's responses.","Select an instruction set from above to customize Grok's responses.")]})]})}function ef(e){let{personality:t,isSelected:s,handleSelectPersonality:a}=e,r=(0,o.useCallback)(()=>{a(t)},[a,t]);return(0,n.jsxs)(x.zx,{className:(0,l.cn)("flex flex-col items-center justify-start gap-1","text-wrap text-start","w-full rounded-2xl flex-row p-3 group","ring-1 ring-inset ring-toggle-border hover:ring-card-border-focus hover:bg-card-hover text-primary","relative","min-h-16 pr-8",s&&"bg-button-ghost-hover pr-4"),variant:"none",size:"none",onClick:r,children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("p",{className:"text-sm text-primary",children:t.name}),(0,n.jsx)("p",{className:"text-xs text-secondary",children:t.description})]}),s&&(0,n.jsx)(z.Z,{className:"size-4 text-secondary"})]})}var ev=s(83711),ej=s(38040),eb=s(66218),ey=s(13148),ew=s(76527),eN=s(90044),ek=s(86390),eC=s(17828),eS=s(30725),eI=s(12115),eD=s(40881),eE=s(41811),e_=s(54444),eP=s(82209),ez=s(80893),eA=s(12707);function eL(){var e,t;let{t:s}=(0,w.$G)("settings"),a=(0,r.kP)(),i=null===(e=a.user)||void 0===e?void 0:e.email,c=(0,U.g)(),{data:d}=(0,H.Pd)(),u=null===(t=a.user)||void 0===t?void 0:t.xSubscriptionType,h=c.HIDE_SUBSCRIPTION_FLOWS_FROM_PREMIUM_PLUS_USERS&&"PremiumPlus"===u||(null==d?void 0:d.hasSubscriptions),x=(0,o.useMemo)(()=>(null==d?void 0:d.subscriptions.length)&&d.subscriptions.filter(e=>!e.enterprise&&"SUBSCRIPTION_STATUS_ACTIVE"===e.status)||[],[d]);return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,n.jsxs)("div",{className:"px-3",children:[(0,n.jsx)("h1",{className:"font-semibold text-md",children:s("SuperGrok",{defaultValue:"SuperGrok"})}),(0,n.jsx)("p",{className:(0,l.cn)("text-sm text-fg-secondary font-medium mb-4"),children:h?s("Your plan includes:",{defaultValue:"Your plan includes:"}):s("Subscribe to SuperGrok to get:",{defaultValue:"Subscribe to SuperGrok to get:"})}),(0,n.jsxs)("ul",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(eA.gwl,{className:"text-fg-secondary",height:14,width:14}),(0,n.jsx)("span",{className:"text-sm",children:s("Everything in free",{defaultValue:"Everything in free"})})]}),(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(eA.gwl,{className:"text-fg-secondary",height:14,width:14}),(0,n.jsx)("span",{className:"text-sm",children:s("Larger model context window",{defaultValue:"Larger model context window"})})]}),(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(eA.gwl,{className:"text-fg-secondary",height:14,width:14}),(0,n.jsx)("span",{className:"text-sm",children:s("More queries for Grok 3",{defaultValue:"More queries for Grok 3"})})]}),(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(eA.gwl,{className:"text-fg-secondary",height:14,width:14}),(0,n.jsx)("span",{className:"text-sm",children:s("More queries for Image Generation",{defaultValue:"More queries for Image Generation"})})]}),(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(eA.gwl,{className:"text-fg-secondary"}),(0,n.jsx)("span",{className:"text-sm",children:s("Opportunities to try new features early!",{defaultValue:"Opportunities to try new features early!"})})]})]})]}),c.SHOW_SUBSCRIPTION_FLOWS&&(0,n.jsx)(eO,{subscriptions:x,userMail:i})]})}function eO(e){let{subscriptions:t,userMail:s}=e,{t:a}=(0,w.$G)("settings"),r=(e,t)=>e.x?{label:a("billing-information.x",{defaultValue:"Billing Information (\uD835\uDD4F)"}),manageUrl:"https://x.com/settings/subscription"}:e.apple?{label:a("billing-information.apple",{defaultValue:"Billing Information (Apple)"}),manageUrl:"https://apps.apple.com/account/subscriptions"}:e.google?{label:a("billing-information.google",{defaultValue:"Billing Information (Google)"}),manageUrl:"https://play.google.com/store/account/subscriptions?sku=grok.pro&package=ai.x.grok"}:e.stripe?{label:a("Stripe",{defaultValue:"Billing Information (Stripe)"}),manageUrl:"https://billing.stripe.com/p/login/eVa4iNeNQ3kla9W6oo".concat(t?"?prefilled_email=".concat(t):"")}:{label:"",manageUrl:""};return 0===t.length?(0,n.jsx)(e_.V,{className:"mt-auto"}):t.map(e=>{let{label:l,manageUrl:i}=r(e,s),o=t.length>1?l:a("Billing Information","Billing Information");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eE.Z,{orientation:"horizontal",className:"my-6"}),(0,n.jsx)(Q,{action:(0,n.jsx)(x.zx,{variant:"outline",size:"pill",className:"text-sm",children:(0,n.jsxs)(ez.default,{href:i,target:"_blank",className:"flex items-center gap-2",children:[a("Manage your subscription",{defaultValue:"Manage your subscription"}),(0,n.jsx)(eP.Z,{height:16,width:16,className:"text-neutral-400"})]})}),children:(0,n.jsx)(q,{children:o})},e.createTime)]})})}var eF=s(54600),eM=s(37446),eG=s(28147),eT=s(25634),eR=s(72086),eZ=s(47026);function eB(e){let{name:t,icon:s,provider:a,connector:r,disconnectErrorMessage:i}=e,{t:o}=(0,w.$G)("settings"),c=(0,W.NL)(),{client:d}=(0,ed.useStatsigClient)(),u=(0,W.Db)({mutationFn:async()=>{let e=window.location.host,t="".concat(e.startsWith("localhost")?"http://":"https://").concat(e).concat(eG.zS),s=await (0,G.t)(t,a);window.open(s||eG.DA,"_blank")},onError:e=>{(0,$.H)("settings.connected-apps.connect-".concat(a),e),window.open(eG.DA,"_blank")}}),h=(0,W.Db)({mutationFn:async()=>{let e=null==r?void 0:r.oauthConnectorId;if(!e)return;await (0,eF.Ox)({oauthConnectorId:e});let t=["oauth-connectors"];await c.cancelQueries({queryKey:t}),c.setQueryData(t,t=>t.filter(t=>t.oauthConnectorId!==e))},onError:e=>{(0,$.H)("settings.connected-apps.disconnect-".concat(a),e),eu.Am.error(i)}}),p=!!r,m=u.isPending||h.isPending,g=p?o("settings.connected-apps.disconnect","Disconnect"):o("settings.connected-apps.connect","Connect");return(0,n.jsx)(Q,{action:(0,n.jsx)(x.zx,{variant:"card",size:"pill",className:(0,l.cn)("min-w-28 text-sm",p&&"text-red-400"),onClick:()=>{if(p){d.logEvent("disconnect-oauth-clicked",a),h.mutate();return}d.logEvent("connect-oauth-clicked",a),u.mutate()},disabled:m,children:m?(0,n.jsx)(eM.$,{size:"sm"}):g}),className:"text-md",children:(0,n.jsxs)(q,{className:"flex flex-row items-center gap-1.5",children:[(0,n.jsx)(s,{size:16}),t]})})}function eU(){let{t:e}=(0,w.$G)("settings"),t=(0,U.g)(),{data:s}=(0,eT.h)(),a=null==s?void 0:s.find(e=>"GOOGLE_DRIVE"===e.provider),r=null==s?void 0:s.find(e=>"MICROSOFT_ONEDRIVE"===e.provider);return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[t.ENABLE_GOOGLE_DRIVE&&(0,n.jsx)(eB,{name:e("settings.connected-apps.google-drive","Google Drive"),icon:eR.Z,provider:"GOOGLE_DRIVE",connector:a,disconnectErrorMessage:e("settings.connected-apps.failed-to-disconnect-google-drive","Failed to disconnect Google Drive")}),t.ENABLE_MICROSOFT_ONEDRIVE&&(0,n.jsx)(eB,{name:e("settings.connected-apps.microsoft-onedrive","Microsoft OneDrive"),icon:eZ.Mwr,provider:"MICROSOFT_ONEDRIVE",connector:r,disconnectErrorMessage:e("settings.connected-apps.failed-to-disconnect-microsoft-onedrive","Failed to disconnect Microsoft OneDrive")})]})}var eH=s(1136),e$=s(34489);function eV(e){let{icon:t,text:s,tab:a}=e,r=(0,y.w)(),i=(0,eH.ng)(K.Z("tab")),c=(0,eH.ng)(K.Z("setTab")),d="account"===a?i===a||!r&&"home"===i:i===a,u=(0,o.useCallback)(()=>{c(a)},[a]);return(0,n.jsxs)(x.zx,{variant:"ghost",size:"nav",className:(0,l.cn)("group gap-3 px-4 justify-start h-10 hover:bg-card-hover min-w-40",r&&"text-lg h-10 flex",d&&"hover:text-primary text-primary [&>svg]:text-primary bg-card-hover"),onClick:u,children:[(0,n.jsx)(t,{size:18,className:(0,l.cn)("text-secondary group-hover:text-primary",{"text-primary":d})})," ",s,r&&(0,n.jsx)(e$.Z,{className:"text-secondary !ml-auto",size:18})]})}function eW(e){let{tab:t}=e,{t:s}=(0,w.$G)("settings");switch((0,y.w)()?t:"home"){case"account":return s("settings-tab.account","Account");case"appearance":return s("settings-tab.appearance","Appearance");case"chat":return s("settings-tab.chat","Chat");case"personality":return s("settings-tab.personality","Personality");case"data":return s("settings-tab.data","Data Controls");case"billing":return s("settings-tab.billing","Billing");case"dev":return s("settings-tab.dev","Dev");case"behavior":return s("settings-tab.behavior","Behavior");case"connected-apps":return s("settings-tab.connected-apps","Connected Apps");default:return s("settings-tab.home","Settings")}}let eY=async()=>{let e=void 0;if(e)return(0,n.jsx)(e,{})},eX=()=>{var e,t,s;let{t:a}=(0,w.$G)("settings"),i=(0,y.w)(),c=(0,eH.ng)(K.Z("tab")),d=(0,eH.ng)(K.Z("setTab")),{resolvedTheme:u}=(0,eD.F)(),h=(0,eH.ng)(K.Z("open")),p=(0,eH.ng)(K.Z("setOpen")),m=(0,U.g)(),g=(0,r.kP)(),{ACCOUNT_URL:j}=(0,f.O)(),b=(0,o.useCallback)(()=>{window.open(j+"/account?redirect=grok-com&theme=".concat(u),"_blank")},[u]),N=(0,o.useCallback)(()=>{window.location.assign(j+"/account?redirect=grok-com&theme=".concat(u))},[u]),{client:S}=(0,ed.useStatsigClient)();(0,ej.y)(ev.aj,e=>{e.preventDefault(),e.stopPropagation(),S.logEvent("pressed_cmd_,"),p(!h)},[h,p,S]);let{data:I}=(0,H.Pd)(),D=null===(e=g.user)||void 0===e?void 0:e.xSubscriptionType,E=m.HIDE_SUBSCRIPTION_FLOWS_FROM_PREMIUM_PLUS_USERS&&"PremiumPlus"===D||(null==I?void 0:I.hasSubscriptions);return(0,n.jsxs)(k.c,{open:h,setOpen:p,contentClassName:(0,l.cn)("focus:outline-0 focus-within:outline-0 gap-2 bg-background rounded-3xl md:min-h-[420px] h-[calc(100dvh-64px)] md:h-4/5 md:h-3/5 md:w-[calc(100%-2rem)] max-w-3xl flex flex-col md:overflow-hidden"),children:[(0,n.jsxs)(C.fK,{className:"relative flex-shrink-0 px-6 pt-5 pb-2 min-h-10",children:[(0,n.jsxs)(C.$N,{className:(0,l.cn)("text-xl text-left","flex flex-row items-center",i&&"home"!==c,i?"justify-center":"justify-between"),children:[(0,n.jsx)(eW,{tab:c}),!i&&(0,n.jsx)(x.zx,{className:"-mt-2 -mr-2",variant:"ghost",title:a("Close","Close"),size:"icon",onClick:()=>{p(!1),d("home")},tabIndex:-1,children:(0,n.jsx)(v.b0,{size:18,className:"text-secondary"})})]}),(0,n.jsx)(C.Be,{hidden:!0,children:a("Settings","Settings")}),i&&"home"!==c&&(0,n.jsx)(x.zx,{className:"absolute left-3.5 -bottom-1",variant:"ghost",size:"icon",onClick:()=>d("home"),children:(0,n.jsx)(eb.Z,{size:18,className:"text-secondary"})})]}),(0,n.jsxs)("div",{className:(0,l.cn)("flex flex-col w-full sm:flex-row focus:outline-none h-0 flex-grow",i&&"pb-8 pt-4"),children:[(!i||"home"===c)&&(0,n.jsxs)("div",{className:(0,l.cn)("flex flex-col gap-1.5",{"gap-3 px-2 w-full":i,"pl-3":!i}),children:[(0,n.jsx)(eV,{icon:ey.Z,text:a("account","Account"),tab:"account"}),(0,n.jsx)(eV,{icon:ew.Z,text:a("appearance","Appearance"),tab:"appearance"}),(0,n.jsx)(eV,{icon:eN.Z,text:a("settings.behavior",{defaultValue:"Behavior"}),tab:"behavior"}),(0,n.jsx)(eV,{icon:ek.Z,text:a("Customize","Customize"),tab:"personality"}),g.user&&(0,n.jsx)(eV,{icon:eC.Z,text:a("Data Controls","Data Controls"),tab:"data"}),E&&(0,n.jsx)(eV,{icon:eS.Z,text:a("setting-tab.billing","Billing"),tab:"billing"}),g.user&&(0,n.jsx)(eV,{icon:eI.Z,text:a("settings.connected-apps","Connected Apps"),tab:"connected-apps"})]}),("account"===c||!i&&"home"===c)&&(0,n.jsx)(eK,{children:(0,n.jsx)(ee,{onManage:b})}),"appearance"===c&&(0,n.jsx)(eK,{children:(0,n.jsx)(ea,{})}),"behavior"===c&&(0,n.jsx)(eK,{children:(0,n.jsx)(er,{})}),"personality"===c&&(0,n.jsx)(eK,{children:(0,n.jsx)(eg,{})}),"data"===c&&g.user&&(0,n.jsx)(eK,{children:(0,n.jsx)(eh,{onManage:b,onDelete:N})}),"billing"===c&&g.user&&(0,n.jsx)(eK,{children:(0,n.jsx)(eL,{})}),"connected-apps"===c&&g.user&&(0,n.jsx)(eK,{children:(0,n.jsx)(eU,{})}),"dev"===c&&g.user&&(null===(s=g.user)||void 0===s?void 0:null===(t=s.email)||void 0===t?void 0:t.endsWith("@x.ai"))&&(0,n.jsx)(eK,{children:(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading DevTools..."}),children:(0,n.jsx)(eY,{})})})]})]})};function eK(e){let{children:t}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex-1 w-full h-full","pl-4 pr-4 pb-10 md:pr-4","overflow-scroll focus:outline-none"),children:t})}var eq=s(63064),eJ=s(27763),eQ=s(89463),e0=s(35813),e1=s(33263),e4=s(74417),e2=s(92127),e3=s(87245),e6=s(3667),e5=s(35525),e8=s(69492),e7=s(38372),e9=s(99046),te=s(32790),tt=s(18486);let ts=(0,o.memo)(e=>{let{conversation:t}=e,{conversationId:s}=t,{data:a,error:r}=(0,tt.ri)(s);(0,te.c)(r);let i=null==a?void 0:a[0];if(!i)return null;let{name:o,icon:c,workspaceId:d}=i;return(0,n.jsx)(ez.default,{href:"/workspace/".concat(d),children:(0,n.jsxs)(e6.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:(0,l.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-secondary flex flex-row items-center gap-1","ml-2 mt-0.5"),children:[(0,n.jsx)("span",{className:(0,l.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5"),children:(0,n.jsx)(e9.in,{icon:c})}),(0,n.jsx)("span",{className:"max-w-[0px] @[340px]/nav:max-w-[75px] @[375px]/nav:max-w-[100px] @[430px]/nav:max-w-[150px] @[500px]/nav:max-w-[200px] @[960px]/nav:max-w-[400px] truncate",children:o})]})})}),tn={size:20,strokeWidth:2};function ta(e){let{hash:t,isIncognito:s,onLinkClick:a}=e,{t:r}=(0,w.$G)("chat"),{commandPrefix:l}=(0,e0.i)(),i=s?r("Switch to Default Chat","Switch to Default Chat"):r("Switch to Private Chat","Switch to Private Chat"),o=s?"".concat(l,"J"):"".concat(l,"⇧J");return(0,n.jsx)(x.g$,{className:"rounded-full",variant:"ghost",size:"icon","aria-label":i,stayOpenOnClick:!0,tooltipAsChild:!0,tooltipContent:(0,n.jsxs)("div",{className:"flex flex-row gap-1",children:[i,l&&(0,n.jsx)("span",{className:"text-secondary",children:o})]}),tooltipContentProps:{side:"bottom"},asChild:!0,children:(0,n.jsx)(ez.default,{href:"/chat".concat(s?"":t),onClick:a,children:s?(0,n.jsx)(v.L_,{...tn,className:"text-purple-400 dark:text-purple-300","data-testid":"pi-ghost-fill"}):(0,n.jsx)(v.fh,{...tn,"data-testid":"pi-ghost"})})})}let tr=(e,t,s)=>e?t?a.J5:"ja"===s?a.fk:a.I3:"ja"===s?a.nD:a.$I,tl="#private";function ti(e){var t,s,a;let{conversationIsLoading:i,conversation:c,label:d,shared:u,isOptimisticConversation:j,hideIncognito:y}=e,{t:N,i18n:k}=(0,w.$G)("chat"),{t:C}=(0,w.$G)("base"),S=(0,X.useRouter)(),{routeToConversation:I}=(0,ei.o)(),[D,E]=(0,e5.H)(),_=(0,r.kP)(),P=_.user,z=(0,eQ.r)(),{commandPrefix:A,os:L}=(0,e0.i)(),{client:O}=(0,ed.useStatsigClient)(),G=(0,o.useRef)(null),T=(0,e8.gK)(K.Z("setOptimisticConversationId")),R=(0,e8.gK)(K.Z("setReasoningMode")),Z=(0,e8.gK)(K.Z("establishNewConversation")),B=(0,e4._)(K.Z("setIsUpselling")),W=(0,V.F)(K.Z("isIncognito")),Y=(0,V.F)(K.Z("setIsIncognito")),q=(0,V.F)(e=>e.userSettings.preferences.showActiveTabs),J=(0,U.g)(),{SUPPORT_URL:Q}=(0,f.O)(),ee=(0,M.X)(),{data:et}=(0,H.Pd)(),es=null!==(s=null==et?void 0:et.hasSubscriptions)&&void 0!==s&&s,en=null!==(a=null==et?void 0:null===(t=et.subscriptions)||void 0===t?void 0:t.some(e=>!!e.enterprise))&&void 0!==a&&a,ea=(0,V.F)(K.Z("selectedLanguage")),er=(0,o.useMemo)(()=>ea||k.languages.find(e=>e in p.l2)||p.sm,[k.languages,ea]),el=tr(es,en,er),eo=(0,e8.gK)(K.Z("lastMessageId"));(0,o.useEffect)(()=>{D===tl&&(Y(!0),E(""))},[D]);let ec=(0,o.useCallback)(()=>{S.push("/sign-out")},[S]),eu=(0,o.useCallback)(()=>{T(void 0),Y(!1),I(void 0)},[S,u]),eh=(0,o.useCallback)(e=>{e.ctrlKey||e.metaKey||(e.preventDefault(),eu())},[eu]);(0,ej.y)(ev.VM,e=>{e.preventDefault(),e.stopPropagation(),O.logEvent("pressed_cmd_j"),eu()},[eu,O]);let[ex,ep]=(0,o.useState)(!1),em=(0,o.useCallback)(()=>{Y(!0),I(void 0)},[]);(0,o.useCallback)(e=>{e.ctrlKey||e.metaKey||em()},[em]);let eg=!!_.user&&!y;(0,ej.y)(ev.op,e=>{eg&&(e.preventDefault(),e.stopPropagation(),O.logEvent("pressed_cmd_shift_j"),em())},[eg,em,O]);let ef=(0,o.useCallback)(e=>{e.ctrlKey||e.metaKey||(e.preventDefault(),Y(!W))},[W]),eb=(0,eH.ng)(K.Z("toggleOpen")),ey=(0,g.s)(K.Z("openMenu")),ew=(0,eq.N)(K.Z("setDrawerOpen")),eN=(0,eq.N)(K.Z("drawerOpen")),ek=(0,o.useCallback)(()=>{ew(!eN)},[eN,ew]),eC=(0,eq.N)(K.Z("tabsCount")),eS=j?W:c?!!P&&c.temporary:W,{getPersonaForConversation:eI}=(0,e1.HG)(),eD=eI(c),eE=(0,o.useCallback)(async()=>{if(!eD)return;R("none");let{initialQuery:e,toolOverrides:t}=(0,F.oe)(eD.personaId,C);O.logEvent("click_persona",eD.personaId,{location:"chat-top-nav"}),O.logEvent("new_persona_chat",e,{location:"chat-top-nav",toolOverrides:JSON.stringify(t)}),await ee(),await Z({message:e,toolOverrides:t,persona:eD,enableRetries:J.ENABLE_AUTO_STREAM_RETRY}).catch(e=>{(0,$.H)("chat-top-nav:establishNewConversation",e)})},[eD,R,J.ENABLE_AUTO_STREAM_RETRY]),e_=(0,o.useMemo)(()=>{if(!eD)return null;let{icon:e,colorClassName:t}=(0,F.DB)(eD.personaId);return(0,n.jsxs)(e6.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:(0,l.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-secondary flex flex-row items-center gap-1","ml-2 mt-0.5"),children:[(0,n.jsx)("span",{className:(0,l.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5",t),children:e}),(0,n.jsx)("span",{className:(0,l.cn)("max-w-[0px] @[340px]/nav:max-w-[75px] @[375px]/nav:max-w-[100px] @[430px]/nav:max-w-[150px] @[500px]/nav:max-w-max truncate"),children:C(eD.name)})]})},[c,eD]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{ref:G,className:"w-full relative @container/nav z-40",children:[(0,n.jsxs)("div",{className:(0,l.cn)("h-16 top-0 @[80rem]/nav:h-0 @[80rem]/nav:top-8","absolute z-10 flex flex-row items-center justify-center w-full bg-gradient-to-b","from-background via-background via-80% to-transparent @[80rem]/nav:from-transparent @[80rem]/nav:via-transparent"),children:[(0,n.jsxs)("div",{className:"absolute flex flex-row items-center start-1",children:[(0,n.jsx)(ez.default,{href:"/","aria-label":N("Home page","Home page"),onClick:eh,className:(0,l.cn)("ms-2 me-[0.5] rounded-lg focus:outline-none focus-visible:ring-1 focus-visible:ring-ring","w-8 sm:w-auto"),children:(0,n.jsx)(el,{className:(0,l.cn)("opacity-80 hover:opacity-100 fill-black dark:fill-white","[&>path]:hidden sm:[&>path]:block [&>#mark]:block [&>#furigana]:opacity-60 [&>#subtitle]:opacity-60")})}),e_,!u&&c&&(0,n.jsx)(ts,{conversation:c})]}),(0,n.jsx)("div",{className:(0,l.cn)("grow justify-center hidden max-w-[50%] @[640px]/nav:flex"),children:d?(0,n.jsx)("div",{className:"text-muted-foreground",children:d}):null}),(0,n.jsxs)("div",{className:"absolute flex flex-row items-center gap-0.5 ml-auto end-3",children:[eD&&!i&&c&&(0,n.jsx)(eJ.k,{children:(0,n.jsx)(x.g$,{className:(0,l.cn)("rounded-full",(0,F.DB)(eD.personaId).colorClassName),variant:"ghost",size:"icon",tooltipContent:(0,n.jsxs)("p",{children:[N("New Persona Chat","New Persona Chat"),A&&(0,n.jsxs)("span",{className:"ml-1 text-secondary",children:[A,"J"]})]}),tooltipContentProps:{side:"bottom"},onClick:eE,asChild:!0,children:(0,n.jsx)("div",{onClick:eE,children:(0,n.jsx)(v.VM,{size:20,strokeWidth:2})})})},"new-persona-chat-button"),!eD&&(!i&&c||u)&&(0,n.jsx)(eJ.k,{children:(0,n.jsx)(x.g$,{className:"rounded-full",variant:"ghost",size:"icon",tooltipContent:(0,n.jsxs)("p",{children:[N("start new chat","New Chat"),A&&(0,n.jsxs)("span",{className:"ml-1 text-secondary",children:[A,"J"]})]}),tooltipContentProps:{side:"bottom"},asChild:!0,children:(0,n.jsx)(ez.default,{href:"/chat",onClick:eh,children:(0,n.jsx)(v.VM,{size:20,strokeWidth:2})})})},"new-chat-button"),c&&eo&&!u&&!eS&&(0,n.jsx)(e7.T,{variant:"ghost",size:"icon",conversationId:c.conversationId,responseId:eo,iconProps:{size:20,strokeWidth:2}}),eg&&!i&&!c&&!u&&(0,n.jsx)(ta,{hash:tl,isIncognito:W,onLinkClick:ef}),(0,n.jsx)(x.g$,{variant:"ghost",size:"icon",className:"rounded-full","aria-label":N("History","History"),onClick:()=>{O.logEvent("pressed_cmd_k"),ey()},tooltipContent:(0,n.jsxs)("div",{className:"flex flex-row gap-1",children:[N("History","History"),A&&(0,n.jsxs)("span",{className:"text-secondary",children:["macos"===L?A:"".concat(A,"⇧"),"K"]})]}),children:(0,n.jsx)(b,{size:20})}),J.ENABLE_CONVERSATION_TABS&&q&&z&&eC>0&&(0,n.jsx)(x.g$,{variant:"ghost",size:"icon",className:"rounded-full","aria-label":N("open-tabs-drawer-button.label","Tabs"),onClick:ek,tooltipContent:(0,n.jsx)("div",{className:"flex flex-row gap-1",children:N("open-tabs-drawer-button.label","Tabs")}),children:(0,n.jsx)(e3.Z,{className:"h-5 w-5"})}),_.user?(0,n.jsxs)(m.h_,{children:[(0,n.jsx)(m.$F,{asChild:!0,children:(0,n.jsx)(x.zx,{variant:"ghost",size:"icon",className:"p-1 rounded-full",children:(0,n.jsx)(h,{className:"w-8 h-8",user:_.user})})}),(0,n.jsxs)(m.AW,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,n.jsxs)(m.Xi,{onClick:eb,children:[(0,n.jsx)(v.IE,{className:"size-4 mr-2"}),C("user-dropdown.settings","Settings")]}),(0,n.jsx)(m.Xi,{asChild:!0,children:(0,n.jsxs)(ez.default,{href:Q,target:"_blank",children:[(0,n.jsx)(e2.CE5,{className:"size-4 mr-2"}),C("user-dropdown.help","Help & Feedback")]})}),!es&&J.SHOW_SUBSCRIPTION_FLOWS&&(0,n.jsxs)(m.Xi,{onClick:()=>B(!0),children:[(0,n.jsx)(e2.iNk,{className:"size-4 mr-2"}),C("user-dropdown.upgrade","Upgrade plan")]}),(0,n.jsxs)(m.Xi,{onClick:ec,children:[(0,n.jsx)(v.E2,{className:"size-4 mr-2"}),C("user-dropdown.sign-out","Sign Out")]})]})]}):(0,n.jsx)(to,{currentLanguage:er})]})]}),(0,n.jsx)(eX,{})]})})}function to(e){let{currentLanguage:t}=e,s=(0,X.useRouter)(),{t:a,i18n:r}=(0,w.$G)("chat"),{SUPPORT_URL:i}=(0,f.O)(),c=(0,U.g)(),[d,u]=(0,o.useState)(!1),h=(0,o.useCallback)(()=>{s.push("/sign-in")},[s]),p=(0,o.useCallback)(()=>{s.push("/sign-up")},[s]),g=(0,o.useCallback)(e=>{r.changeLanguage(e).then(()=>{V.F.getState().setSelectedLanguage(e),u(!1)}).catch(e=>(0,$.H)("settings-account",e))},[r]);return(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsxs)(m.h_,{children:[(0,n.jsx)(m.$F,{asChild:!0,children:(0,n.jsx)(x.g$,{variant:"ghost",size:"icon",className:"rounded-full hidden @sm:flex",tooltipContent:(0,n.jsx)("div",{className:"flex flex-row gap-1",children:a("Settings","Settings")}),children:(0,n.jsx)(v.IE,{size:20})})}),(0,n.jsxs)(m.AW,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,n.jsx)(es.MF,{}),(0,n.jsx)(m.Xi,{onClick:()=>u(!0),children:a("Language","Language")}),c.SHOW_ANON_HELP_LINK&&(0,n.jsx)(m.Xi,{children:(0,n.jsx)(ez.default,{href:i,target:"_blank",children:a("Help & Feedback","Help & Feedback")})})]})]}),(0,n.jsxs)(x.zx,{size:"pill",variant:"primary",className:"h-8 px-3 text-sm",onClick:p,children:[(0,n.jsx)(ey.Z,{size:16,strokeWidth:2}),(0,n.jsx)("div",{children:a("Sign up","Sign up")})]}),(0,n.jsx)(x.zx,{size:"pill",variant:"none",className:(0,l.cn)("hidden @sm:flex","h-8 px-3 text-sm text-primary bg-transparent ring-1 ring-inset ring-toggle-border","hover:bg-button-secondary-hover hover:border-text-secondary"),onClick:h,children:(0,n.jsx)("div",{children:a("Sign in","Sign in")})}),(0,n.jsx)(O,{locale:t,open:d,onLocaleChange:g,onOpenChange:u})]})}},38372:function(e,t,s){s.d(t,{T:function(){return v}});var n=s(2899),a=s(6087),r=s(34116),l=s(27763),i=s(37446),o=s(385),c=s(29072),d=s(72242),u=s(46913),h=s(74239),x=s(67206),p=s(44199),m=s(4694),g=s(70702),f=s(75361);let v=e=>{let{conversationId:t,responseId:s,variant:v,size:j,iconProps:b,showLabel:y,className:w}=e,{t:N}=(0,g.$G)("chat"),{client:k}=(0,h.useStatsigClient)(),[C,S]=(0,m.useState)(!1),I=(0,o.D)(),{mutate:D,isPending:E,data:_}=(0,x.Db)({mutationFn:()=>u.xU.chatShareConversation({conversationId:t,body:{responseId:s}})}),P=(0,m.useCallback)(e=>{k.logEvent("clicked-share-on-x",e,{location:"share-on-x-button",conversationId:t,responseId:s,shareUrl:e})},[]),z=(0,m.useCallback)(()=>{f.Am.error("Failed to share conversation")},[]),A=(0,m.useCallback)(e=>{let t=window.location.origin+"/share/"+e;P(t),S(!0),(0,c.G)(t,N("Copied share link to clipboard.","Copied share link to clipboard.")),setTimeout(()=>S(!1),1e3)},[]),L=(0,m.useCallback)(()=>{if(null==_?void 0:_.shareLinkId){A(_.shareLinkId);return}D(void 0,{onSuccess:e=>{if(!e.shareLinkId){z();return}A(e.shareLinkId)},onError:()=>{z()}})},[]);return(0,n.jsxs)(r.g$,{variant:v,size:j,"aria-label":N("Share conversation","Share conversation"),onClick:I?()=>{if(null==_?void 0:_.shareLinkId){A(_.shareLinkId);return}let e=new ClipboardItem({"text/plain":u.xU.chatShareConversation({conversationId:t,body:{responseId:s}}).then(e=>window.location.origin+"/share/"+(null==e?void 0:e.shareLinkId)).then(e=>new Blob([e],{type:"text/plain"}))});navigator.clipboard.write([e]).then(()=>{f.Am.success(N("Copied share link to clipboard.","Copied share link to clipboard.")),S(!0),setTimeout(()=>S(!1),1e3)}).catch(e=>f.Am.error(e.message))}:L,className:(0,d.cn)("rounded-full",w),tooltipContent:C?N("Copied!","Copied!"):N("Copy share link","Copy share link"),tooltipContentProps:{side:"bottom"},disabled:E,children:[(0,n.jsx)(l.k,{children:C?(0,n.jsx)(p.Z,{...b}):E?(0,n.jsx)(i.$,{size:"xs"}):(0,n.jsx)(a.aA,{...b})},C?"copied":"copy"),y&&(0,n.jsx)("span",{children:N("share conversation","Share")})]})}},25459:function(e,t,s){s.d(t,{s:function(){return l}});var n=s(29598);let a=[{id:"root",isSearchEnabled:!0,searchQuery:""}];class r{constructor(e,t){this.set=e,this.get=t,this.open=!1,this.selectedItem="",this.pages=a,this.onSearchQueryChange=e=>{let t=this.get().pages[this.get().pages.length-1];this.set({pages:[...this.get().pages.slice(0,-1),{...t,searchQuery:e}]})},this.openMenu=()=>{this.set({open:!0})},this.goBack=()=>{if(1===this.get().pages.length){this.onSearchQueryChange(""),this.set({open:!1}),this.setSelectedItem("");return}this.setSelectedItem(""),this.set({pages:this.get().pages.slice(0,-1)})},this.closeMenu=()=>{this.set({open:!1,selectedItem:"",pages:[{...this.get().pages[0],searchQuery:""}]})},this.setSelectedItem=(0,n.f0)(this.set,"selectedItem"),this.addPage=e=>{this.setSelectedItem(""),this.set({pages:[...this.get().pages,e]})}}}let l=(0,n.MT)(r)},83376:function(e,t,s){s.d(t,{X:function(){return i}});var n=s(33901),a=s(4694),r=s(6240),l=s(87005);let i=()=>{let[e,t]=(0,r.Z)("anonUserId"),[s,i]=(0,r.Z)("anonPrivateKey"),{user:o,refreshAnonUser:c}=(0,l.useSession)(),d=(0,a.useCallback)(async()=>{let{privateKey:e,anonUserId:s}=await (0,n.b)();t(s),i(e),await c(s,e)},[]);return(0,a.useCallback)(async()=>{!o&&s&&e&&await c(e,s).catch(()=>{d().catch(()=>{console.error("Failed to initialize session")})})},[o,s,e,c])}},89916:function(e,t,s){s.d(t,{MF:function(){return p},oX:function(){return m},yU:function(){return x}});var n=s(2899),a=s(34116),r=s(94408),l=s(72242),i=s(88250),o=s(87960),c=s(18016),d=s(82818),u=s(40881);s(4694);var h=s(70702);let x={light:{icon:o.Z,label:"Light"},dark:{icon:c.Z,label:"Dark"},system:{icon:d.Z,label:"System"}};function p(){let{t:e}=(0,h.$G)("base"),{setTheme:t,theme:s}=(0,u.F)(),o={light:e("Light","Light"),dark:e("Dark","Dark"),system:e("System","System")};return(0,n.jsx)("div",{className:"w-full px-1 pt-1 pb-1",children:(0,n.jsx)("div",{className:"flex items-stretch w-full gap-2 justify-stretch",children:Object.entries(x).map(e=>{let[c,{icon:d}]=e;return(0,n.jsxs)(r.u,{disableHoverableContent:!0,children:[(0,n.jsx)(i.aJ,{asChild:!0,children:(0,n.jsx)(a.zx,{className:(0,l.cn)("w-full rounded-lg",{"bg-button-ghost-hover":s===c}),size:"icon",variant:"ghost",onClick:()=>t(c),value:c,children:(0,n.jsx)(d,{size:16})})}),(0,n.jsx)(r._v,{side:"bottom",children:(0,n.jsx)("p",{children:o[c]})})]},c)})})})}function m(){let{t:e}=(0,h.$G)("base"),{setTheme:t,theme:s}=(0,u.F)(),r={light:e("Light","Light"),dark:e("Dark","Dark"),system:e("System","System")};return(0,n.jsx)("div",{className:"w-full px-1 pb-1",children:(0,n.jsx)("div",{className:"flex items-stretch w-full gap-2 justify-stretch",children:Object.entries(x).map(e=>{let[i,{icon:o}]=e;return(0,n.jsxs)(a.zx,{className:(0,l.cn)(s===i&&"bg-button-ghost-hover","w-full rounded-2xl flex-col p-3 group","ring-1 ring-inset ring-toggle-border hover:ring-card-border-focus hover:bg-card-hover text-primary"),variant:"none",size:"none",onClick:()=>t(i),value:i,children:[(0,n.jsx)(o,{className:(0,l.cn)("group-hover:text-primary",s===i?"text-primary":"text-secondary"),size:20}),(0,n.jsx)("p",{children:r[i]})]},i)})})})}}}]);