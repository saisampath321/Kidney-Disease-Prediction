!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="39c28341-a504-46e1-9744-35f0ff586041",e._sentryDebugIdIdentifier="sentry-dbid-39c28341-a504-46e1-9744-35f0ff586041")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9046],{75006:function(e,t,s){var a={"./ar/base.json":[37043,7043],"./ar/chat.json":[76824,6824],"./ar/emojipicker.json":[62027,2027],"./ar/finance-cards.json":[35613,5613],"./ar/loading.json":[38155,8155],"./ar/settings.json":[54568,4568],"./ar/share.json":[7566,7566],"./ar/translation.json":[92696,2696],"./ar/upsell-x.json":[1048,1048],"./ar/upsell.json":[13276,3276],"./ar/workspace.json":[49534,9534],"./bn-BD/base.json":[8315,8315],"./bn-BD/chat.json":[10823,823],"./bn-BD/emojipicker.json":[6202,6202],"./bn-BD/finance-cards.json":[20671,671],"./bn-BD/loading.json":[30223,223],"./bn-BD/settings.json":[70708,708],"./bn-BD/share.json":[71185,1185],"./bn-BD/translation.json":[83084,3084],"./bn-BD/upsell-x.json":[64545,4545],"./bn-BD/upsell.json":[36585,6585],"./bn-BD/workspace.json":[24340,4340],"./cs-CZ/base.json":[13281,3281],"./cs-CZ/chat.json":[63548,3548],"./cs-CZ/emojipicker.json":[29607,9607],"./cs-CZ/finance-cards.json":[77266,7266],"./cs-CZ/loading.json":[32756,2756],"./cs-CZ/settings.json":[10079,79],"./cs-CZ/share.json":[6098,6098],"./cs-CZ/translation.json":[81093,1093],"./cs-CZ/upsell-x.json":[23035,3035],"./cs-CZ/upsell.json":[93715,3715],"./cs-CZ/workspace.json":[92960,2960],"./de/base.json":[91296,1296],"./de/chat.json":[97961,7961],"./de/emojipicker.json":[34678,4678],"./de/finance-cards.json":[83489,3489],"./de/loading.json":[66057,6057],"./de/settings.json":[49919,9919],"./de/share.json":[4605,4605],"./de/translation.json":[40418,418],"./de/upsell-x.json":[80580,580],"./de/upsell.json":[32620,2620],"./de/workspace.json":[30537,537],"./en/base.json":[83514,3514],"./en/chat.json":[82200,2200],"./en/emojipicker.json":[70975,975],"./en/finance-cards.json":[64190,4190],"./en/loading.json":[77239,7239],"./en/settings.json":[37192,7192],"./en/share.json":[88946,8946],"./en/translation.json":[17352,7352],"./en/upsell-x.json":[90042,8889],"./en/upsell.json":[10100,100],"./en/workspace.json":[29929,9929],"./es/base.json":[9787,9787],"./es/chat.json":[21958,1958],"./es/emojipicker.json":[84866,4866],"./es/finance-cards.json":[12266,2266],"./es/loading.json":[61324,1324],"./es/settings.json":[15661,5661],"./es/share.json":[36810,9811],"./es/translation.json":[28555,8555],"./es/upsell-x.json":[69901,3224],"./es/upsell.json":[73746,3746],"./es/workspace.json":[34613,4613],"./fa-IR/base.json":[24397,4397],"./fa-IR/chat.json":[15253,5253],"./fa-IR/emojipicker.json":[99014,9014],"./fa-IR/finance-cards.json":[62288,2288],"./fa-IR/loading.json":[74007,4007],"./fa-IR/settings.json":[43656,3656],"./fa-IR/share.json":[67383,7383],"./fa-IR/translation.json":[40994,994],"./fa-IR/upsell-x.json":[74834,4834],"./fa-IR/upsell.json":[72169,2169],"./fa-IR/workspace.json":[75696,5696],"./fil-PH/base.json":[37719,7719],"./fil-PH/chat.json":[18854,8854],"./fil-PH/emojipicker.json":[17785,7785],"./fil-PH/finance-cards.json":[41648,1648],"./fil-PH/loading.json":[61930,1930],"./fil-PH/settings.json":[29434,9434],"./fil-PH/share.json":[38960,8960],"./fil-PH/translation.json":[31221,1221],"./fil-PH/upsell-x.json":[38018,8018],"./fil-PH/upsell.json":[79959,9959],"./fil-PH/workspace.json":[24966,4966],"./fr/base.json":[43218,3013],"./fr/chat.json":[6288,6288],"./fr/emojipicker.json":[5629,5629],"./fr/finance-cards.json":[96891,6891],"./fr/loading.json":[49816,9816],"./fr/settings.json":[17118,7118],"./fr/share.json":[5571,5571],"./fr/translation.json":[21899,1899],"./fr/upsell-x.json":[35474,5474],"./fr/upsell.json":[41128,1128],"./fr/workspace.json":[94105,4105],"./he-IL/base.json":[18353,8353],"./he-IL/chat.json":[30797,797],"./he-IL/emojipicker.json":[9189,9189],"./he-IL/finance-cards.json":[91305,1305],"./he-IL/loading.json":[86202,6833],"./he-IL/settings.json":[64291,4291],"./he-IL/share.json":[53340,3340],"./he-IL/translation.json":[34790,4790],"./he-IL/upsell-x.json":[49585,9585],"./he-IL/upsell.json":[54875,4875],"./he-IL/workspace.json":[37664,7664],"./hi-IN/base.json":[53237,3237],"./hi-IN/chat.json":[47850,7850],"./hi-IN/emojipicker.json":[74386,4386],"./hi-IN/finance-cards.json":[6167,6167],"./hi-IN/loading.json":[97810,7810],"./hi-IN/settings.json":[87968,7968],"./hi-IN/share.json":[9404,9404],"./hi-IN/translation.json":[68882,8882],"./hi-IN/upsell-x.json":[27100,7100],"./hi-IN/upsell.json":[95225,5225],"./hi-IN/workspace.json":[72881,2881],"./hu-HU/base.json":[94654,4654],"./hu-HU/chat.json":[22052,2052],"./hu-HU/emojipicker.json":[78129,8129],"./hu-HU/finance-cards.json":[95799,5799],"./hu-HU/loading.json":[12278,2278],"./hu-HU/settings.json":[14524,4524],"./hu-HU/share.json":[62922,2922],"./hu-HU/translation.json":[71793,1793],"./hu-HU/upsell-x.json":[30424,424],"./hu-HU/upsell.json":[54136,4136],"./hu-HU/workspace.json":[25e3,5e3],"./id/base.json":[21606,1606],"./id/chat.json":[70139,139],"./id/emojipicker.json":[26023,6023],"./id/finance-cards.json":[84393,4393],"./id/loading.json":[2578,2578],"./id/settings.json":[31328,1328],"./id/share.json":[57581,7581],"./id/translation.json":[70933,933],"./id/upsell-x.json":[5274,5274],"./id/upsell.json":[72198,2198],"./id/workspace.json":[7427,7427],"./it/base.json":[38034,8034],"./it/chat.json":[56785,6785],"./it/emojipicker.json":[56877,6877],"./it/finance-cards.json":[98636,8636],"./it/loading.json":[39355,9355],"./it/settings.json":[21533,1533],"./it/share.json":[25271,5271],"./it/translation.json":[58783,8783],"./it/upsell-x.json":[78094,8094],"./it/upsell.json":[79846,9846],"./it/workspace.json":[24083,4083],"./ja/base.json":[69256,9256],"./ja/chat.json":[74204,4204],"./ja/emojipicker.json":[17014,7014],"./ja/finance-cards.json":[36136,6136],"./ja/loading.json":[32590,2590],"./ja/settings.json":[85054,5054],"./ja/share.json":[52321,2321],"./ja/translation.json":[62560,2560],"./ja/upsell-x.json":[28022,8022],"./ja/upsell.json":[92170,2170],"./ja/workspace.json":[93477,3477],"./ko/base.json":[26131,6131],"./ko/chat.json":[68671,8671],"./ko/emojipicker.json":[77829,7829],"./ko/finance-cards.json":[90965,965],"./ko/loading.json":[20852,852],"./ko/settings.json":[72798,2798],"./ko/share.json":[43761,3761],"./ko/translation.json":[77260,7260],"./ko/upsell-x.json":[51002,1002],"./ko/upsell.json":[13658,3658],"./ko/workspace.json":[84761,4761],"./ms-MY/base.json":[37665,7665],"./ms-MY/chat.json":[68871,8871],"./ms-MY/emojipicker.json":[97898,7898],"./ms-MY/finance-cards.json":[84187,4187],"./ms-MY/loading.json":[84199,4199],"./ms-MY/settings.json":[253,253],"./ms-MY/share.json":[37205,7205],"./ms-MY/translation.json":[83012,3012],"./ms-MY/upsell-x.json":[88001,8001],"./ms-MY/upsell.json":[71253,1253],"./ms-MY/workspace.json":[34956,4956],"./nl/base.json":[32884,2884],"./nl/chat.json":[77799,7799],"./nl/emojipicker.json":[29692,9692],"./nl/finance-cards.json":[1911,1911],"./nl/loading.json":[35904,8453],"./nl/settings.json":[2280,2280],"./nl/share.json":[11319,1319],"./nl/translation.json":[68447,8447],"./nl/upsell-x.json":[76273,6273],"./nl/upsell.json":[43302,3302],"./nl/workspace.json":[39340,9340],"./pl/base.json":[15019,5019],"./pl/chat.json":[21828,1828],"./pl/emojipicker.json":[22872,2872],"./pl/finance-cards.json":[18759,8759],"./pl/loading.json":[66885,6885],"./pl/settings.json":[23450,3450],"./pl/share.json":[91860,1860],"./pl/translation.json":[70938,938],"./pl/upsell-x.json":[66750,6750],"./pl/upsell.json":[32932,2932],"./pl/workspace.json":[56773,6773],"./pt/base.json":[5514,5514],"./pt/chat.json":[93804,3804],"./pt/emojipicker.json":[90065,65],"./pt/finance-cards.json":[95558,5558],"./pt/loading.json":[8583,8583],"./pt/settings.json":[15344,5344],"./pt/share.json":[95700,5700],"./pt/translation.json":[21572,1572],"./pt/upsell-x.json":[75649,5649],"./pt/upsell.json":[25,25],"./pt/workspace.json":[9161,9161],"./ro-RO/base.json":[13836,3836],"./ro-RO/chat.json":[7420,7420],"./ro-RO/emojipicker.json":[83502,3502],"./ro-RO/finance-cards.json":[97816,7816],"./ro-RO/loading.json":[44493,4493],"./ro-RO/settings.json":[76575,6575],"./ro-RO/share.json":[32965,2965],"./ro-RO/translation.json":[23247,3247],"./ro-RO/upsell-x.json":[61166,1166],"./ro-RO/upsell.json":[23218,3218],"./ro-RO/workspace.json":[86738,6738],"./ru/base.json":[67742,7742],"./ru/chat.json":[79817,9817],"./ru/emojipicker.json":[21020,1020],"./ru/finance-cards.json":[33380,3380],"./ru/loading.json":[28395,8395],"./ru/settings.json":[61157,1157],"./ru/share.json":[92660,2660],"./ru/translation.json":[37469,845],"./ru/upsell-x.json":[64519,4519],"./ru/upsell.json":[26511,6511],"./ru/workspace.json":[60775,775],"./sv-SE/base.json":[92870,2870],"./sv-SE/chat.json":[35645,5645],"./sv-SE/emojipicker.json":[13415,3415],"./sv-SE/finance-cards.json":[41310,1310],"./sv-SE/loading.json":[50197,197],"./sv-SE/settings.json":[7499,7499],"./sv-SE/share.json":[48287,8287],"./sv-SE/translation.json":[40059,59],"./sv-SE/upsell-x.json":[44283,4283],"./sv-SE/upsell.json":[58826,8826],"./sv-SE/workspace.json":[77286,7286],"./sv/base.json":[71275,1275],"./sv/chat.json":[40758,758],"./sv/emojipicker.json":[17899,7899],"./sv/finance-cards.json":[42480,2480],"./sv/loading.json":[10048,48],"./sv/settings.json":[30791,791],"./sv/share.json":[7215,7215],"./sv/translation.json":[16636,6636],"./sv/upsell-x.json":[78265,8265],"./sv/upsell.json":[12635,2635],"./sv/workspace.json":[30493,493],"./th/base.json":[1800,1800],"./th/chat.json":[25745,5745],"./th/emojipicker.json":[82889,2889],"./th/finance-cards.json":[39271,9271],"./th/loading.json":[19288,9288],"./th/settings.json":[52235,2235],"./th/share.json":[5321,5321],"./th/translation.json":[81203,1203],"./th/upsell-x.json":[19078,9078],"./th/upsell.json":[91578,1578],"./th/workspace.json":[13965,3965],"./tr/base.json":[61459,1459],"./tr/chat.json":[30416,416],"./tr/emojipicker.json":[16375,6375],"./tr/finance-cards.json":[69078,1292],"./tr/loading.json":[11465,1465],"./tr/settings.json":[74816,4816],"./tr/share.json":[8798,8798],"./tr/translation.json":[4080,4080],"./tr/upsell-x.json":[94216,7504],"./tr/upsell.json":[40350,350],"./tr/workspace.json":[33098,3098],"./uk-UA/base.json":[89584,9584],"./uk-UA/chat.json":[12024,2024],"./uk-UA/emojipicker.json":[22120,2120],"./uk-UA/finance-cards.json":[18254,8254],"./uk-UA/loading.json":[80958,958],"./uk-UA/settings.json":[18160,8160],"./uk-UA/share.json":[78840,8840],"./uk-UA/translation.json":[21341,1341],"./uk-UA/upsell-x.json":[17565,7565],"./uk-UA/upsell.json":[26606,6606],"./uk-UA/workspace.json":[35573,5573],"./vi/base.json":[80506,506],"./vi/chat.json":[98036,8036],"./vi/emojipicker.json":[20972,972],"./vi/finance-cards.json":[96269,6269],"./vi/loading.json":[59683,9683],"./vi/settings.json":[75991,5991],"./vi/share.json":[54724,4724],"./vi/translation.json":[43579,3579],"./vi/upsell-x.json":[69843,9843],"./vi/upsell.json":[20773,773],"./vi/workspace.json":[11814,1814],"./zh-TW/base.json":[98695,8695],"./zh-TW/chat.json":[23693,3693],"./zh-TW/emojipicker.json":[30039,39],"./zh-TW/finance-cards.json":[43908,3908],"./zh-TW/loading.json":[65687,5687],"./zh-TW/settings.json":[32659,2659],"./zh-TW/share.json":[78038,8038],"./zh-TW/translation.json":[4497,4497],"./zh-TW/upsell-x.json":[83756,3756],"./zh-TW/upsell.json":[13180,3180],"./zh-TW/workspace.json":[81885,1885],"./zh/base.json":[39416,9416],"./zh/chat.json":[44249,4249],"./zh/emojipicker.json":[43897,3897],"./zh/finance-cards.json":[14706,4706],"./zh/loading.json":[55334,5334],"./zh/settings.json":[95236,5236],"./zh/share.json":[54554,4554],"./zh/translation.json":[929,929],"./zh/upsell-x.json":[52607,2607],"./zh/upsell.json":[90048,9646],"./zh/workspace.json":[37726,7726]};function n(e){if(!s.o(a,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],n=t[0];return s.e(t[1]).then(function(){return s.t(n,19)})}n.keys=function(){return Object.keys(a)},n.id=75006,e.exports=n},77215:function(e,t,s){"use strict";s.d(t,{t:function(){return a}}),s(58568);var a=(0,s(14308).$)("f0758cc0b4308f0f79cffc3a906bcc72612271fa")},85792:function(e,t,s){"use strict";s.d(t,{j:function(){return z}});var a=s(2899),n=s(69492),r=s(49810),i=s(56672),o=s(4694),l=s(81211),c=s(6087),d=s(34116),u=s(94408),p=s(72242),m=s(48792),f=s(65395),h=s(32875),x=s(12707),g=s(67206),b=s(68402),j=s(43010),v=s(76072),y=s(52457),w=s(65671),k=s(21333),N=s(70702),C=s(76038),S=s(37446);let I=e=>{let{metadata:t,localFile:s,className:n}=e,{ASSET_SERVER_URL:i}=(0,C.O)(),{parsedFileUri:o,fileUri:l}=t,c=o.length>0?o:l,{data:d,isError:u,isLoading:m}=(0,g.aM)({queryKey:["asset",c],queryFn:()=>(0,r.Vh)(i,c)}),f=s&&URL.createObjectURL(s);return u||!f&&(m||!d)?(0,a.jsx)("figure",{className:(0,p.cn)("grid w-10 aspect-square place-items-center bg-fg-primary/10",n),children:(0,a.jsx)(E,{mimeType:t.thirdPartyFileMimeType||t.fileMimeType,className:"size-4 shrink-0"})}):(0,a.jsxs)("figure",{className:(0,p.cn)("relative flex-shrink-0 aspect-square rounded-s-xl overflow-hidden",n),children:[(0,a.jsx)("img",{alt:"",className:(0,p.cn)("h-full mx-auto object-cover"),src:d||f}),s&&!d&&(0,a.jsx)("div",{className:"inset-0 absolute grid place-items-center",children:(0,a.jsx)(S.$,{className:"size-4",role:"status",size:"xs"})})]})},E=e=>{let{mimeType:t,className:s}=e,{t:n}=(0,N.$G)("base"),i=t.toLowerCase();return i.includes("/csv")?(0,a.jsx)(b.Z,{className:s,role:"img","aria-label":n("asset-chip-table.label","Table File")}):i.includes("application/pdf")||i.includes("text/")||i.includes("markdown")?(0,a.jsx)(j.Z,{className:s,role:"img","aria-label":n("asset-chip-text.label","Text File")}):i.includes("image/")?(0,a.jsx)(v.Z,{className:s,role:"img","aria-label":n("asset-chip-image.label","Image File")}):i.includes(r.Hu)?(0,a.jsx)(m.Z,{className:(0,p.cn)("text-[#4285F4]",s),role:"img","aria-label":n("asset-chip-google-docs.label","Google Docs")}):i.includes(r.Vb)?(0,a.jsx)(f.Z,{className:(0,p.cn)("text-[#34A853]",s),role:"img","aria-label":n("asset-chip-google-sheets.label","Google Sheets")}):i.includes(r.JY)?(0,a.jsx)(h.Z,{className:(0,p.cn)("text-[#FBBC04]",s),role:"img","aria-label":n("asset-chip-google-slides.label","Google Slides")}):i.includes(r.t0)||i.includes(r.AB)?(0,a.jsx)(x.RjO,{className:(0,p.cn)("text-[#4285F4]",s),role:"img","aria-label":n("asset-chip-microsoft-word.label","Microsoft Word")}):i.includes(r.vU)||i.includes(r.hW)?(0,a.jsx)(x.Fqh,{className:(0,p.cn)("text-[#34A853]",s),role:"img","aria-label":n("asset-chip-microsoft-excel.label","Microsoft Excel")}):i.includes(r.vG)||i.includes(r.LA)?(0,a.jsx)(x.oaQ,{className:(0,p.cn)("text-[#FBBC04]",s),role:"img","aria-label":n("asset-chip-microsoft-powerpoint.label","Microsoft PowerPoint")}):(0,a.jsx)(y.Z,{className:s,role:"img","aria-label":n("asset-chip-generic.label","Generic File")})},_=e=>{let{metadata:t,isShared:s,isDeleted:n,localFile:r,className:i}=e,{t:o}=(0,N.$G)("base"),l=(0,p.cn)("shrink-0",i);return void 0===t?(0,a.jsx)("figure",{className:(0,p.cn)("grid w-10 aspect-square place-items-center bg-fg-primary/10 rounded-s-xl",l),children:(0,a.jsx)(S.$,{className:"size-4",role:"status",size:"xs"})}):t instanceof Error?(0,a.jsx)("figure",{className:(0,p.cn)("grid w-10 aspect-square place-items-center bg-fg-primary/10 rounded-s-xl",l),children:(0,a.jsx)(w.Z,{className:"size-4",role:"alert","aria-label":o("asset-chip-alert.label","Error")})}):!t.fileMimeType.startsWith("image/")||s||n?(0,a.jsx)("figure",{className:(0,p.cn)("grid w-10 aspect-square place-items-center bg-fg-primary/10 rounded-s-xl",l),children:(0,a.jsx)(E,{mimeType:n?"":t.thirdPartyFileMimeType||t.fileMimeType,className:"size-4"})}):(0,a.jsx)(I,{localFile:r,metadata:t,className:i})};function T(e){let{fileName:t,metadata:s,localFile:n,isShared:r,isDisabled:i,isFileSelected:o,showRemoveIcon:l,handleClick:m,handleRemove:f,isDeleted:h,showTrashRemoveIcon:x,labelClassName:g,variant:b="chip",allowCompact:j=!1}=e,{t:v}=(0,N.$G)("base"),y=v("asset-chip.deleted","Deleted file"),w=!(s instanceof Error)&&((null==s?void 0:s.fileMimeType.startsWith("image/"))||(null==n?void 0:n.type.startsWith("image/")))&&j,C=(0,a.jsxs)("div",{className:(0,p.cn)("flex flex-row items-center text-sm transition ease-in-out gap-2 relative group/chip",r||i?"cursor-default text-secondary":"cursor-pointer text-primary",{"bg-chip border border-border-l1 hover:bg-button-secondary-hover px-3 rounded-xl h-10":"chip"===b,"justify-between pr-1.5":l,"bg-button-secondary-hover":o,"animate-pulse":void 0===s,"text-fg-secondary":s instanceof Error,"px-0 [&>figure]:w-full [&>figure]:h-full p-0.5":w}),onClick:m,children:[(0,a.jsx)(_,{localFile:n,metadata:s,isShared:r,isDeleted:h,className:(0,p.cn)({"rounded-lg w-8 h-8":"list-item"===b,"-ms-3 w-10":"chip"===b,"ms-0 me-0 rounded-[9px] [&>img]:h-full [&>img]:w-full":w})}),!w&&(0,a.jsx)("span",{className:(0,p.cn)("truncate max-w-full me-auto sm:max-w-[250px]",g),children:h?y:t}),l&&(0,a.jsx)(d.zx,{className:w?"absolute transition-all scale-50 opacity-0 -top-1.5 -right-1.5 group-hover/chip:opacity-100 group-hover/chip:scale-100 border border-border-l1 bg-surface-base hover:bg-surface-l2":"rounded-full ml-1 p-0.5 flex-shrink-0",variant:"ghostSecondary",size:"iconSm","aria-label":v("asset-chip-remove.label","Remove"),onClick:f,children:x?(0,a.jsx)(k.Z,{className:"text-red-400",size:16}):(0,a.jsx)(c.b0,{className:"size-4"})})]});return"list-item"===b?C:(0,a.jsxs)(u.u,{delayDuration:300,disableHoverableContent:!0,children:[(0,a.jsx)(u.aJ,{asChild:!0,children:C}),(0,a.jsx)(u._v,{side:"bottom",children:s instanceof Error?s.message:t})]})}function z(e){let{fileName:t,metadata:s,localFile:c,onClick:d,onRemove:u,isShared:p,isDisabled:m,removeRequiresConfirmation:f,isDeleted:h,asset:x,labelClassName:g,hideEdit:b,allowCompact:j,variant:v}=e,y=(0,l.g)(),[w,k]=(0,o.useState)(!f),N=(0,n.gK)(i.Z("sidePanelContent")),C=(0,n.gK)(i.Z("setSidePanelContent")),S=void 0===s,I=s instanceof Error,E=(0,o.useMemo)(()=>{if(!S&&!I)return function(e){var t;let s=null===(t=e.thirdPartyFileMimeType)||void 0===t?void 0:t.toLowerCase();if(s){if(s.includes(r.Hu))return"https://docs.google.com/document/d/".concat(e.thirdPartyFileId);if(s.includes(r.Vb))return"https://docs.google.com/spreadsheets/d/".concat(e.thirdPartyFileId);if(s.includes(r.JY))return"https://docs.google.com/presentation/d/".concat(e.thirdPartyFileId);if([r.t0,r.AB,r.vU,r.hW,r.vG,r.LA].some(e=>s.includes(e)))return"https://onedrive.live.com/view.aspx?resid=".concat(e.thirdPartyFileId)}}(s)},[I,S,s]),_=(0,o.useCallback)(()=>{E&&window.open(E,"_blank","noopener,noreferrer")},[E]),z=(0,o.useCallback)(e=>{e.stopPropagation(),w?null==u||u(null==x?void 0:x.assetId):k(!0)},[u,w,x]),Z=!!u&&!m&&(!f||y.SHOW_DELETE_ASSET),O=(0,o.useMemo)(()=>!S&&!I&&(null==N?void 0:N.type)==="asset"&&N.data.fileMetadataId===s.fileMetadataId,[S,I,N,s]),R=(0,o.useCallback)(()=>{if(!h&&!m&&!p&&!S&&!I){if(d){d(x);return}if(E){_();return}if(O){C(void 0);return}C({type:"asset",data:s,hideEdit:b})}},[O,m,s,d,p,S,I,x,C]);return(0,a.jsx)(T,{fileName:t,localFile:c,metadata:s,isShared:p,isDisabled:m||h,isFileSelected:O,showRemoveIcon:Z,handleClick:R,handleRemove:z,isDeleted:h,showTrashRemoveIcon:f&&w,labelClassName:g,variant:v,allowCompact:j})}},94853:function(e,t,s){"use strict";s.d(t,{R:function(){return q},t:function(){return $}});var a=s(2899),n=s(77215),r=s(69492),i=s(6087),o=s(34116),l=s(97404),c=s(28147),d=s(81211),u=s(69195),p=s(76038),m=s(4694),f=s(70702),h=s(75361),x=s(12363);let g={pt:"pt-PT","uk-UA":"uk",zh:"zh-CN","zh-TW":"zh-TW"},b=(e,t)=>{let{GOOGLE_APP_ID:s}=(0,p.O)(),{t:a}=(0,f.$G)("chat"),n=(0,r.gK)(e=>e.conversationId)||"no_conversation_id",i=(0,x.U)(),o=g[i]||i,[l,c]=(0,m.useState)(!0),[d,b]=(0,m.useState)(null);return(0,m.useEffect)(()=>{(async()=>{let e=document.createElement("script");e.src="https://apis.google.com/js/api.js",e.async=!0,e.onload=()=>{window.gapi.load("picker",()=>c(!1))},document.body.append(e)})().catch(h.Am.error)},[]),(0,m.useEffect)(()=>{var r;if(l||!e||!(null===(r=window.google)||void 0===r?void 0:r.picker))return;let i=new window.google.picker.DocsView(window.google.picker.ViewId.DOCS).setMode(window.google.picker.DocsViewMode.LIST).setIncludeFolders(!0).setLabel(a("google-drive-picker.file-tab.all","All")),c=new window.google.picker.DocsView(window.google.picker.ViewId.DOCS).setMode(window.google.picker.DocsViewMode.LIST).setIncludeFolders(!0).setOwnedByMe(!0).setLabel(a("google-drive-picker.file-tab.owned-by-me","Owned by Me"));b(new window.google.picker.PickerBuilder().addView(i).addView(c).hideTitleBar().setOAuthToken(e).setAppId(s).setLocale(o).enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED).setMaxItems(u.lH).setCallback(async e=>{var s;"picked"===e.action&&(null===(s=e.docs)||void 0===s?void 0:s.length)&&await Promise.all(e.docs.map(e=>{var s,a;return t(null!==(s=e.name)&&void 0!==s?s:"Untitled document",null!==(a=e.mimeType)&&void 0!==a?a:"application/vnd.google-apps.document","GOOGLE_DRIVE_FILE_SOURCE",e.id,n)}))}).build())},[l,e,s,o,t,n,a]),{setIsPickerOpen:(0,m.useCallback)(e=>{d&&d.setVisible(e)},[d]),isLoading:l}};var j=s(8781),v=s(25634),y=s(74542),w=s(10629),k=s(74239),N=s(67206),C=s(72242),S=s(3189),I=s(41307),E=s(72086),_=s(38953),T=s(43010),z=s(3954),Z=s(3667),O=s(56672),R=s(47026),A=s(83711),D=s(38040),L=s(65671),P=s(41238),M=s(15571),K=s(63441),F=s(18755);let U=(0,s(48038).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),G=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(F.f,{ref:t,className:(0,C.cn)(U(),s),...n})});function B(e){let{onTextContentUpload:t}=e,[s,n]=(0,m.useState)(!1),{t:r}=(0,f.$G)("settings"),[i,c]=(0,m.useState)(!1),{register:d,handleSubmit:u,formState:{errors:p},reset:h}=(0,P.cI)({defaultValues:{fileName:"",textValue:""}}),x=async e=>{c(!0);try{let s=e.fileName.trim().length>0?e.fileName.trim():r("add-text-content-form.filename-placeholder","pasted-text.txt");t(s,e.textValue),h(),n(!1)}catch(e){(0,y.H)("add-text-content-form.handleTextContentUpload",e)}finally{c(!1)}};return(0,D.y)(A.FG,()=>{u(x)().catch(e=>{(0,y.H)("add-text-content-form.handleTextContentUpload",e)})},[u,x]),(0,a.jsxs)(l.Ph,{open:s,onOpenChange:n,children:[(0,a.jsxs)(l.kt,{className:"flex flex-row pr-3 py-2.5 gap-2",children:[(0,a.jsx)(T.Z,{size:16,className:"opacity-70"}),r("attach-dropdown.text-file","Add text content")]}),(0,a.jsx)(l.cq,{children:(0,a.jsx)(l.TG,{sideOffset:8,className:"space-y-1",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("form",{onSubmit:u(x),className:"flex flex-col gap-2 min-w-80 p-1",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(G,{htmlFor:"fileName",className:"text-xs ps-2",children:r("add-text-content-form.filename-label","File name")}),(0,a.jsx)(K.I,{...d("fileName"),placeholder:r("add-text-content-form.filename-placeholder","pasted-text.txt"),className:"border border-toggle-border rounded-xl",role:"menuitem"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(G,{htmlFor:"textValue",className:"text-xs ps-2",children:r("add-text-content-form.text-label","Text content")}),(0,a.jsx)(M.Z,{className:(0,C.cn)("w-full p-3 text-sm align-bottom bg-transparent focus:outline-none text-primary rounded-xl","border border-toggle-border focus-visible:ring-1 focus-visible:ring-ring"),...d("textValue",{required:r("add-text-content-form.text-required","Text content is required"),maxLength:{value:3e5,message:r("add-text-content-form.text-max-length","Text content must be less than {{maxLength}} characters",{maxLength:3e5})}}),placeholder:r("add-text-content-form.placeholder","Enter text content..."),style:{resize:"none"},minRows:4,maxRows:8,role:"menuitem"})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between gap-2 px-0 min-h-10",children:[(0,a.jsx)("div",{className:(0,C.cn)("flex flex-row items-center gap-1 text-xs ps-2",p.textValue?"text-red-500":"opacity-0"),children:p.textValue&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:p.textValue.message}),(0,a.jsx)("span",{className:"flex flex-row items-center gap-1",children:(0,a.jsx)(L.Z,{className:"size-4 shrink-0"})})]})}),(0,a.jsx)(l.Xi,{asChild:!0,children:(0,a.jsx)(o.zx,{type:"submit",variant:"outline",className:"bg-transparent text-primary shadow-none rounded-xl hover:bg-button-ghost-hover m-[1px]",disabled:i,children:r("add-text-content-form.submit","Upload")})})]})]})})})]})}G.displayName=F.f.displayName;var H=s(78394),W=s(85792);function q(e){var t,s;let{label:n,disabled:i=!1,queryBarExpanded:o=!0,totalFileCount:l,handleClickUpload:c}=e,p=(0,r.gK)(O.Z("conversationId"))||"no_conversation_id",{t:x}=(0,f.$G)("base"),{client:g}=(0,k.useStatsigClient)(),b=(0,d.g)(),j=(0,I.O)(O.Z("listByConversationId")),v=(0,I.O)(O.Z("attachListByConversationId")),w=(0,I.O)(O.Z("lisertAttachByConversationId")),N=j[p]||[],C=v[p]||[],E=(0,S.a)(O.Z("listByReq")),_=(0,I.O)(O.Z("delistAttachByConversationId")),T=(0,S.a)(O.Z("fetchListAssets")),z=(0,S.a)(O.Z("fetchDeleteAssetMetadata")),Z=(0,I.O)(e=>e.fetchAttachThirdPartyFile),{attachFiles:R}=(0,u.GC)();(0,m.useEffect)(()=>{T({pageSize:9,orderBy:"ORDER_BY_LAST_USE_TIME"}).catch(e=>(0,y.H)("attach-dropdown.fetchListAssets",e))},[]);let A=null!==(s=null===(t=Object.values(E)[0])||void 0===t?void 0:t.assets)&&void 0!==s?s:[],D=(0,m.useCallback)(e=>{!e||C.some(t=>t.assetId===e.assetId)||(N.length+C.length+1<=u.lH?(w(e,p),g.logEvent("attach-dropdown-asset-clicked",e.assetId,{assetId:e.assetId})):h.Am.error(x("query-files-limit-error","Max number of files allowed is {{maxNumberOfFiles}}",{maxNumberOfFiles:u.lH})))},[w,p,N,C,g,x]),L=(0,m.useCallback)(async e=>{e&&(await z({assetId:e}).catch(e=>(0,y.H)("attach-dropdown.handleDeleteAsset",e)),_(p,e))},[p,_,z]);return(0,a.jsx)($,{label:n,disabled:i,queryBarExpanded:o,totalFileCount:l,inlineLabel:!1,handleClickUpload:c,onAttachAsset:D,showRecentAssetsForUpload:b.SHOW_RECENT_ASSETS_FOR_UPLOAD,assets:A,deleteAsset:L,handleUploadThirdParty:Z,attachFiles:R})}function $(e){var t,s;let{label:p,disabled:h=!1,queryBarExpanded:x=!0,totalFileCount:g,inlineLabel:S,handleClickUpload:I,onAttachAsset:O,assets:A,showRecentAssetsForUpload:D,deleteAsset:L,handleUploadThirdParty:P,className:M,attachFiles:K}=e,{t:F}=(0,f.$G)("base"),{client:U}=(0,k.useStatsigClient)(),G=(0,j.w)(),{data:q}=(0,v.h)(),$=null==q?void 0:null===(t=q.find(e=>"GOOGLE_DRIVE"===e.provider))||void 0===t?void 0:t.accessToken,Y=null==q?void 0:null===(s=q.find(e=>"MICROSOFT_ONEDRIVE"===e.provider))||void 0===s?void 0:s.accessToken,V=(0,d.g)(),X=(0,N.Db)({mutationFn:async()=>{let e=window.location.host,t="".concat(e.startsWith("localhost")?"http://":"https://").concat(e).concat(c.zS),s=await (0,n.t)(t,"GOOGLE_DRIVE",window.location.href);window.open(s||c.DA,"_blank")},onError:e=>{(0,y.H)("attach-dropdown.connect-google-drive",e),window.open(c.DA,"_blank")}}),Q=async()=>{U.logEvent("attach-dropdown-connect-google-drive-clicked"),X.mutate()},{setIsPickerOpen:J}=b($,P),ee=(0,m.useCallback)(()=>{U.logEvent("attach-dropdown-google-drive-picker-opened"),J(!0)},[J,U]),{connectOneDrive:et,openOneDrivePicker:es}=function(e){let{uploadThirdPartyFile:t,accessToken:s}=e,a=(0,r.gK)(e=>e.conversationId)||"no_conversation_id",[i,o]=(0,m.useState)(null),{client:l}=(0,k.useStatsigClient)(),d=(0,N.Db)({mutationFn:async()=>{let e=window.location.host,t="".concat(e.startsWith("localhost")?"http://":"https://").concat(e).concat(c.zS),s=await (0,n.t)(t,"MICROSOFT_ONEDRIVE",window.location.href);window.open(s||c.DA,"_blank")},onError:e=>{(0,y.H)("attach-dropdown.connect-one-drive",e),window.open(c.DA,"_blank")}}),p=async()=>{l.logEvent("attach-dropdown-connect-one-drive-clicked"),d.mutate()};(0,m.useEffect)(()=>()=>{i&&i.close()},[i]);let f=(0,m.useCallback)(()=>{if(!s)return;if(i&&!i.closed){i.focus();return}let e={sdk:"8.0",entry:{oneDrive:{}},authentication:{},messaging:{origin:window.location.origin,channelId:27},typesAndSources:{mode:"files",pivots:{oneDrive:!0,recent:!0}},selection:{mode:"multiple"}},n=new URLSearchParams({filePicker:JSON.stringify(e)}),r=window.open("","Picker","width=1080,height=680");if(o(r),r){let i;let c=r.document.createElement("form");c.setAttribute("action","https://onedrive.live.com/picker?".concat(n)),c.setAttribute("method","POST");let d=r.document.createElement("input");async function l(e){let n=e.data;switch(n.type){case"notification":n.data.notification;break;case"command":{i.postMessage({type:"acknowledge",id:e.data.id});let l=n.data;switch(l.command){case"authenticate":try{if(!s)throw Error("Unable to obtain a token.");i.postMessage({type:"result",id:e.data.id,data:{result:"token",token:s}})}catch(e){r&&r.close()}break;case"close":r&&r.close(),o(null);break;case"pick":try{await Promise.all(l.items.filter(e=>e.name.match(/\.([^.]+)$/)).map(e=>{let s=e.name.match(/\.([^.]+)$/)[1];return t(e.name,(0,u.iQ)(s),w.R_.OneDriveFileSource,e.id,a)})),i.postMessage({type:"result",id:e.data.id,data:{result:"success"}})}catch(t){i.postMessage({type:"result",id:e.data.id,data:{result:"error",error:{code:"unusableItem",message:t instanceof Error?t.message:"Unknown error"}}})}r&&r.close(),o(null);break;default:i.postMessage({type:"result",id:e.data.id,data:{result:"error",error:{code:"unsupportedCommand",message:l.command}}})}}}}d.setAttribute("type","hidden"),d.setAttribute("name","access_token"),d.setAttribute("value",s),c.appendChild(d),r.document.body.append(c),c.submit(),window.addEventListener("message",function(t){if(t.source&&t.source===r){let s=t.data;"initialize"===s.type&&s.channelId===e.messaging.channelId&&((i=t.ports[0]).addEventListener("message",l),i.start(),i.postMessage({type:"activate"}))}})}},[s,a,i,t]);return{openOneDrivePicker:(0,m.useCallback)(()=>{l.logEvent("attach-dropdown-onedrive-picker-opened"),f()},[f,l]),connectOneDrive:p}}({accessToken:Y,uploadThirdPartyFile:P}),ea=()=>(0,a.jsxs)(l.Xi,{className:"flex flex-row pr-3 py-2.5 gap-2",onClick:$?ee:Q,children:[(0,a.jsx)(E.Z,{size:16,className:"opacity-70"}),$?F("attach-dropdown.google-drive","Add from Google Drive"):F("attach-dropdown.connect-google-drive","Connect Google Drive")]}),en=()=>(0,a.jsxs)(l.Xi,{className:"flex flex-row pr-3 py-2.5 gap-2",onClick:Y?es:et,children:[(0,a.jsx)(R.Mwr,{size:16,className:"opacity-70"}),Y?F("attach-dropdown.one-drive","Add from Microsoft OneDrive"):F("attach-dropdown.connect-one-drive","Connect Microsoft OneDrive")]}),er=(0,m.useCallback)(async(e,t)=>{let s=new File([new Blob([t],{type:"text/plain"})],e,{type:"text/plain"});await K([s]),U.logEvent("upload_file",void 0,{location:"add-text-content-upload",fileLength:t.length.toString()})},[K,U]),ei=()=>D&&A.length>0?A.map(e=>(0,a.jsx)(l.Xi,{className:"p-1",children:(0,a.jsx)(Z.E.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"w-full max-w-64",children:(0,a.jsx)(W.j,{asset:e,fileName:e.name,metadata:(0,H.I)(e),onClick:O,onRemove:L,variant:"list-item"})})},e.assetId)):(0,a.jsx)(l.Xi,{className:"text-secondary cursor-default",disabled:!0,children:F("no-recent-files","No recent files")}),eo=(0,a.jsxs)(l.AW,{align:"start",children:[(0,a.jsxs)(l.Xi,{className:"flex flex-row pr-3 py-2.5 gap-2",onClick:I,children:[(0,a.jsx)(_.Z,{size:16,className:"opacity-70"}),F("attach-dropdown.local","Upload a file")]}),V.ENABLE_ADD_TEXT_CONTENT&&(0,a.jsx)(B,{onTextContentUpload:er}),V.ENABLE_GOOGLE_DRIVE&&(0,a.jsx)(ea,{}),V.ENABLE_MICROSOFT_ONEDRIVE&&(0,a.jsx)(en,{}),(0,a.jsxs)(l.Ph,{children:[(0,a.jsxs)(l.kt,{className:"flex flex-row pr-3 py-2.5 gap-2",children:[(0,a.jsx)(T.Z,{size:16,className:"opacity-70"}),F("attach-dropdown.recent","Recent")]}),(0,a.jsx)(l.cq,{children:(0,a.jsx)(l.TG,{sideOffset:8,className:"space-y-1",children:(0,a.jsx)(ei,{})})})]})]});return(0,a.jsxs)(l.h_,{children:[(0,a.jsx)(l.$F,{asChild:!0,children:(0,a.jsxs)(o.g$,{type:"button",variant:"secondary","aria-label":p,disabled:h,size:"pill",className:(0,C.cn)("group/attach-button relative px-2 transition-colors duration-100 bg-transparent border w-9 aspect-square border-border-l2 hover:bg-button-ghost-hover",S&&"w-full px-3",M),tooltipProps:{disableHoverableContent:!0,delayDuration:h?100:600},tooltipContentProps:{side:"bottom",className:"bg-fg-primary text-background"},tooltipContent:S?void 0:p,tabIndex:0,children:[!x&&!!g&&(0,a.jsx)("span",{className:"absolute size-4 text-[11px] flex justify-center items-center font-medium rounded-full -right-1 -top-1 bg-primary text-background",children:g}),(0,a.jsx)(i.Uj,{className:"text-fg-secondary group-hover/attach-button:text-fg-primary transition-colors duration-100",size:18}),S&&p]})}),G?(0,a.jsx)(()=>{let[e,t]=(0,m.useState)("main");return(0,a.jsx)(l.AW,{align:"start",className:"w-64",children:"main"===e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Xi,{className:"flex flex-row px-3 py-2.5 gap-2",onSelect:I,children:[(0,a.jsx)(_.Z,{size:16,className:"opacity-70"}),F("attach-dropdown.local","Upload a file")]}),V.ENABLE_GOOGLE_DRIVE&&(0,a.jsx)(ea,{}),V.ENABLE_MICROSOFT_ONEDRIVE&&(0,a.jsx)(en,{}),(0,a.jsxs)(l.Xi,{className:"flex flex-row px-3 py-2.5 gap-2",onSelect:e=>{e.preventDefault(),t("recent")},children:[(0,a.jsx)(T.Z,{size:16,className:"opacity-70"}),F("attach-dropdown.recent","Recent")]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Xi,{className:"flex flex-row px-3 py-2.5 gap-2",onSelect:e=>{e.preventDefault(),t("main")},children:[(0,a.jsx)(z.Z,{size:16}),F("back","Back")]}),(0,a.jsx)(ei,{})]})})},{}):eo]})}},93460:function(e,t,s){"use strict";s.d(t,{t:function(){return j}});var a=s(2899),n=s(6087),r=s(36270),i=s(34116),o=s(8781),l=s(33263),c=s(72242),d=s(62719),u=s(87325),p=s(44199),m=s(80893),f=s(4694),h=s(70702),x=s(81211),g=s(98700);function b(e){let{conversation:t,onEditStart:s,onDeleteStart:r,onToggleFavorite:l}=e,{t:d}=(0,h.$G)("base"),u=(0,o.w)(),p=(0,x.g)(),m=(0,f.useCallback)(e=>{e.stopPropagation(),window.open("/chat/".concat(t.conversationId),"_blank")},[t.conversationId]),b=(0,f.useCallback)(e=>{e.stopPropagation(),null==l||l(t.conversationId)},[l,t.conversationId]),j=(0,f.useCallback)(e=>{e.stopPropagation(),s(t.conversationId)},[s,t.conversationId]),v=(0,f.useCallback)(e=>{e.stopPropagation(),r(t.conversationId)},[r,t.conversationId]);return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!u&&(0,a.jsx)(i.g$,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:m,tooltipContent:d("New Tab","New Tab"),"aria-label":d("New Tab","New Tab"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(n.Lf,{size:16,className:"text-primary"})}),p.SHOW_FAVORITE_BUTTON&&l?(0,a.jsx)(i.g$,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:b,tooltipContent:t.starred?d("Un-star","Un-star"):d("Star","Star"),"aria-label":t.starred?d("Un-star","Un-star"):d("Star","Star"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(g.Z,{size:16,className:(0,c.cn)(t.starred&&"fill-primary")})}):null,(0,a.jsx)(i.g$,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:j,tooltipContent:d("Rename","Rename"),"aria-label":d("Rename","Rename"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(n.Mw,{size:16,className:"text-primary"})}),(0,a.jsx)(i.g$,{tabIndex:-1,variant:"ghost",size:"iconSm","aria-label":d("Delete","Delete"),onClick:v,tooltipContent:d("Delete","Delete"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(n.XH,{size:16,className:"text-primary"})})]})}function j(e){let{conversation:t,highlight:s,matchType:n,matchedWords:i,timeRange:d,isEditing:u,isDeleting:p,isSelected:x,isCurrent:g,newTitle:j,onNewTitleChange:C,onSelect:S,onEditStart:I,onDeleteStart:E,onToggleFavorite:_,onEditSave:T,onDeleteConfirm:z,onCancel:Z,className:O}=e,{t:R}=(0,h.$G)("base"),A=(0,o.w)(),D=(0,f.useMemo)(()=>t.title?t.title:t.createTime?R("conversation-missing-title","Chat on {{date}}",{date:new Date(t.createTime).toLocaleDateString()}):R("Untitled Chat","Untitled Chat"),[t,R]),L=(0,f.useMemo)(()=>"MATCH_MESSAGE"===n&&!!s,[n,s]),P=(0,f.useCallback)(()=>{T(t.conversationId)},[T,t.conversationId]),M=(0,f.useCallback)(e=>{e.stopPropagation(),"Enter"===e.key?P():"Escape"===e.key&&Z()},[P,Z]),K=(0,f.useCallback)(()=>{z(t.conversationId)},[z,t.conversationId]),{personaById:F}=(0,l.HG)(),U=(0,f.useMemo)(()=>{if(!(0,l.VO)(t.personaId))return;let e=F[t.personaId];if(e)return{...e,...(0,r.DB)(e.personaId)}},[t.personaId,F]),G=(0,f.useCallback)(e=>{!S||1===e.button||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),S(t.conversationId))},[S,t.conversationId]);return(0,a.jsxs)(a.Fragment,{children:[!u&&(0,a.jsx)(m.default,{href:"/chat/".concat(t.conversationId),className:"col-start-1 col-end-2 row-start-1 row-end-2 block z-10",onClick:G}),(0,a.jsxs)("div",{className:(0,c.cn)("flex cursor-pointer items-center gap-2 px-3 col-start-1 col-end-2 row-start-1 row-end-2",O),children:[u?(0,a.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:j,onKeyDown:M,autoFocus:!0,onChange:e=>{C(e.target.value)}}):(0,a.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[U&&(0,a.jsx)("span",{className:(0,c.cn)("[&>svg]:h-4 [&>svg]:w-4",U.colorClassName),children:U.icon}),(0,a.jsx)("div",{className:"truncate text-primary",children:"MATCH_TITLE"===n?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||0===t.length||"string"!=typeof e)return e;let s=t.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),n=RegExp("(".concat(s,")"),"gi"),r=e.split(n);return 1===r.length?e:r.map((e,t)=>t%2==1?(0,a.jsx)("span",{className:"text-primary font-extrabold",children:e},t):e)}(D,i):D}),g&&(0,a.jsx)(v,{children:R("Current","Current")})]}),L&&(0,a.jsx)(N,{text:s,matchedWords:i||[],className:"text-xs text-secondary mt-0.5 truncate"})]}),(0,a.jsx)("div",{className:"z-20",children:(x||A)&&!u&&!p?(0,a.jsx)(b,{conversation:t,onEditStart:I,onDeleteStart:E,onToggleFavorite:_}):u?(0,a.jsx)(y,{onCancel:Z,onSave:P}):p?(0,a.jsx)(w,{onCancel:Z,onConfirm:K}):(0,a.jsx)(k,{conversation:t,timeRange:d})})]})]})}function v(e){let{children:t}=e;return(0,a.jsx)("span",{className:(0,c.cn)("border border-border-l2 px-2 rounded-full","text-sm text-secondary flex flex-row items-center gap-1 text-nowrap"),children:t})}function y(e){let{onCancel:t,onSave:s}=e,{t:r}=(0,h.$G)("base");return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.g$,{tabIndex:-1,variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),t()},tooltipContent:r("Cancel","Cancel"),"aria-label":r("Cancel","Cancel"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(n.b0,{size:16,className:"text-fg-primary"})}),(0,a.jsx)(i.g$,{tabIndex:-1,variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),s()},tooltipContent:r("Save","Save"),"aria-label":r("Save","Save"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(p.Z,{size:16,className:"text-primary"})})]})}function w(e){let{onCancel:t,onConfirm:s}=e,{t:r}=(0,h.$G)("base");return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.g$,{tabIndex:-1,variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),t()},tooltipContent:r("Cancel","Cancel"),"aria-label":r("Cancel","Cancel"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(n.b0,{size:16,className:"text-primary"})}),(0,a.jsx)(i.g$,{tabIndex:-1,variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),s()},tooltipContent:r("Delete","Delete"),"aria-label":r("Delete","Delete"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(n.XH,{size:16,className:"text-red-400"})})]})}function k(e){let{conversation:t,timeRange:s}=e,n=(0,f.useMemo)(()=>{if(t.modifyTime||t.createTime)return function(e,t){let s=new Date(e);if("this-year"===t)return s.toLocaleDateString(u.ZP.language,{day:"numeric",month:"short"});if("older"===t)return s.toLocaleDateString(u.ZP.language,{day:"numeric",month:"short",year:"numeric"});{var a;let t=(0,d.U)(e,new Date,{unit:"day",locale:"en"}),s="day";return"today"===t&&(s=void 0),"yesterday"===t&&(s="hour"),(a=(0,d.U)(e,new Date,{unit:s,locale:u.ZP.language}))?a.charAt(0).toUpperCase()+a.slice(1):a}}(t.modifyTime||t.createTime,s)},[t.modifyTime,t.createTime,s]);return n?(0,a.jsx)("span",{className:(0,c.cn)("text-secondary whitespace-nowrap ml-2 hidden text-sm","md:inline md:group-hover/item:hidden","md:group-focus/item:hidden md:group-active/item:hidden"),children:n}):null}function N(e){let{text:t,matchedWords:s,className:n}=e;if(!t||!(null==s?void 0:s.length))return(0,a.jsx)(a.Fragment,{children:t});let r=s.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),i=RegExp("(".concat(r,")"),"gi"),o=t.split(i);return(0,a.jsx)("div",{className:n,children:o.map((e,t)=>s.some(t=>t.toLowerCase()===e.toLowerCase())?(0,a.jsx)("span",{className:(0,c.cn)("text-primary font-bold"),children:e},t):(0,a.jsx)(f.Fragment,{children:e},t))})}},30190:function(e,t,s){"use strict";s.d(t,{v:function(){return h}});var a=s(2899),n=s(34116),r=s(83711),i=s(81211),o=s(38040),l=s(72242),c=s(65671),d=s(73069),u=s(3667),p=s(4694),m=s(70702),f=s(15571);function h(e){let{value:t,onChange:s,isDirty:h,placeholder:x,onSave:g,onReset:b,disabled:j,textareaId:v}=e,y=(0,p.useRef)(null),{t:w}=(0,m.$G)("settings"),k=(0,p.useCallback)(e=>{s(e.target.value)},[s]),N=(0,p.useRef)(t);N.current=t;let C=(0,p.useCallback)(()=>{g(N.current)},[g]);(0,o.y)(r.FG,()=>{C()},[C]);let S=(0,p.useCallback)(()=>{b()},[b]);(0,p.useEffect)(()=>{y.current&&!j&&y.current.focus()},[j]);let I=(0,i.g)(),E=(0,p.useMemo)(()=>Number(I.MAX_CUSTOM_INSTRUCTIONS_LENGTH.value.maxLength),[]),_=(0,p.useMemo)(()=>t.length>E,[t,E]),T=(0,p.useMemo)(()=>{let e=Number(I.MAX_CUSTOM_INSTRUCTIONS_LENGTH.value.maxLength);return!!e&&t.length>Math.floor(.8*e)},[t,E]);return(0,a.jsxs)("div",{className:"relative flex flex-col gap-3",children:[(0,a.jsx)("div",{className:(0,l.cn)("w-full transition ease-in-out rounded-xl","border border-toggle-border",j&&"opacity-50"),children:(0,a.jsx)(f.Z,{ref:y,className:(0,l.cn)("w-full p-3 text-sm align-bottom bg-transparent focus:outline-none text-primary rounded-xl"),value:t,onChange:k,placeholder:x,style:{resize:"none"},minRows:4,maxRows:8,disabled:j,id:v})}),(0,a.jsxs)("div",{className:"flex flex-row justify-between gap-2 px-0 min-h-10",children:[(0,a.jsxs)("div",{className:(0,l.cn)("flex flex-row items-center gap-1 text-xs",_?"text-red-500":T?"text-secondary opacity-100":"opacity-0"),children:[(0,a.jsxs)("span",{children:[t.length," / ",E]}),_&&(0,a.jsx)("span",{className:"flex flex-row items-center gap-1",children:(0,a.jsx)(c.Z,{className:"size-4 shrink-0"})})]}),(0,a.jsx)(d.M,{children:h&&(0,a.jsxs)(u.E.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0,transition:{duration:.15}},exit:{opacity:0,y:-5,transition:{duration:.15}},className:(0,l.cn)("flex flex-row justify-end gap-2"),children:[(0,a.jsx)(n.zx,{variant:"ghostSecondary",size:"md",onClick:S,children:w("Discard","Discard")}),(0,a.jsx)(n.zx,{variant:"primary",size:"md",onClick:C,children:w("Save","Save")})]})})]})]})}},46850:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var a=s(2899),n=s(77119),r=s(80893),i=s(4694);let o=e=>{let{title:t,description:s,cta:o}=e,{routeToConversation:l}=(0,n.o)(),c=(0,i.useCallback)(()=>{l(void 0)},[]);return(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,a.jsxs)("div",{className:"flex flex-col max-w-xl text-center items-center justify-center px-4",children:[(0,a.jsx)("div",{className:"text-3xl font-medium",children:t}),(0,a.jsx)("div",{className:"mt-6 text-secondary",children:s}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(r.default,{href:"/",onClick:c,className:"focus:outline-none focus-visible:ring-1 focus-visible:ring-ring py-2 px-3 rounded-lg bg-button-secondary hover:bg-button-secondary-hover",children:o})})]})})}},65924:function(e,t,s){"use strict";s.d(t,{u:function(){return r}});var a=s(2899),n=s(72242);function r(e){let{children:t,className:s="",fadeSize:r="sm"}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex-1 flex flex-col gap-1 h-full overflow-y-auto py-1",{sm:"[mask-image:linear-gradient(to_bottom,transparent,black_4px,black_calc(100%_-_4px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_4px,black_calc(100%_-_4px),transparent)]",md:"[mask-image:linear-gradient(to_bottom,transparent,black_8px,black_calc(100%_-_8px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_8px,black_calc(100%_-_8px),transparent)]",lg:"[mask-image:linear-gradient(to_bottom,transparent,black_16px,black_calc(100%_-_16px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_16px,black_calc(100%_-_16px),transparent)]"}[r],s),children:t})}},93043:function(e,t,s){"use strict";s.d(t,{T:function(){return i}});var a=s(2899),n=s(4694),r=s(85792);function i(e){let{metadata:t,onRemoveFile:s,file:i,allowCompact:o=!1}=e,l=t instanceof Error,c=(0,n.useMemo)(()=>t&&!l?t.fileName||"":i?i.name:"Unknown",[t,l]),d=(0,n.useCallback)(()=>{i&&s&&s(i)},[i,s]);return(0,a.jsx)(r.j,{allowCompact:o,fileName:c,localFile:i,metadata:t,onRemove:d})}},40629:function(e,t,s){"use strict";s.d(t,{$1:function(){return eW},mO:function(){return eB},O9:function(){return eO},ci:function(){return eZ}});var a=s(2899),n=s(46242),r=s(4029),i=s(98700),o=s(37449),l=s(99456),c=s(75860),d=s(86015),u=s(13055),p=s(20203),m=s(78615),f=s(49068),h=s(13148),x=s(41591),g=s(63698),b=s(80831),j=s(79897),v=s(87960),y=s(89280),w=s(97818),k=s(5900),N=s(46784),C=s(86159),S=s(27117),I=s(96186),E=s(92988),_=s(79683),T=s(6642),z=s(16074),Z=s(86315),O=s(30974),R=s(27309),A=s(38208),D=s(12255),L=s(13854),P=s(16354),M=s(16851),K=s(61750),F=s(15976),U=s(30430),G=s(89642),B=s(88897),H=s(86552),W=s(4864),q=s(18176),$=s(98083),Y=s(491),V=s(19985),X=s(22110),Q=s(25942),J=s(86633),ee=s(32887),et=s(30523),es=s(17467),ea=s(69150),en=s(87048),er=s(11346),ei=s(63365),eo=s(17828),el=s(10075),ec=s(63590),ed=s(23479),eu=s(84202),ep=s(26910),em=s(68353),ef=s(24267),eh=s(97382),ex=s(45870),eg=s(4700),eb=s(17464),ej=s(72243),ev=s(30725),ey=s(72694),ew=s(73054),ek=s(3789),eN=s(84478),eC=s(38283),eS=s(80690),eI=s(86873),eE=s(28133),e_=s(338),eT=s(11919),ez=s(70702);let eZ={flag:n.Z,home:r.Z,star:i.Z,heart:o.Z,globe:l.Z,unlock:c.Z,smile:d.Z,shield:u.Z,bell:p.Z,mail:m.Z,phone:f.Z,user:h.Z,stethoscope:x.Z,calendar:g.Z,clock:b.Z,hourglass:j.Z,sun:v.Z,moon:y.Z,monitor:w.Z,umbrella:k.Z,leaf:N.Z,utensils:C.Z,bug:S.Z,fish:I.Z,bird:E.Z,cat:_.Z,"flask-conical":T.Z,rocket:z.Z,plane:Z.Z,car:O.Z,truck:R.Z,train:A.Z,camera:D.Z,video:L.Z,music:P.Z,headphones:M.Z,microscope:K.Z,archive:F.Z,"book-open":U.Z,zap:G.Z,wrench:B.Z,"sticky-note":H.Z,"cup-soda":W.Z,scale:q.Z,film:$.Z,palette:Y.Z,cpu:V.Z,calculator:X.Z,laptop:Q.Z,briefcase:J.Z,highlighter:ee.Z,"clipboard-list":et.Z,component:es.Z,building:ea.Z,flame:en.Z,play:er.Z,diamond:ei.Z,database:eo.Z,aperture:el.Z,glasses:ec.Z,shirt:ed.Z,banana:eu.Z,beer:ep.Z,apple:em.Z,carrot:ef.Z,cherry:eh.Z,gem:ex.Z,gamepad:eg.Z,"chef-hat":eb.Z,music2:ej.Z,"dollar-sign":ev.Z,coffee:ey.Z,tag:ew.Z,sailboat:ek.Z,"graduation-cap":eN.Z,anchor:eC.Z,pin:eS.Z,compass:eI.Z,code:eE.Z,droplet:e_.Z,box:eT.Z},eO=["gray","red","orange","yellow","lime","teal","green","blue","purple","pink"],eR={flag:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.flag.name",defaults:"Flag"}),home:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.home.name",defaults:"Home"}),star:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.star.name",defaults:"Star"}),heart:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.heart.name",defaults:"Heart"}),globe:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.globe.name",defaults:"Globe"}),unlock:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.unlock.name",defaults:"Unlock"}),smile:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.smile.name",defaults:"Smile"}),shield:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.shield.name",defaults:"Shield"}),bell:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.bell.name",defaults:"Bell"}),mail:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.mail.name",defaults:"Mail"}),phone:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.phone.name",defaults:"Phone"}),user:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.user.name",defaults:"User"}),stethoscope:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.stethoscope.name",defaults:"Stethoscope"}),calendar:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.calendar.name",defaults:"Calendar"}),clock:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.clock.name",defaults:"Clock"}),hourglass:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.hourglass.name",defaults:"Hourglass"}),sun:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.sun.name",defaults:"Sun"}),moon:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.moon.name",defaults:"Moon"}),monitor:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.monitor.name",defaults:"Monitor"}),umbrella:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.umbrella.name",defaults:"Umbrella"}),leaf:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.leaf.name",defaults:"Leaf"}),utensils:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.utensils.name",defaults:"Utensils"}),bug:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.bug.name",defaults:"Bug"}),fish:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.fish.name",defaults:"Fish"}),bird:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.bird.name",defaults:"Bird"}),cat:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.cat.name",defaults:"Cat"}),"flask-conical":(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.flask-conical.name",defaults:"Flask Conical"}),rocket:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.rocket.name",defaults:"Rocket"}),plane:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.plane.name",defaults:"Plane"}),car:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.car.name",defaults:"Car"}),truck:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.truck.name",defaults:"Truck"}),train:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.train.name",defaults:"Train"}),camera:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.camera.name",defaults:"Camera"}),video:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.video.name",defaults:"Video"}),music:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.music.name",defaults:"Music"}),headphones:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.headphones.name",defaults:"Headphones"}),microscope:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.microscope.name",defaults:"Microscope"}),archive:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.archive.name",defaults:"Archive"}),"book-open":(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.book-open.name",defaults:"Book Open"}),zap:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.zap.name",defaults:"Zap"}),wrench:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.wrench.name",defaults:"Wrench"}),"sticky-note":(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.sticky-note.name",defaults:"Sticky Note"}),"cup-soda":(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.cup-soda.name",defaults:"Cup Soda"}),scale:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.scale.name",defaults:"Scale"}),film:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.film.name",defaults:"Film"}),palette:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.palette.name",defaults:"Palette"}),cpu:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.cpu.name",defaults:"CPU"}),calculator:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.calculator.name",defaults:"Calculator"}),laptop:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.laptop-2.name",defaults:"Laptop"}),briefcase:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.briefcase.name",defaults:"Briefcase"}),highlighter:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.highlighter.name",defaults:"Highlighter"}),"clipboard-list":(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.clipboard-list.name",defaults:"Clipboard List"}),component:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.component.name",defaults:"Component"}),building:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.building-2.name",defaults:"Building"}),flame:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.flame.name",defaults:"Flame"}),play:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.play.name",defaults:"Play"}),diamond:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.diamond.name",defaults:"Diamond"}),database:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.database.name",defaults:"Database"}),aperture:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.aperture.name",defaults:"Aperture"}),glasses:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.glasses.name",defaults:"Glasses"}),shirt:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.shirt.name",defaults:"Shirt"}),banana:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.banana.name",defaults:"Banana"}),beer:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.beer.name",defaults:"Beer"}),apple:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.apple.name",defaults:"Apple"}),carrot:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.carrot.name",defaults:"Carrot"}),cherry:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.cherry.name",defaults:"Cherry"}),gem:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.gem.name",defaults:"Gem"}),gamepad:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.gamepad-2.name",defaults:"Gamepad"}),"chef-hat":(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.chef-hat.name",defaults:"Chef Hat"}),music2:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.music-2.name",defaults:"Music Note"}),"dollar-sign":(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.dollar-sign.name",defaults:"Dollar Sign"}),coffee:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.coffee.name",defaults:"Coffee"}),tag:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.tag.name",defaults:"Tag"}),sailboat:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.sailboat.name",defaults:"Sailboat"}),"graduation-cap":(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.graduation-cap.name",defaults:"Graduation Cap"}),anchor:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.anchor.name",defaults:"Anchor"}),pin:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.pin.name",defaults:"Pin"}),compass:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.compass.name",defaults:"Compass"}),code:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.code-2.name",defaults:"Code"}),droplet:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.droplet.name",defaults:"Droplet"}),box:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"icon.box.name",defaults:"Box"})},eA={gray:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.gray.name",defaults:"Gray"}),red:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.red.name",defaults:"Red"}),orange:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.orange.name",defaults:"Orange"}),yellow:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.yellow.name",defaults:"Yellow"}),lime:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.lime.name",defaults:"Lime"}),teal:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.teal.name",defaults:"Teal"}),green:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.green.name",defaults:"Green"}),blue:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.blue.name",defaults:"Blue"}),purple:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.purple.name",defaults:"Purple"}),pink:(0,a.jsx)(ez.cC,{ns:"base",i18nKey:"color.pink.name",defaults:"Pink"})};var eD=s(72242),eL=s(4694),eP=s(34116),eM=s(3525),eK=s(8781),eF=s(40881);let eU={gray:"text-gray-400",red:"text-red-400",orange:"text-orange-400",yellow:"text-yellow-400",lime:"text-lime-400",teal:"text-teal-400",green:"text-green-400",blue:"text-blue-400",purple:"text-purple-400",pink:"text-pink-400"},eG={gray:"text-gray-300",red:"text-red-300",orange:"text-orange-300",yellow:"text-yellow-300",lime:"text-lime-300",teal:"text-teal-300",green:"text-green-300",blue:"text-blue-300",purple:"text-purple-300",pink:"text-pink-300"},eB=(0,eL.memo)(e=>{let{value:t,className:s,size:n}=e,{resolvedTheme:r}=(0,eF.F)(),i="dark"===r,o=eZ[t.icon],l=(0,eD.cn)("size-4",i&&eG[t.color],i||eU[t.color],s);return(0,a.jsx)(o,{className:l,size:n})}),eH=(0,eL.memo)(e=>{let{icon:t,onSelect:s}=e,n=(0,eK.w)(),[r,i]=(0,eL.useState)(!1),o=eZ[t],l=n?"iconXl":"iconMd",c=e=>{i(!1),s({icon:t,color:e})};return(0,a.jsxs)(eM.J2,{modal:!0,open:r,onOpenChange:i,children:[(0,a.jsx)(eM.xo,{asChild:!0,children:(0,a.jsxs)(eP.zx,{variant:"ghost",size:"iconMd",className:"aspect-square",children:[(0,a.jsx)("label",{className:"sr-only",children:eR[t]}),(0,a.jsx)(o,{className:"text-secondary size-4"})]})}),(0,a.jsx)(eM.yk,{className:"grid grid-cols-5 p-2",align:"start",alignOffset:-9,children:eO.map(e=>(0,a.jsxs)(eP.zx,{size:l,variant:"ghost",onClick:()=>c(e),children:[(0,a.jsx)("label",{className:"sr-only",children:eA[e]}),(0,a.jsx)(eB,{value:{icon:t,color:e}})]},e))})]},t)}),eW=(0,eL.memo)(e=>{let{onSelect:t,className:s}=e,n=(0,eL.useMemo)(()=>Object.keys(eZ).sort(),[]),r=(0,eD.cn)("grid grid-cols-9 items-center justify-items-stretch p-2 ",s);return(0,a.jsx)("div",{className:r,children:n.map(e=>(0,a.jsx)("div",{className:"aspect-square flex items-center justify-center",children:(0,a.jsx)(eH,{icon:e,onSelect:t})},e))})})},36270:function(e,t,s){"use strict";s.d(t,{DB:function(){return m},oe:function(){return f}});var a=s(2899);s(69492),s(34116),s(77119),s(81211),s(33263),s(13771),s(43701),s(74239);var n=s(38889),r=s(41591),i=s(65297),o=s(20842),l=s(37449),c=s(39391),d=s(16506),u=s(6642),p=s(73637);function m(e){switch(e){case"news":return{icon:(0,a.jsx)(n.Z,{}),colorClassName:"text-gray-400 dark:text-gray-300"};case"doctor":return{icon:(0,a.jsx)(r.Z,{}),colorClassName:"text-purple-400 dark:text-purple-300"};case"friend":return{icon:(0,a.jsx)(i.Z,{}),colorClassName:"text-orange-400 dark:text-orange-300"};case"tutor":return{icon:(0,a.jsx)(o.Z,{}),colorClassName:"text-green-400 dark:text-green-300"};case"romance":return{icon:(0,a.jsx)(l.Z,{}),colorClassName:"text-pink-400 dark:text-pink-300"};case"unhinged":return{icon:(0,a.jsx)(c.Z,{}),colorClassName:"text-yellow-300 dark:text-yellow-300"};case"therapist":return{icon:(0,a.jsx)(d.Z,{}),colorClassName:"text-teal-400 dark:text-teal-300"};case"scientist":return{icon:(0,a.jsx)(u.Z,{}),colorClassName:"text-blue-400 dark:text-blue-300"};case"coder":return{icon:(0,a.jsx)(p.Z,{}),colorClassName:"text-lime-400 dark:text-lime-300"};default:throw Error("Unknown personaId: ".concat(e))}}function f(e,t){let s={webSearch:!1,xSearch:!1,xMediaSearch:!1,trendsSearch:!1,xPostAnalyze:!1,imageGen:!1};switch(e){case"news":return{toolOverrides:{webSearch:!0,xSearch:!0,xMediaSearch:!0,trendsSearch:!0,xPostAnalyze:!0,imageGen:!1},initialQuery:t("Tell me the latest news.","Tell me the latest news."),addToLastChat:!1,hideDeepSearch:!0,hideThinking:!1};case"doctor":return{toolOverrides:s,initialQuery:t("Hi, what can you help me with?","Hi, what can you help me with?"),addToLastChat:!0,hideDeepSearch:!1,hideThinking:!1,disclaimer:t("Grok is not a doctor. Please consult one. Don't share personal information that will identify you.","Grok is not a doctor. Please consult one. Don't share personal information that will identify you.")};case"friend":return{toolOverrides:s,initialQuery:t("hey, how was your day?","hey, how was your day?"),addToLastChat:!0,hideDeepSearch:!0,hideThinking:!0};case"tutor":return{toolOverrides:s,initialQuery:t("Hey, can you help me with a homework question?","Hey, can you help me with a homework question?"),addToLastChat:!0,hideDeepSearch:!1,hideThinking:!1};case"romance":return{toolOverrides:{webSearch:!1,xSearch:!1,xMediaSearch:!1,trendsSearch:!1,xPostAnalyze:!1},initialQuery:t("Hey, love. How are you?","Hey, love. How are you?"),addToLastChat:!0,hideDeepSearch:!0,hideThinking:!0,disclaimer:t("Some content may be sexual in nature.","Some content may be sexual in nature.")};case"unhinged":return{toolOverrides:s,initialQuery:t("Drop a funny hot take.","Drop a funny hot take."),addToLastChat:!0,hideDeepSearch:!0,hideThinking:!0,disclaimer:t("Content will be objectionable, inappropriate, and offensive.","Content will be objectionable, inappropriate, and offensive.")};case"therapist":return{toolOverrides:s,initialQuery:t("Hi, what can you help me with?","Hi, what can you help me with?"),addToLastChat:!0,hideDeepSearch:!1,hideThinking:!1,disclaimer:t("Grok is not a therapist. Please consult one. Don't share personal information that will identify you.","Grok is not a therapist. Please consult one. Don't share personal information that will identify you.")};case"scientist":case"coder":return{toolOverrides:s,initialQuery:t("Hello, what do you do?","Hello, what do you do?"),addToLastChat:!0,hideDeepSearch:!1,hideThinking:!1};default:(function(e){throw Error("Wrong persona id: "+e)})(e)}}s(4694),s(70702),s(40202),s(26777),s(65021)},78394:function(e,t,s){"use strict";s.d(t,{I:function(){return i},k:function(){return o}});var a=s(2899),n=s(4694),r=s(85792);let i=e=>({fileMetadataId:e.assetId,fileName:e.name,fileMimeType:e.mimeType,fileUri:e.key,parsedFileUri:e.previewImageKey,createTime:e.createTime,fileSource:e.fileSource,thirdPartyFileId:e.thirdPartyFileId,thirdPartyFileMimeType:e.thirdPartyFileMimeType});function o(e){let{asset:t,onRemoveAsset:s,isShared:o,isDisabled:l,labelClassName:c,hideEdit:d,allowCompact:u=!1}=e,p=(0,n.useMemo)(()=>i(t),[t]),m=(0,n.useCallback)(()=>{null==s||s(t)},[s,t]);return(0,a.jsx)(r.j,{fileName:t.name,metadata:p,onRemove:s?m:void 0,isShared:o,isDisabled:l,isDeleted:t.isDeleted,asset:t,labelClassName:c,hideEdit:d,allowCompact:u})}},48186:function(e,t,s){"use strict";s.d(t,{c:function(){return a}});let a="max-w-[51rem]"},83716:function(e,t,s){"use strict";s.d(t,{B:function(){return ei}});var a=s(2899),n=s(69492),r=s(6087),i=s(4694),o=s(81211),l=s(69195),c=s(38040),d=s(48186),u=s(83711),p=s(36183),m=s(385),f=s(50462),h=s(8781),x=s(89463),g=s(4077),b=s(33263),j=s(55911);function v(e){return/^(https?:\/\/)/.test(e)?e:"https://"+e}var y=s(74542),w=s(73848),k=s(72242),N=s(13771),C=s(41307),S=s(43701),I=s(74239),E=s(3667),_=s(73069),T=s(56672),z=s(41238),Z=s(70702),O=s(15571),R=s(75361),A=s(94853),D=s(93043),L=s(36270),P=s(26777),M=s(63064),K=s(69198),F=s(78394);function U(e){let{text:t,isShown:s,className:n=""}=e,r=(0,i.useId)();return(0,a.jsx)(_.M,{children:s&&(0,a.jsx)(E.E.span,{layout:!0,initial:{opacity:0,width:4},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:4},transition:{duration:.1,ease:"easeInOut"},className:"inline-block whitespace-nowrap ".concat(n),children:t},r)})}var G=s(74417),B=s(1033),H=s(34116),W=s(97404);function q(e){var t,s;let{model:l,personaSettings:c,isDeepsearchSelected:d,reasoningMode:u,deepsearchDisabled:p,forceShowLabel:m=!0,showLabel:f=!1}=e,h=(0,o.g)(),{client:x}=(0,I.useStatsigClient)(),{t:g}=(0,Z.$G)("base"),b=(0,n.gK)(T.Z("isDeepSearchRateLimited")),v=(0,n.gK)(T.Z("isDeeperSearchSelected")),y=(0,n.gK)(T.Z("setIsDeeperSearchSelected")),{data:w}=(0,j.Pd)(),[N,C]=(0,i.useState)(!1);(0,i.useEffect)(()=>{h.SHOW_DEEPER_SEARCH&&!N&&setTimeout(()=>{C(!0)},1e3)},[h.SHOW_DEEPER_SEARCH,N]);let S=(0,i.useMemo)(()=>"deepersearch"===u||v?"DeeperSearch":"DeepSearch",[u]),_=(0,i.useMemo)(()=>v?g("deepsearch-option.deepersearch.description","Extended search, more reasoning"):g("deepsearch-option.deepsearch.description","Advanced search and reasoning"),[v]),z=(0,i.useCallback)(e=>{e.stopPropagation();let t=n.gK.getState().setReasoningMode,s=d?"none":v?"deepersearch":"deepsearch";x.logEvent("switch_reasoning_mode",s),t(s)},[x,d,v]),O=(0,i.useCallback)(()=>{let{setReasoningMode:e}=n.gK.getState();e("deepsearch"),y(!1),x.logEvent("switch_reasoning_mode","deepsearch")},[x,v,y,u]),R=(0,i.useCallback)(()=>{let{setReasoningMode:e}=n.gK.getState();e("deepersearch"),y(!0),x.logEvent("switch_reasoning_mode","deepersearch")},[x,v,y,u]);if(!l)return null;let A=null===(t=l.tags)||void 0===t?void 0:t.includes("deepsearch"),D=null===(s=l.tags)||void 0===s?void 0:s.includes("always_show_deepsearch");if(c&&c.hideDeepSearch||!A&&!D)return null;let L=D&&!A||b;return L&&!h.SHOW_SUBSCRIPTION_FLOWS?null:L&&h.SHOW_SUBSCRIPTION_FLOWS&&(null==w?void 0:w.hasSubscriptions)?(0,a.jsxs)(H.g$,{tooltipAsChild:!0,className:(0,k.cn)("group/ds-toggle","border border-border-l2","bg-transparent hover:bg-button-ghost-hover"),variant:"secondary",size:"pill",onClick:()=>{(0,G._.getState().setIsUpselling)(!0)},tooltipProps:{disableHoverableContent:!0,delayDuration:0},tooltipContent:g("Go Super to use DeepSearch","Go Super to use DeepSearch"),tooltipContentProps:{side:"bottom",className:"bg-primary text-background"},disabled:h.DISABLE_RESEARCH_TOGGLE,"aria-pressed":d,children:[(0,a.jsx)(r.Go,{size:18,className:(0,k.cn)("text-fg-secondary group-hover/ds-toggle:text-fg-primary",d&&"text-fg-primary")}),m&&(0,a.jsx)("span",{children:g("DeepSearch","DeepSearch")})]},"search"):h.SHOW_DEEPER_SEARCH?(0,a.jsxs)(E.E.div,{layout:"size",className:(0,k.cn)("flex ring-1 rounded-full items-center max-h-[36px]","box-border","transition-colors duration-100","relative overflow-hidden","ring-inset","ring-border-l2",d&&"bg-button-ghost-active hover:bg-button-ghost-active"),transition:{duration:N?.2:0,ease:"easeInOut"},children:[(0,a.jsxs)(H.g$,{tooltipContent:_,tooltipProps:{disableHoverableContent:!0,delayDuration:600},tooltipContentProps:{side:"bottom",className:"bg-primary text-background"},className:(0,k.cn)("group/ds-toggle","transition-colors duration-100 focus-visible:ring-transparent","box-border","relative overflow-hidden","rounded-r-none pr-3","bg-transparent","hover:bg-button-ghost-hover","focus-visible:bg-button-ghost-hover"),variant:"secondary",size:"pill",onClick:z,disabled:h.DISABLE_RESEARCH_TOGGLE||p,tabIndex:0,"aria-pressed":d,"aria-label":S,children:[v?(0,a.jsx)(B.Z,{size:18,className:(0,k.cn)("text-fg-secondary group-hover/ds-toggle:text-fg-primary",d&&"text-fg-primary")}):(0,a.jsx)(r.Go,{isOn:d,size:18,className:(0,k.cn)("text-fg-secondary group-hover/ds-toggle:text-fg-primary",d&&"text-fg-primary")}),m?(0,a.jsx)("span",{children:S}):(0,a.jsx)(U,{className:"max-w-full truncate text-xs",text:S,isShown:f})]},"search"),(0,a.jsx)("div",{className:"h-4 w-[1px] bg-toggle-border focus:outline-none",tabIndex:-1}),(0,a.jsxs)(W.h_,{children:[(0,a.jsx)(W.$F,{asChild:!0,children:(0,a.jsx)(H.zx,{className:(0,k.cn)("transition-colors duration-100","relative overflow-hidden ","focus-visible:ring-transparent","rounded-l-none pl-2 pr-3","bg-transparent","hover:bg-button-ghost-hover","focus-visible:bg-button-ghost-hover"),variant:"secondary",size:"pill","aria-label":g("deepsearch-dropdown-button.label","Change mode"),children:(0,a.jsx)(r.v4,{size:12,className:"text-fg-secondary"})})}),(0,a.jsxs)(W.AW,{side:"bottom",align:"end",children:[(0,a.jsxs)(W.bO,{checked:!v,className:"flex flex-col items-start justify-center",onSelect:O,children:[(0,a.jsx)("span",{children:g("DeepSearch","DeepSearch")}),(0,a.jsx)("span",{className:"text-fg-secondary",children:g("deepsearch-option.deepsearch.description","Advanced search and reasoning")})]},"deepsearch-item"),(0,a.jsxs)(W.bO,{checked:v,onSelect:R,className:"flex flex-col items-start justify-center","aria-label":"DeeperSearch",children:[(0,a.jsx)("span",{children:g("DeeperSearch","DeeperSearch")}),(0,a.jsx)("span",{className:"text-secondary",children:g("deepsearch-option.deepersearch.description","Extended search, more reasoning")})]},"deepersearch-item")]})]})]}):(0,a.jsxs)(H.g$,{tooltipAsChild:!0,className:(0,k.cn)("group/ds-toggle","border border-border-l2","overflow-hidden","items-center justify-center",!f&&!m&&"px-[9px]",d?"bg-button-ghost-active hover:bg-button-ghost-active":"bg-transparent hover:bg-button-ghost-hover"),variant:"secondary",size:"pill",onClick:z,tooltipProps:{disableHoverableContent:!0,delayDuration:600},tooltipContent:g("Advanced search and reasoning","Advanced search and reasoning"),tooltipContentProps:{side:"bottom",className:"bg-primary text-background"},disabled:h.DISABLE_RESEARCH_TOGGLE||p,tabIndex:0,"aria-pressed":d,"aria-label":S,children:[(0,a.jsx)(r.Go,{isOn:d,size:18,className:(0,k.cn)("text-fg-secondary group-hover/ds-toggle:text-fg-primary",d&&"text-fg-primary")}),m?(0,a.jsx)("span",{children:S}):(0,a.jsx)(U,{className:"max-w-full truncate text-xs",text:S,isShown:f})]},"search")}var $=s(84503);let Y=e=>{let{onClick:t=()=>{}}=e,s=(0,h.w)();(0,i.useEffect)(()=>{if(s)return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[s])};var V=s(29598);class X{constructor(e,t){this.set=e,this.get=t,this.isUpsellingX=!1,this.setIsUpsellingX=(0,V.f0)(this.set,"isUpsellingX")}}let Q=(0,V.MT)(X);"#subscribe"===window.location.hash&&Q.getState().setIsUpsellingX(!0),Q.subscribe((e,t)=>{var s;e.isUpsellingX!==t.isUpsellingX&&(s=e.isUpsellingX?"subscribe":void 0,window.history.replaceState({},"","".concat(window.location.pathname).concat(s?"#".concat(s):"")))});var J=s(88250),ee=s(96038),et=s(41811),es=s(44836),ea=s(94408);function en(){var e;let t=(0,o.g)(),{t:s}=(0,Z.$G)("base"),{user:l}=(0,P.kP)(),{data:c}=(0,j.Pd)(),[d,u]=(0,f._)("model-select-tutorial",!1),{client:p}=(0,I.useStatsigClient)(),{models:m,unavailableModels:h,modelById:x,isPending:b}=(0,g.bP)(),v=(0,G._)(T.Z("setIsUpselling")),w=Q(T.Z("setIsUpsellingX")),N=(0,n.gK)(T.Z("activeModelId")),C=(0,n.gK)(T.Z("setActiveModelId")),S=(0,n.gK)(T.Z("outputMode")),E=(0,n.gK)(T.Z("setOutputMode")),_=(0,n.gK)(T.Z("reasoningMode"));Y({onClick:()=>u(!0)});let z=(0,i.useCallback)(e=>{p.logEvent("set_model",e,{location:"query-bar"}),C(e)},[p]),O=(0,i.useCallback)(()=>{if((null==c?void 0:c.hasSubscriptions)&&t.SHOW_SUBSCRIPTION_FLOWS){v(!0);return}(null==l?void 0:l.xSubscriptionType)==="PremiumPlus"&&t.SHOW_X_PREMIUM_FLOWS&&w(!0)},[]),R=(0,i.useMemo)(()=>{if(b)return $.jd;let e=x[N];if(!e){(0,y.H)("model-select:ModelSelect:prettyActiveModelName","Model ID ".concat(N," not found."));let e=Object.values(x)[0];return e?(C(e.modelId),e.name||$.jd):$.jd}return e.name||$.jd},[x,N,b]),A=(0,i.useCallback)(e=>{let s;e.preventDefault(),s=t.TOGGLE_SEARCH_ONLY?"noSearch"===S?"auto":"noSearch":"modelOnly"===S?"auto":"modelOnly",p.logEvent("switch_tools",s),E(s)},[S]),[D,L]=(0,i.useState)(!1),M=(0,i.useMemo)(()=>m.some(e=>e.modelId.startsWith("grok-3")),[m]),K=(0,i.useCallback)(e=>{d||u(!0),L(e)},[d]),F=(0,i.useId)(),{isUpselling:U}=(0,G._)(),B="deepsearch"===_||"auto"===(e=S)||"image"===e||"search"===e;return(0,a.jsxs)(W.h_,{open:D,onOpenChange:K,children:[(0,a.jsx)(W.$F,{asChild:!0,children:(0,a.jsxs)(H.g$,{className:"flex-row pl-3 pr-2.5 h-9 sm:px-3 border border-border-l2 sm:border-0",variant:"ghost",size:"pill",tooltipProps:{open:M&&!d&&!U},tooltipContentProps:{side:"bottom",align:"end",className:ea.vq},tooltipContent:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.Eh,{className:"fill-primary"}),(0,a.jsx)("p",{className:"text-sm font-semibold",children:s("Grok 3 Enabled","Grok 3 Enabled")}),(0,a.jsx)("p",{className:"text-xs text-primary-foreground/60",children:s("You have the most powerful model available","You have the most powerful model available")})]}),children:[(0,a.jsx)("span",{className:"inline-block text-primary text-xs @[400px]/input:text-sm",children:R}),(0,a.jsx)(r.v4,{className:"size-3 text-secondary transition-transform ".concat(D&&"rotate-180")})]})}),(0,a.jsxs)(W.AW,{side:"bottom",align:"end",sideOffset:6,alignOffset:-5,className:"flex flex-col",children:[(t.SHOW_X_PREMIUM_FLOWS||t.SHOW_SUBSCRIPTION_FLOWS)&&h.map(e=>(0,a.jsxs)(W.Xi,{className:(0,k.cn)("group/output-mode cursor-pointer flex-col items-start",{"no-siblings-highlighted":e.modelId===N}),onClick:O,children:[(0,a.jsxs)("div",{className:"flex items-center w-full gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-primary",children:e.name||e.modelId}),(0,a.jsxs)(ee.C,{className:"text-primary",variant:"outline",children:[t.SHOW_X_PREMIUM_FLOWS&&!t.SHOW_SUBSCRIPTION_FLOWS&&s("X Premium Plus Only","\uD835\uDD4F PREMIUM+ Only"),t.SHOW_SUBSCRIPTION_FLOWS&&s("SuperGrok Only","SuperGrok Only")]})]}),(0,a.jsx)("span",{className:"text-sm text-secondary",children:e.description})]},e.modelId)),m.map(e=>{var t,s;return(0,a.jsxs)(W.Xi,{className:(0,k.cn)("group/output-mode cursor-pointer flex-col items-start",{"no-siblings-highlighted":e.modelId===N}),onClick:()=>z(e.modelId),children:[(0,a.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,a.jsx)("span",{className:"font-semibold text-primary",children:e.name||e.modelId}),(null===(t=e.badgeText)||void 0===t?void 0:t.trim())&&(0,a.jsx)("div",{className:"px-[5px] rounded-full text-[10px] text-secondary bg-[#D6DAE3] dark:bg-white/10",children:null===(s=e.badgeText)||void 0===s?void 0:s.trim()})]}),(0,a.jsx)("span",{className:"text-sm text-secondary",children:e.description})]},e.modelId)}),m.length>0?(0,a.jsx)(et.Z,{className:"my-2 self-center w-[90%] bg-secondary/25"}):null,(0,a.jsxs)("div",{className:"min-w-64 flex flex-row items-center justify-between px-3 py-2",role:"menuitem",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start text-xs",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-primary",id:F,children:t.TOGGLE_SEARCH_ONLY?s("Enable Search","Enable Search"):s("Enable Search and Images","Enable Search and Images")}),(0,a.jsx)("span",{className:"mr-2 text-xs text-secondary",children:"deepsearch"===_?s("Auto-enabled for DeepSearch","Auto-enabled for DeepSearch"):"modelOnly"===S||"noSearch"===S?s("Answer without a web search","Answer without a web search"):s("Grok can browse the web","Grok can browse the web")})]}),(0,a.jsx)(es.r,{"aria-labelledby":F,checked:B,onClick:A,className:"deepsearch"===_?"opacity-30 cursor-not-allowed":void 0})]})]})]})}function er(e){var t,s;let{model:i,personaSettings:l,isThinkSelected:c,thinkDisabled:d,forceShowLabel:u=!0,showLabel:p=!1}=e,m=(0,o.g)(),{client:f}=(0,I.useStatsigClient)(),{t:h}=(0,Z.$G)("base"),x=(0,n.gK)(T.Z("isThinkingRateLimited")),{data:g}=(0,j.Pd)();if(!i)return;let b=null===(t=i.tags)||void 0===t?void 0:t.includes("think"),v=null===(s=i.tags)||void 0===s?void 0:s.includes("always_show_think");if(l&&l.hideDeepSearch||!b&&!v)return;let y=v&&!b||x;return y&&!m.SHOW_SUBSCRIPTION_FLOWS?void 0:y&&m.SHOW_SUBSCRIPTION_FLOWS&&(null==g?void 0:g.hasSubscriptions)?(0,a.jsxs)(H.g$,{tooltipAsChild:!0,className:(0,k.cn)("border border-border-l2","bg-transparent hover:bg-button-ghost-hover"),variant:"secondary",size:"pill",onClick:()=>{(0,G._.getState().setIsUpselling)(!0)},tooltipProps:{disableHoverableContent:!0,delayDuration:0},tooltipContent:h("Go Super to use Think","Go Super to use Think"),tooltipContentProps:{side:"bottom",className:"bg-surface-invert text-fg-invert"},disabled:m.DISABLE_RESEARCH_TOGGLE,"aria-pressed":c,"aria-label":h("Think","Think"),children:[(0,a.jsx)(r.WG,{size:18,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"hidden @[600px]/input:inline-block",children:h("Think","Think")})]},"search"):(0,a.jsxs)(H.g$,{tooltipAsChild:!0,className:(0,k.cn)("group/think-toggle","transition-colors duration-100","relative overflow-hidden border",!p&&!u&&"px-[9px]","bg-transparent hover:bg-button-ghost-hover","border-border-l2",c&&"bg-button-ghost-active hover:bg-button-ghost-active"),variant:"secondary",size:"pill",onClick:()=>{let e=n.gK.getState().setReasoningMode,t=c?"none":"think";f.logEvent("switch_reasoning_mode",t),e(t)},tooltipProps:{disableHoverableContent:!0,delayDuration:600},tooltipContent:h("Let the model take its time","Let the model take its time"),tooltipContentProps:{side:"bottom",className:"bg-primary text-background"},disabled:m.DISABLE_THINK_TOGGLE||d,tabIndex:0,"aria-pressed":c,"aria-label":"Think",children:[(0,a.jsx)(r.WG,{isOn:c,size:18,className:"".concat(c?"text-primary":"group-hover/think-toggle:text-fg-primary text-fg-secondary")}),u?(0,a.jsx)("span",{children:"Think"}):(0,a.jsx)(U,{className:"max-w-full truncate text-xs",text:"Think",isShown:p})]},"reason")}let ei=(0,i.forwardRef)((e,t)=>{let{id:s,className:U,textAreaClassName:G,onQuery:B=eo,streamState:H,onAbort:W=eo,disabled:$,enterSubmit:Y=!0,onKeyDown:V,onChange:X,placeholder:Q,onFrontPage:J=!1,isIncognito:ee,expandable:et=!0}=e,{t:es}=(0,Z.$G)("base"),{user:ea}=(0,P.kP)(),{client:ei}=(0,I.useStatsigClient)(),{attachFiles:ec,detachFile:ed}=(0,l.GC)(),eu=(0,n.gK)(T.Z("conversationId")),ep=(0,o.g)(),[em,ef]=(0,f._)("model-select-tutorial",!1),{scrollRef:eh,className:ex}=(0,p.m)(),eg=(0,i.useRef)(null),eb=(0,i.useRef)(null),ej=(0,i.useRef)(null),[ev,ey]=function(){let[e,t]=(0,i.useState)(0),s=(0,i.useRef)(null);return(0,i.useLayoutEffect)(()=>{let e=()=>{s.current&&t(s.current.getBoundingClientRect().width)};if(e(),window.addEventListener("resize",e),s.current){let t=new ResizeObserver(()=>{e()});return t.observe(s.current),()=>{window.removeEventListener("resize",e),t.disconnect()}}},[]),[s,e]}(),ew=ey>400,ek=ey>470,eN=(0,x.r)(),eC=(0,h.w)(),[eS,eI]=(0,i.useState)(!1);(0,i.useImperativeHandle)(t,()=>({getTextArea:()=>eb.current}));let eE=eu||"no_conversation_id",{register:e_,handleSubmit:eT,formState:{errors:ez}}=(0,z.cI)(),{ref:eZ,...eO}=e_("files",{validate:e=>!(eH.length+((null==e?void 0:e.length)||0)>l.lH)||"".concat(es("Max number of files allowed is","Max number of files allowed is")," ").concat(l.lH)}),eR=(0,n.gK)(T.Z("queryByConversationId")),eA=(0,n.gK)(T.Z("idsetQueryByConversationId")),eD=eR[eE],eL=(0,i.useCallback)(e=>eA(e,eE),[eE]);(0,i.useEffect)(()=>{eb.current&&(eb.current.value=eR[eE]||"")},[eE]);let eP=(0,n.gK)(T.Z("setActiveModelId")),{isThinkSelected:eM,isDeepsearchSelected:eK}=(0,g.NK)(),eF=(0,n.gK)(T.Z("reasoningMode")),eU=(0,C.O)(T.Z("listByConversationId")),eG=(0,C.O)(T.Z("attachListByConversationId")),eB=(0,C.O)(T.Z("delistAttachByConversationId")),eH=eU[eE]||el,eW=eG[eE]||el,{attachedUrls:eq,handleAttachUrl:e$,handleDetachUrl:eY,handleDetachAll:eV}=function(){let e=(0,o.g)(),[t,s]=(0,i.useState)(new Set),a=(0,i.useCallback)(t=>{let a=v(t);s(t=>!e.ENABLE_WEBPAGE_ATTACHMENTS||t.size>=10?t:new Set([...t,a]))},[e.ENABLE_WEBPAGE_ATTACHMENTS]),n=(0,i.useCallback)(e=>{let t=v(e);s(e=>{let s=new Set(e);return s.delete(t),s})},[]),r=(0,i.useCallback)(()=>{s(new Set)},[]);return{attachedUrls:(0,i.useMemo)(()=>[...t],[t]),handleAttachUrl:a,handleDetachUrl:n,handleDetachAll:r}}(),eX=(0,i.useCallback)(e=>{ei.logEvent("detach-url",e,{location:"query-bar",url:e}),eY(e)},[]),eQ=(0,n.gK)(T.Z("activeModelId")),eJ=(0,n.gK)(T.Z("queryBarExpanded")),e0=!et||eJ,e1=(0,n.gK)(T.Z("setQueryBarExpanded")),e2=(0,n.gK)(T.Z("setIsTypingDebounce")),e8=(0,i.useMemo)(()=>!!J||!!eD&&eD.length>0||e0,[eD,J,e0]),e4="error"===H,e3="optimistic"===H||"streaming"===H||"reconnecting"===H,e6=(0,M.N)(T.Z("inEditId")),[e9,e5]=(0,i.useState)(!1),e7=(0,i.useMemo)(()=>{var e;let t=eH.some(e=>void 0===e.metadata),s=eH.some(e=>e.metadata instanceof Error),a=!!eD||eH.length>0||(null===(e=eG[eE])||void 0===e?void 0:e.length)>0;return!t&&!s&&!e9&&a&&!$},[eH,$,e3,e9,eD,eG,eE]),te=(0,i.useCallback)(async()=>{var e,t,s;if(!e7)return;(e3||e4)&&await W();let a=null!==(t=null===(e=eb.current)||void 0===e?void 0:e.value.length)&&void 0!==t?t:0;if(a>39e4)return R.Am.error(es("query-bar.too-long","Character Limit Exceeded: {{currentLength, number(maximumFractionDigits: 0)}}/{{maxLength, number(maximumFractionDigits: 0)}}",{maxLength:"390000",currentLength:a.toFixed(0)})),!1;if(!eb.current)return;let n=C.O.getState(),r=eb.current.value,i=eH.map(e=>e.metadata).filter(e=>e&&!(e instanceof Error)),o=[...null!==(s=eG[eE])&&void 0!==s?s:[]],l=[...i.map(e=>e.fileMetadataId),...o.map(e=>e.assetId)];eL(""),eb.current.value="",n.removeByConversationId(eE),n.removeAttachByConversationId(eE),eV(),e5(!0),await B(r||es("Refer to the following content:","Refer to the following content:"),l,eq,void 0,!1).finally(()=>e5(!1))||(eL(r),eb.current&&(eb.current.value=r),eH.map(e=>n.lisertByConversationId(e,eE)),o.map(e=>n.lisertAttachByConversationId(e,eE)))},[B,eL,e7,e3,e4,W,eH,eG,eE,eq]),tt=eT((0,i.useCallback)(async()=>{if(!eS){eI(!0);try{await te()}catch(e){(0,y.H)("query-bar:submit",e)}eI(!1)}},[eS,te])),ts=(0,i.useCallback)(e=>{e.preventDefault(),tt().catch(e=>{(0,y.H)("query-bar:handleSubmit",e)})},[tt]);(0,c.y)(u.FG,()=>{tt().catch(e=>{(0,y.H)("query-bar:hotkeys",e)})},[tt]);let ta=(0,N.t)(e=>eu?e.byId[eu]:void 0),tn=(0,i.useMemo)(()=>{if(ta&&(0,b.VO)(ta.personaId))return(0,L.oe)(ta.personaId,es)},[ta]);(0,i.useEffect)(()=>{let e=e=>{var t,s;if(!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.repeat&&"Tab"!==e.key&&"Enter"!==e.key&&"Shift"!==e.key&&void 0===e6){if((null===(t=document.activeElement)||void 0===t?void 0:t.tagName)==="INPUT"||(null===(s=document.activeElement)||void 0===s?void 0:s.tagName)==="TEXTAREA")return;/[a-zA-Z0-9]/.test(e.key)&&J&&eb.current&&eb.current.focus()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[J,e6]);let tr=function(e){let t=(0,m.D)(),s=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(!t||!e.current)return;let a=()=>{s.current=!0},n=()=>{setTimeout(()=>{s.current=!1},50)};return e.current.addEventListener("compositionstart",a),e.current.addEventListener("compositionend",n),()=>{var t,s;null===(t=e.current)||void 0===t||t.removeEventListener("compositionstart",a),null===(s=e.current)||void 0===s||s.removeEventListener("compositionend",n)}},[e,t]),s}(eb),ti=(0,i.useCallback)(e=>{let t=!e.metaKey&&!e.ctrlKey&&!e.shiftKey,s=!e.nativeEvent.isComposing&&"Process"!==e.key&&"KeyZ"!==e.code&&!tr.current;if("Enter"===e.key&&t&&s&&Y&&!eN){e.preventDefault(),tt().catch(e=>{(0,y.H)("query-bar:handleKeyDown",e)});return}null==V||V(e)},[Y,V,tt,eN]),to=(0,i.useRef)(null),tl=(0,i.useCallback)(e=>{var t;em||ef(!0),eL(null===(t=eb.current)||void 0===t?void 0:t.value),e1(!0),null==X||X(e),e2(!0),to.current&&clearTimeout(to.current),to.current=setTimeout(()=>{e2(!1)},600)},[X,eL,e2,em]),tc=(0,i.useCallback)(()=>{var e;null===(e=ej.current)||void 0===e||e.click()},[]),td=(0,i.useCallback)(e=>{if(!e.target.files)return;let t=Array.from(e.target.files);ec(t),t.forEach(e=>{ei.logEvent("upload_file",e.name,{location:"file-attach-button",mimeType:e.type})})},[ec,ei]),tu=(0,i.useCallback)(e=>{ed(ej,e)},[ej,ed]),tp=(0,i.useCallback)(e=>{eB(eE,e.assetId)},[eE]),tm=(0,i.useCallback)(()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{ref:e=>{eZ(e),ej.current=e},...eO,className:"hidden",type:"file",onChange:td,multiple:!0}),ez.files&&(0,a.jsx)("div",{className:"text-red-500 absolute top-[-20px]",children:ez.files.message})]}),[eZ,td]),[tf,th]=(0,i.useState)(0),tx=(0,i.useMemo)(()=>Array.isArray(Q)?Q[tf]:Q,[Q,tf]);(0,i.useEffect)(()=>{},[String(Q),!1]);let tg=(0,i.useCallback)(()=>{var e;e1(!0),null===(e=eb.current)||void 0===e||e.focus()},[]),{modelById:tb,defaultAnonModelId:tj,defaultFreeModelId:tv,defaultProModelId:ty,isPending:tw}=(0,g.bP)(),{data:tk}=(0,j.Pd)(),tN=ep.HIDE_SUBSCRIPTION_FLOWS_FROM_PREMIUM_PLUS_USERS&&(null==ea?void 0:ea.xSubscriptionType)==="PremiumPlus"||(null==tk?void 0:tk.hasSubscriptions);(0,i.useEffect)(()=>{var e;if(!tw&&!eQ&&tb[eQ]){if(tN&&ty&&tb[ty]){eP(ty);return}if(ea&&tv&&tb[tv]){eP(tv);return}if(tj&&tb[tj]){eP(tj);return}eP(null===(e=Object.values(tb)[0])||void 0===e?void 0:e.modelId)}},[tw,eQ,tb,tj,tv,ty,ea]);let tC=!ea,tS=eq.length+eH.length+eW.length,tI=null==tb?void 0:tb[eQ],{isAttachDisabled:tE,isThinkDisabled:t_,isDeepsearchDisabled:tT}=(0,g.NK)(tI),tz=(0,S.F)(e=>e.userSettings.preferences.autoDetectWebpageAttachments),tZ=(0,i.useCallback)(e=>{if(tE)return;let t=[],s=e.clipboardData.getData("text"),a=s.trim();if(ep.ENABLE_WEBPAGE_ATTACHMENTS&&tz&&(0,w.p)(a)&&(e$(a),ei.logEvent("attach_url",a,{location:"query-bar-paste",url:a})),ep.STORE_LONG_PASTES_AS_FILES&&s.length>102400){let e=new File([new Blob([s],{type:"text/plain"})],"pasted-text.txt",{type:"text/plain"});t.push(e)}let n=e.clipboardData.items;if(n)for(let e=0;e<n.length;e++){let s=n[e].getAsFile();s&&t.push(s)}t.length>0&&(e.preventDefault(),ec(t),t.forEach(e=>{ei.logEvent("upload_file",e.name,{location:"file-paste",mimeType:e.type})}))},[ec,ei,ep,tE,e$]),tO=tC?es("Please login to attach files","Please login to attach files"):tE?es("Attachments are disabled for this mode","Attachments are disabled for this mode"):es("Attach","Attach");return(0,a.jsx)("form",{id:s,className:(0,k.cn)("sticky bottom-0","w-full text-base flex flex-col gap-2 items-center justify-center relative z-10",U),onSubmit:tt,children:(0,a.jsxs)("div",{ref:eg,onClick:tg,className:(0,k.cn)("flex flex-row gap-2 justify-center w-full relative",J?"@xl:w-4/5":""),children:[tm(),(0,a.jsxs)("div",{ref:ev,className:(0,k.cn)("query-bar group","bg-surface-l2","ring-border-l1 hover:ring-border-l2 focus-within:ring-border-l2 hover:focus-within:ring-border-l2","duration-100 relative w-full overflow-hidden @container/input","shadow shadow-black/5",d.c,"ring-1 ring-inset focus-within:ring-1",{"pb-12 px-2 @[480px]/input:px-3 rounded-3xl":e8,"px-12 pb-0 rounded-[40px]":!e8,"bg-purple-50 ring-purple-200":ee,"hover:ring-purple-300 focus-within:ring-purple-300 hover:focus-within:ring-purple-300":ee,"dark:bg-purple-1000 dark:ring-purple-700":ee,"dark:hover:ring-purple-600 dark:focus-within:ring-purple-600 dark:hover:focus-within:ring-purple-600":ee}),children:[(0,a.jsx)(E.E.div,{ref:eh,initial:{translateY:-10,opacity:0},animate:{translateY:0,opacity:1},exit:{translateY:-10,opacity:0},className:(0,k.cn)("w-full flex flex-row gap-2 mt-3 px-1 whitespace-nowrap",{hidden:!(tS>0&&e0),"flex-wrap":!eC,"overflow-x-auto":eC},ex),children:(0,a.jsxs)(_.M,{initial:!1,mode:"popLayout",children:[eq.map((e,t)=>(0,a.jsx)(E.E.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},transition:{duration:.2},children:(0,a.jsx)(K.X,{url:e,onDetachUrl:eX,isErrored:!1})},e+t)),eH.map((e,t)=>(0,a.jsx)(E.E.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},transition:{duration:.2},children:(0,a.jsx)(D.T,{file:e.file,metadata:e.metadata,onRemoveFile:tu,allowCompact:!0})},e.file.name+t)),eW.map((e,t)=>(0,a.jsx)(E.E.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,a.jsx)(F.k,{asset:e,onRemoveAsset:tp,allowCompact:!0})},e.assetId+t))]})}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("span",{className:(0,k.cn)("absolute px-2 @[480px]/input:px-3 py-5 text-fg-secondary pointer-events-none select-none",eD||!tx?"hidden":""),children:tx}),(0,a.jsx)(O.Z,{ref:eb,dir:"auto","aria-label":es("Ask Grok anything","Ask Grok anything"),className:(0,k.cn)("w-full px-2 @[480px]/input:px-3",e0?"pt-5 mb-5":"my-5","bg-transparent","focus:outline-none","text-fg-primary","align-bottom",G),style:{resize:"none"},onFocus:()=>e1(!0),onKeyDown:ti,onChange:tl,onClick:()=>{em||ef(!0)},value:eD,maxRows:e8?eC?4:12:1,autoFocus:!0,minRows:1,onPaste:tZ})]}),(0,a.jsxs)("div",{className:"flex gap-1.5 absolute inset-x-0 bottom-0 border-2 border-transparent p-2 @[480px]/input:p-2 max-w-full",children:[(0,a.jsx)(A.R,{label:tO,disabled:tC||tE,queryBarExpanded:e0,totalFileCount:tS,handleClickUpload:tc}),(0,a.jsxs)(E.E.div,{animate:e8?{opacity:1,translateY:0}:{opacity:0,translateY:40},className:"".concat(e8?"":"pointer-events-none"," flex grow gap-1.5 max-w-full"),children:[(0,a.jsx)("div",{className:"grow flex gap-1.5 max-w-full",children:(0,a.jsxs)(_.M,{children:[(0,a.jsx)(q,{model:tI,personaSettings:tn,isDeepsearchSelected:eK,reasoningMode:eF,isIncognito:ee,deepsearchDisabled:tT,forceShowLabel:ek,showLabel:eK&&ew},"1"),(0,a.jsx)(er,{model:tI,personaSettings:tn,isThinkSelected:eM,isIncognito:ee,thinkDisabled:t_,forceShowLabel:ek,showLabel:eM&&ew},"2")]})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(en,{})})]}),(0,a.jsxs)("div",{className:(0,k.cn)("ml-auto flex flex-row items-end gap-1"),children:[!e3&&(0,a.jsx)(E.E.button,{initial:{opacity:.5},animate:{opacity:1,transition:{duration:.1}},whileHover:e7?{scale:1.1}:void 0,whileTap:e7?{scale:.95}:void 0,className:(0,k.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),type:"submit","aria-label":es("Submit","Submit"),disabled:!e7,onClick:ts,children:(0,a.jsx)("div",{className:(0,k.cn)("h-9 relative","aspect-square flex flex-col items-center justify-center","rounded-full ring-1 ring-inset duration-100","before:absolute before:inset-0 before:rounded-full before:bg-button-filled before:ring-0 before:transition-all duration-100",e7?"".concat(ee?"bg-purple-500 dark:bg-purple-400":"bg-button-filled"," text-fg-invert ring-transparent before: before:[clip-path:circle(50%_at_50%_50%)]"):"".concat(ee?"bg-warm-gray-200 dark:bg-gray-600":"bg-warm-gray-100 dark:bg-gray-600"," text-fg-secondary before:[clip-path:circle(0%_at_50%_50%)] ring-0")),children:(0,a.jsx)(r.Hf,{size:20,className:"relative"})})}),e3&&(0,a.jsx)(E.E.button,{whileTap:{scale:.95},initial:{scale:.95,opacity:1},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:.5,transition:{duration:.2}},className:(0,k.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),onClick:e=>{e.preventDefault(),W().catch(console.error)},children:(0,a.jsx)("div",{className:(0,k.cn)("h-9","aspect-square flex flex-col items-center justify-center rounded-full","rounded-full ring-1 ring-inset","bg-button-filled text-fg-invert"),children:(0,a.jsx)(r.nx,{})})})]})]})]}),J&&ee&&(0,a.jsx)(E.E.div,{initial:{translateY:-20,opacity:0},animate:{translateY:0,opacity:1},className:"absolute inset-x-0 rounded-full bottom-full sm:top-full start-0 text-fg-secondary",children:(0,a.jsxs)("div",{className:(0,k.cn)("py-4 sm:px-6 mx-auto flex flex-row items-start gap-1 text-sm",d.c),children:[(0,a.jsx)(r.L_,{size:16,className:"m-1 opacity-70 shrink-0"}),(0,a.jsx)("span",{className:"bg-surface-base",children:es("This chat is private and won't appear in your history or be used to train models. We may securely retain it for up to 30 days for safety purposes.","This chat is private and won't appear in your history or be used to train models. We may securely retain it for up to 30 days for safety purposes.")})]})})]})})}),eo=async()=>!1,el=[]},72802:function(e,t,s){"use strict";s.d(t,{M:function(){return r}});var a=s(2899),n=s(72242);let r=(0,s(4694).forwardRef)((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsx)("div",{ref:t,role:"button",className:(0,n.cn)("flex items-center text-fg-primary text-sm font-medium rounded-2xl px-3 py-2","border border-border-l1 hover:bg-button-ghost-hover cursor-pointer transition-all","focus:outline-none focus-visible:ring-1 focus-visible:ring-ring","select-none",s),...i,children:r})})},63064:function(e,t,s){"use strict";s.d(t,{N:function(){return c}});var a=s(29598),n=s(11194),r=s(85035);let i={},o=void 0;class l{constructor(e,t){this.set=e,this.get=t,this.drawerOpen=!1,this.menuFixed=!0,this.menuHidden=!0,this.tabsCount=0,this.activeTabs=i,this.activeTempTabs=i,this.inEditId=o,this.setActiveTabs=(0,a.f0)(this.set,"activeTabs"),this.setActiveTempTabs=(0,a.f0)(this.set,"activeTempTabs"),this.addAnyTab=(e,t)=>{let s=this.get(),a={...s.activeTabs,...s.activeTempTabs};if(e in a)return;let n=Object.keys(a).reduce((e,t)=>({...e,[t]:{index:a[t].index+1}}),{[e]:{index:0}});this.set({activeTabs:Object.keys(s.activeTabs).reduce((e,t)=>({...e,[t]:{index:n[t].index}}),t?{}:{[e]:{index:0}}),activeTempTabs:Object.keys(s.activeTempTabs).reduce((e,t)=>({...e,[t]:{index:n[t].index}}),t?{[e]:{index:0}}:{})})},this.removeActiveTab=(0,a.Od)(this.set,"activeTabs"),this.removeActiveTempTab=(0,a.Od)(this.set,"activeTempTabs"),this.setDrawerOpen=(0,a.f0)(this.set,"drawerOpen"),this.toggleMenuFixed=(0,a.ZN)(this.set,"menuFixed"),this.setMenuFixed=(0,a.f0)(this.set,"menuFixed"),this.setMenuHidden=(0,a.f0)(this.set,"menuHidden"),this.setInEditId=(0,a.f0)(this.set,"inEditId")}}let c=(0,n.U)()((0,r.XR)((0,r.tJ)((e,t)=>new l(e,t),{name:"active-chat-tabs",storage:(0,r.FL)(()=>localStorage),partialize:e=>({activeTabs:e.activeTabs}),version:1})));(0,a.N7)(c,"activeTabs","tabsCount",e=>Object.keys(e).length+Object.keys(c.getState().activeTempTabs).length),(0,a.N7)(c,"activeTempTabs","tabsCount",e=>Object.keys(e).length+Object.keys(c.getState().activeTabs).length)},97404:function(e,t,s){"use strict";s.d(t,{$F:function(){return d},AW:function(){return h},Ph:function(){return p},TG:function(){return f},Xi:function(){return x},bO:function(){return g},cq:function(){return u},h_:function(){return c},kt:function(){return m}});var a=s(2899),n=s(72242),r=s(84643),i=s(98450),o=s(83788),l=s(4694);let c=r.fC,d=r.xz;r.ZA;let u=r.Uv,p=r.Tr;r.Ee;let m=l.forwardRef((e,t)=>{let{className:s,inset:o,children:l,...c}=e;return(0,a.jsxs)(r.fF,{ref:t,className:(0,n.cn)("flex cursor-pointer select-none items-center rounded-xl px-3 py-1.5 text-sm outline-none focus:bg-button-ghost-hover data-[state=open]:bg-button-ghost-hover [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o&&"pl-8",s),...c,children:[l,(0,a.jsx)(i.XCv,{className:"ml-auto text-fg-secondary"})]})});m.displayName=r.fF.displayName;let f=l.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.tu,{ref:t,className:(0,n.cn)("z-50 overflow-hidden rounded-2xl border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})});f.displayName=r.tu.displayName;let h=l.forwardRef((e,t)=>{let{className:s,sideOffset:i=4,...o}=e;return(0,a.jsx)(r.Uv,{children:(0,a.jsx)(r.VY,{ref:t,sideOffset:i,collisionPadding:{top:16,left:16,right:16,bottom:16},className:(0,n.cn)("z-50 overflow-hidden rounded-2xl bg-surface-l4 border border-border-l1 text-primary backdrop-blur-md p-1 shadow-sm shadow-black/5","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 max-h-[--radix-dropdown-menu-content-available-height] overflow-auto",s),...o})})});h.displayName=r.VY.displayName;let x=l.forwardRef((e,t)=>{let{className:s,inset:i,...o}=e;return(0,a.jsx)(r.ck,{ref:t,className:(0,n.cn)("relative flex select-none items-center cursor-pointer px-3 py-2 rounded-xl text-sm outline-none focus:bg-button-ghost-hover",i&&"pl-8",s),...o})});x.displayName=r.ck.displayName;let g=l.forwardRef((e,t)=>{let{className:s,children:o,checked:l,...c}=e;return(0,a.jsxs)(r.oC,{ref:t,className:(0,n.cn)("relative flex cursor-pointer select-none items-center rounded-xl py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-button-ghost-hover focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l,...c,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(i.nQG,{className:"w-4 h-4"})})}),o]})});g.displayName=r.oC.displayName,l.forwardRef((e,t)=>{let{className:s,children:i,...l}=e;return(0,a.jsxs)(r.Rk,{ref:t,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-popover-hover focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(o.Z,{className:"w-2 h-2 fill-current"})})}),i]})}).displayName=r.Rk.displayName,l.forwardRef((e,t)=>{let{className:s,inset:i,...o}=e;return(0,a.jsx)(r.__,{ref:t,className:(0,n.cn)("px-2 py-1.5 text-sm font-semibold",i&&"pl-8",s),...o})}).displayName=r.__.displayName,l.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.Z0,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",s),...i})}).displayName=r.Z0.displayName},63441:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var a=s(2899),n=s(4694),r=s(72242);let i=n.forwardRef((e,t)=>{let{className:s,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input-border bg-transparent px-3 py-1 text-sm shadow-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},3525:function(e,t,s){"use strict";s.d(t,{J2:function(){return o},xo:function(){return l},yk:function(){return c}});var a=s(2899),n=s(52635),r=s(4694),i=s(72242);let o=n.fC,l=n.xz;n.ee;let c=r.forwardRef((e,t)=>{let{className:s,align:o="center",sideOffset:l=4,noPortal:c=!1,...d}=e,u=c?r.Fragment:n.h_;return(0,a.jsx)(u,{children:(0,a.jsx)(n.VY,{ref:t,align:o,sideOffset:l,className:(0,i.cn)("z-50 bg-surface-l4 dark:bg-surface-l4 p-4 text-fg-primary shadow-sm shadow-black/5 border border-border-l1","outline-none data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","rounded-xl",s),...d})})});c.displayName=n.VY.displayName},38199:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});var a=s(2899),n=s(72242);function r(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},44836:function(e,t,s){"use strict";s.d(t,{r:function(){return o}});var a=s(2899),n=s(71580),r=s(4694),i=s(72242);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full","border-[1px] border-transparent transition-colors","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","focus-visible:ring-offset-2 focus-visible:ring-offset-background","ring-card-border ring-1","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=unchecked]:bg-dove","dark:data-[state=checked]:bg-ivory dark:data-[state=unchecked]:bg-button-secondary-selected",s),...r,ref:t,children:(0,a.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-4 w-4 rounded-full bg-white dark:bg-background shadow-lg ring-0 transition-transform","data-[state=unchecked]:translate-x-0 ms-0.5","data-[state=checked]:translate-x-5 rtl:data-[state=checked]:-translate-x-5","dark:data-[state=unchecked]:bg-overlay")})})});o.displayName=n.fC.displayName},85635:function(e,t,s){"use strict";s.d(t,{SP:function(){return d},dr:function(){return c},mQ:function(){return l},nU:function(){return u}});var a=s(2899),n=s(97108),r=s(4694),i=s(72242);let o=(0,s(48038).j)("inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"px-3 py-1 rounded-md data-[state=active]:bg-foreground data-[state=active]:text-primary data-[state=active]:shadow",underline:"text-md me-3 pb-1 border-b text-secondary border-transparent data-[state=active]:text-primary data-[state=active]:border-primary"}},defaultVariants:{variant:"default"}}),l=n.fC,c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center rounded-lg bg-ivory dark:bg-jet/20 p-1 text-secondary",s),...r})});c.displayName=n.aV.displayName;let d=r.forwardRef((e,t)=>{let{className:s,variant:r,...l}=e;return(0,a.jsx)(n.xz,{ref:t,className:(0,i.cn)(o({variant:r}),s),...l})});d.displayName=n.xz.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});u.displayName=n.VY.displayName},69198:function(e,t,s){"use strict";s.d(t,{X:function(){return p}});var a=s(2899),n=s(34116),r=s(94408),i=s(73848),o=s(72242),l=s(45414),c=s(41916),d=s(4694),u=s(70702);function p(e){let{url:t,isErrored:s,onDetachUrl:p}=e,{t:m}=(0,u.$G)("base"),f=(0,d.useCallback)(()=>{t&&p&&p(t)},[t,p]);return(0,a.jsxs)(r.u,{delayDuration:300,children:[(0,a.jsx)(r.aJ,{asChild:!0,children:(0,a.jsxs)("div",{className:(0,o.cn)("flex flex-row items-center rounded-xl px-3 h-10 ","bg-chip text-sm","transition ease-in-out",p&&"pr-1.5",s&&"text-red-400"),children:[(0,a.jsxs)("a",{className:"flex flex-row items-center",href:t,target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(l.Z,{className:"!size-4 mr-2 shrink-0"}),(0,a.jsx)("span",{className:"truncate max-w-full sm:max-w-[250px]",children:(0,i.b)(t)})]}),p&&(0,a.jsx)(n.zx,{className:"rounded-full ml-1 p-0.5",variant:"ghost",size:"iconSm","aria-label":m("asset-chip-remove.label","Remove"),onClick:f,children:(0,a.jsx)(c.Z,{size:16})})]})}),(0,a.jsx)(r._v,{className:"max-w-2xl truncate",side:"bottom",children:t})]})}},99046:function(e,t,s){"use strict";s.d(t,{ol:function(){return S},in:function(){return p.i},E:function(){return eZ},TG:function(){return eU}});var a=s(2899),n=s(48038),r=s(4694),i=s(72242);let o=(0,n.j)("rounded-3xl border text-card-foreground",{variants:{variant:{default:"bg-card",ghost:"bg-transparent"}},defaultVariants:{variant:"default"}}),l=r.forwardRef((e,t)=>{let{className:s,variant:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)(o({variant:n}),s),...r})});l.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...n})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",s),...n})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...n})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter";var d=s(38453),u=s(74239),p=s(1358),m=s(34116),f=s(97404),h=s(13235),x=s(35924),g=s(87797),b=s(70702),j=s(6087),v=s(40955),y=s(32790),w=s(18486),k=s(42210);let N=(0,r.memo)(e=>{let{workspaceId:t,open:s,onOpenChange:n,onDeleteStarted:r}=e,{t:o}=(0,b.$G)("workspace"),{mutate:l,error:c}=(0,w.Fi)(null!=t?t:"");return((0,y.c)(c),s)?(0,a.jsxs)(k.c,{open:s,setOpen:n,contentClassName:(0,i.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-3xl","flex flex-col","md:overflow-hidden","px-6 py-6"),children:[(0,a.jsx)(v.fK,{children:(0,a.jsxs)(v.$N,{className:"flex justify-between",children:[o("workspace-detetion.title","Are you sure?"),(0,a.jsx)(m.zx,{className:"-mt-2 -mr-2",variant:"ghost",size:"icon","aria-label":o("workspace-instructions-close.label","Close"),onClick:()=>n(!1),tabIndex:-1,children:(0,a.jsx)(j.b0,{size:18,className:"text-secondary"})})]})}),(0,a.jsx)("div",{className:"text-secondary",children:o("workspace-deletion.description","This action cannot be undone. Workspace will be lost forever.")}),(0,a.jsxs)(v.cN,{className:"sm:justify-end pt-1",children:[(0,a.jsx)(m.zx,{onClick:()=>{n(!1)},variant:"ghost",size:"md",className:"text-secondary",children:o("workspace-deletion-cancel.label","Cancel")}),(0,a.jsxs)(m.zx,{onClick:()=>{null==r||r(),l()},variant:"outline",size:"md",className:"shadow-none text-primary",children:[(0,a.jsx)(g.Z,{className:"size-4 text-fg-danger"}),o("workspace-deletion-confirm.label","Delete workspace")]})]})]}):null});function C(e){let{workspace:t,className:s,iconSize:n,onDeleteStarted:o,onEditStarted:l}=e,{t:c}=(0,b.$G)("base"),{workspaceId:d}=t,[u,p]=(0,r.useState)(!1),j=(0,r.useCallback)(()=>{setTimeout(()=>{p(!0)},1)},[]),v=(0,i.cn)("rounded-3xl",s);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.h_,{children:[(0,a.jsx)(f.$F,{asChild:!0,children:(0,a.jsx)(m.zx,{variant:"ghostSecondary",size:"iconLg",className:v,"aria-label":c("workspace-menu.label","Open menu"),children:(0,a.jsx)(h.Z,{size:null!=n?n:14})})}),(0,a.jsxs)(f.AW,{onCloseAutoFocus:e=>e.preventDefault(),side:"bottom",align:"end",sideOffset:6,alignOffset:-5,className:"flex flex-col shadow-sm shadow-black/5 border-border-l1 min-w-40",children:[l&&(0,a.jsxs)(f.Xi,{onClick:l,children:[(0,a.jsx)(x.Z,{size:16,className:"me-2"}),c("workspace-menu.rename.label","Rename")]}),(0,a.jsxs)(f.Xi,{onClick:j,children:[(0,a.jsx)(g.Z,{size:16,className:"text-fg-danger me-2"}),c("remove-workspace-button.label","Remove")]})]})]}),(0,a.jsx)(N,{workspaceId:d,open:u,onOpenChange:p,onDeleteStarted:o})]})}function S(e){let{workspace:t,onClick:s,className:n}=e,{name:r,icon:o,workspaceId:c}=t,{client:m}=(0,u.useStatsigClient)(),f=(0,i.cn)("group relative",n);return(0,a.jsxs)("div",{className:f,children:[(0,a.jsx)(d.r,{route:{page:"workspace",workspaceId:null!=c?c:"",tab:"attachments"},onClick:s,children:(0,a.jsxs)(l,{className:"flex flex-row items-center @sm:flex-col @sm:items-stretch gap-2 px-5 py-4 pe-12 @sm:pe-5 max-w-4/5 rounded-3xl hover:bg-surface-l1 shadow-none h-full overflow-hidden bg-none bg-transparent",children:[(0,a.jsx)(p.i,{icon:o,className:"size-4"}),(0,a.jsx)("div",{className:"text-sm font-medium truncate",children:r})]})}),(0,a.jsx)(C,{workspace:t,className:"visible @sm:invisible @sm:group-hover:visible absolute right-3 top-3",onDeleteStarted:()=>{m.logEvent("ws_delete_click",void 0,{location:"workspaces"})}})]})}var I=s(46850),E=s(83716),_=s(87005),T=s(85635),z=s(77119),Z=s(81211),O=s(74542),R=s(43701),A=s(56672),D=s(69492);function L(e){let{children:t,delayMs:s=200}=e,[a,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=setTimeout(()=>{n(!0)},s);return()=>{clearTimeout(e)}},[s]),a?t:null}var P=s(65924),M=s(38199),K=s(93043),F=s(78394),U=s(91665),G=s(3667);function B(e){let{assets:t,uploadingFiles:s,onRemoveAsset:n,onAttachClick:r}=e;return t.length+s.length===0?(0,a.jsx)(H,{onAttachClick:r}):(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-1 @sm:grid @sm:grid-cols-2 @sm:auto-rows-max",children:[s.map((e,t)=>(0,a.jsx)(G.E.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,a.jsx)(K.T,{file:e,onRemoveFile:()=>{},metadata:void 0})},"file"+t)),t.map((e,t)=>{var s;return(0,a.jsx)(G.E.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,a.jsx)(F.k,{asset:e,onRemoveAsset:n,labelClassName:"sm:max-w-full flex-1",hideEdit:!0})},null!==(s=e.assetId)&&void 0!==s?s:t)})]})}function H(e){let{onAttachClick:t}=e,{t:s}=(0,b.$G)("workspace");return(0,a.jsxs)(l,{variant:"ghost",className:"flex-1 flex flex-col items-center justify-center p-4 gap-4 mb-4",children:[(0,a.jsx)("div",{className:"bg-surface-l1 flex flex-col items-center rounded-full p-4",children:(0,a.jsx)(U.Z,{size:24,strokeWidth:1.5,className:"text-fg-tertiary"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 items-center text-center",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:s("workspace-assets-empty.title","Welcome")}),(0,a.jsx)("span",{className:"text-secondary max-w-md",children:s("workspace-assets-empty.text","Start by attaching files to your workspace. They will be used in all chats in this workspace.")})]})]})}function W(e){var t,s;let{workspace:n,onDialogOpenChange:r}=e,i=null!==(t=n.workspaceId)&&void 0!==t?t:"",{data:o,isPending:l,isError:c,refetch:d}=(0,w.so)(i),u=(0,w.mx)(i),{mutate:p,error:m}=(0,w.qp)(i);if((0,y.c)(m),l)return(0,a.jsx)(q,{});if(c)return(0,a.jsx)(Y,{onRefetch:d});let f=null!==(s=o.assets)&&void 0!==s?s:[];return(0,a.jsx)("section",{className:"flex-1 w-full h-full flex flex-col gap-2 relative",children:(0,a.jsx)(P.u,{fadeSize:"md",className:"py-2",children:(0,a.jsx)(B,{uploadingFiles:u,assets:f,onRemoveAsset:e=>{e.assetId&&p(e.assetId)},onAttachClick:()=>r(!0)})})})}function q(){return(0,a.jsx)(L,{children:(0,a.jsxs)("div",{"aria-busy":"true",className:"flex flex-col gap-2 @sm:grid @sm:grid-cols-2 @sm:auto-rows-max",children:[(0,a.jsx)($,{}),(0,a.jsx)($,{}),(0,a.jsx)($,{}),(0,a.jsx)($,{})]})})}function $(){return(0,a.jsx)(M.O,{className:"bg-warm-gray-100 dark:bg-gray-900 h-10"})}function Y(e){let{onRefetch:t}=e,{t:s}=(0,b.$G)("workspace");return(0,a.jsxs)(l,{className:"flex flex-col items-center px-8 py-4",variant:"ghost",children:[s("assets-loading-error.title","Unable to load assets"),(0,a.jsx)(m.zx,{variant:"outline",size:"md",onClick:t,children:s("assets-loading-error.cta","Retry")})]})}var V=s(94853),X=s(69195),Q=s(75361);function J(e){let{t}=(0,b.$G)("workspace"),{client:s}=(0,u.useStatsigClient)();return()=>{Q.Am.error(t("files-limit-error","Max number of files allowed is {{maxNumberOfFiles}}",{maxNumberOfFiles:X.lH})),s.logEvent("workspace_file_limit_exceeded",e,{maxFiles:X.lH.toString(10)})}}function ee(e){var t;let{workspaceId:s,onFileAddStarted:n}=e,{t:i}=(0,b.$G)("workspace"),{data:o}=(0,w.so)(s),l=(0,r.useMemo)(()=>{var e;return null!==(e=null==o?void 0:o.assets)&&void 0!==e?e:[]},[null==o?void 0:o.assets]),c=(0,r.useRef)(null),d=(0,r.useCallback)(()=>{var e;null===(e=c.current)||void 0===e||e.click()},[]),u=J(s),{mutate:p,error:m}=(0,w.cL)(s);(0,y.c)(m);let{mutate:f,error:h}=(0,w._6)(s);(0,y.c)(h);let{mutate:x,error:g}=(0,w.RL)(s);(0,y.c)(g);let j=(0,r.useCallback)(e=>{if(null==n||n(),l.length+e.length>X.lH){u();return}e.forEach(e=>p(e))},[n,l,u,p]),v=(0,r.useCallback)(e=>{e.target.files&&(null==n||n(),j(Array.from(e.target.files)))},[n,j]),k=(0,r.useCallback)(()=>(0,a.jsx)("input",{ref:c,className:"hidden",type:"file",onChange:v,multiple:!0,"data-testid":"file-input"}),[v]),{data:N}=(0,w.uq)(),C=null!==(t=null==N?void 0:N.assets)&&void 0!==t?t:[];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.t,{label:i("workspace-assets.attach","Attach"),inlineLabel:!0,handleClickUpload:d,onAttachAsset:e=>{if(e&&(null==n||n(),!l.some(t=>t.assetId===e.assetId))){if(l.length+1>X.lH){u();return}x(e)}},showRecentAssetsForUpload:!0,assets:C,handleUploadThirdParty:(e,t,s,a)=>{if(!l.some(e=>e.thirdPartyFileId===a)){if(l.length+1>X.lH){u();return}f({name:e,mimeType:t,fileSource:s,thirdPartyFileId:a})}},className:"w-auto",attachFiles:j}),k()]})}function et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{threshold:.1},s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let a=new IntersectionObserver(t=>{t[0].isIntersecting&&e()},t);return s.current&&a.observe(s.current),()=>{s.current&&a.unobserve(s.current)}},[e,t]),s}var es=s(2007),ea=s(93460);function en(e){var t,s;let{client:n}=(0,u.useStatsigClient)(),{conversation:i,action:o,onActionRequest:l}=e,c=null!==(t=i.conversationId)&&void 0!==t?t:"",[d,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null!==(s=i.title)&&void 0!==s?s:""),[h,x]=(0,r.useState)(!1),[g,b]=(0,r.useState)(""),{routeToConversation:j}=(0,z.o)();(0,r.useEffect)(()=>{var e;f(null!==(e=i.title)&&void 0!==e?e:"")},[o]);let{mutate:v,error:k}=(0,w.vm)(c);(0,y.c)(k),(0,r.useEffect)(()=>{k&&x(!1)},[k]);let{mutate:N,error:C}=(0,w.DA)(c);(0,y.c)(C),(0,r.useEffect)(()=>{C&&b("")},[C]);let S=(0,r.useCallback)(e=>{j(e)},[n]);if(h)return null;let I=g?{...i,title:g}:i;return(0,a.jsx)("div",{className:"h-[48px] rounded-2xl grid grid-cols-1 grid-rows-1 hover:bg-button-ghost-hover",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:(0,a.jsx)(ea.t,{timeRange:"today",isCurrent:!1,isSelected:d,isDeleting:"delete"===o,isEditing:"edit"===o,newTitle:m,onNewTitleChange:f,conversation:I,className:"p-4 rounded-2xl ",onDeleteStart:()=>l(c,"delete"),onEditStart:()=>l(c,"edit"),onDeleteConfirm:()=>{n.logEvent("delete_conversation",c,{location:"workspace"}),l(c,null),x(!0),v()},onCancel:()=>l(c,null),onEditSave:()=>{n.logEvent("update_conversation",c,{location:"workspace"}),l(c,null);let e=m.trim();b(e),N({title:e})},onSelect:S})})}function er(e){let{conversations:t}=e,{t:s}=(0,b.$G)("workspace"),[n,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),u=(0,r.useCallback)((e,t)=>{i(t),d(e)},[]);return 0===t.length?(0,a.jsx)(l,{variant:"ghost",children:(0,a.jsxs)(c,{className:"pt-6 flex flex-col gap-2 items-center",children:[(0,a.jsx)("div",{className:"bg-surface-l1 flex items-end justify-center p-4 rounded-full",children:(0,a.jsx)(es.Z,{className:"text-fg-tertiary",size:24,strokeWidth:1.5})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center gap-1 max-w-md font-medium",children:[s("workspace-conversations-list.empty.label","No conversations yet"),(0,a.jsx)("div",{className:"text-secondary font-normal",children:s("workspace-conversations-list.empty.cta","Start a new conversation in this workspace by typing in the input box at the top.")})]})]})}):(0,a.jsx)("div",{children:t.map(e=>{let t=e.conversationId;return(0,a.jsx)(en,{conversation:e,action:o===t?n:null,onActionRequest:u},t)})})}function ei(e){var t;let{t:s}=(0,b.$G)("workspace"),{workspace:n}=e,{workspaceId:i}=n,{data:o,isPending:l,isError:c,fetchNextPage:d,hasNextPage:u,isFetchingNextPage:p,refetch:m}=(0,w.Np)(null!=i?i:""),f=et((0,r.useCallback)(()=>{u&&!p&&d()},[u,p,d]));if(l)return(0,a.jsx)(el,{});let h=null!==(t=null==o?void 0:o.pages.flatMap(e=>{var t;return null!==(t=e.conversations)&&void 0!==t?t:[]}))&&void 0!==t?t:[];return(0,a.jsxs)(P.u,{fadeSize:"md",className:"py-2",children:[(0,a.jsx)(er,{conversations:h}),u&&!c&&(0,a.jsx)("div",{ref:f,className:"h-10 flex items-center justify-center",children:p?s("workspace-conversations-loading-more","Loading more"):s("workspace-conversations-scroll-to-load","Scroll to load more")}),c&&(0,a.jsx)(eo,{onRefetch:m})]})}function eo(e){let{onRefetch:t}=e,{t:s}=(0,b.$G)("workspace");return(0,a.jsxs)(l,{className:"flex flex-col items-center px-8 py-4",variant:"ghost",children:[s("conversations-loading-error.title","Unable to load conversations"),(0,a.jsx)(m.zx,{variant:"outline",onClick:t,children:s("conversations-loading-error.cta","Retry")})]})}function el(){return(0,a.jsx)(L,{children:(0,a.jsxs)("div",{role:"status","aria-busy":"true",className:"flex flex-col gap-1",children:[(0,a.jsx)(M.O,{className:"w-full h-10"}),(0,a.jsx)(M.O,{className:"w-full h-10"}),(0,a.jsx)(M.O,{className:"w-full h-10"})]})})}var ec=s(43627),ed=s(53161);let eu=(0,r.forwardRef)((e,t)=>{let{dragState:s,title:n,subtitle:r,className:o}=e,c=(0,i.cn)("absolute inset-0 flex flex-col items-center justify-center gap-1 border justify-center rounded-3xl bg-surface-l1","transition-opacity duration-300 ease-in-out","none"===s?"opacity-0 pointer-events-none":"opacity-100","hover"===s&&"bg-surface-l4-hover dark:bg-surface-l2",o),d="hover"===s;return(0,a.jsxs)(l,{variant:"ghost",className:(0,i.cn)(c),ref:t,children:[(0,a.jsxs)("div",{className:"flex items-center justify-center w-8 h-8",children:[(0,a.jsx)(ec.Z,{size:24,strokeWidth:1.5,className:(0,i.cn)("absolute transition-all duration-300 ease-in-out",d?"opacity-100 scale-100":"opacity-0 scale-75")}),(0,a.jsx)(ed.Z,{size:24,strokeWidth:1.5,className:(0,i.cn)("absolute transition-all duration-300 ease-in-out",d?"opacity-0 scale-75":"opacity-100 scale-100")})]}),(0,a.jsx)("span",{className:(0,i.cn)("font-semibold"),children:n}),(0,a.jsx)("span",{className:(0,i.cn)("text-secondary"),children:r})]})});var ep=s(13341),em=s(15419);function ef(e){let{ref:t,onDrop:s}=e,[a,n]=(0,ep.L)(()=>({accept:[em.FILE],canDrop:e=>!0,drop(e){let{files:t}=e;s(t)},collect:e=>e.isOver()?"hover":e.getItemType()===em.FILE?"in-page":"none"}),[s]);return n(t),a}function eh(e){let{onDrop:t,className:s}=e,{t:n}=(0,b.$G)("workspace"),{client:i}=(0,u.useStatsigClient)(),{attachFiles:o}=(0,X.GC)(),l=(0,r.useRef)(null),c=ef({ref:l,onDrop:(0,r.useCallback)(e=>{null==t||t(),o(e),e.forEach(e=>{i.logEvent("upload_file",e.name,{location:"workspace-query-file-drop",mimeType:e.type})})},[o,t,i])});return(0,a.jsx)(eu,{ref:l,dragState:c,title:n("workspace-query-dropzone.title","Attach to query"),subtitle:n("workspace-query-dropzone.description","Drop here to add files to query"),className:s})}var ex=s(86390),eg=s(30190);function eb(e){var t,s;let{open:n,onOpenChange:o,workspace:l}=e,{t:c}=(0,b.$G)("workspace"),d=null!==(t=l.customPersonality)&&void 0!==t?t:"",[u,p]=(0,r.useState)(d);(0,r.useEffect)(()=>{p(d)},[d,n]);let{mutate:f,error:h}=(0,w.Yl)(null!==(s=l.workspaceId)&&void 0!==s?s:"");(0,y.c)(h);let x=(0,r.useId)();return(0,a.jsxs)(k.c,{open:n,setOpen:o,contentClassName:(0,i.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-3xl","flex flex-col","md:overflow-hidden","px-6 py-6"),children:[(0,a.jsx)(v.fK,{children:(0,a.jsxs)(v.$N,{className:"flex justify-between text-lg",children:[c("workspace-instructions-modal.title","Workspace Instruction"),(0,a.jsx)(m.zx,{className:"-mt-2 -mr-2",variant:"ghost",size:"icon","aria-label":c("workspace-instructions-close.label","Close"),onClick:()=>o(!1),tabIndex:-1,children:(0,a.jsx)(j.b0,{size:18,className:"text-secondary"})})]})}),(0,a.jsx)("div",{className:"text-secondary",children:c("worspace-instruction.description","Grok will respond based on the instruction in all conversations associated with this workspace")}),(0,a.jsx)("label",{className:"sr-only",htmlFor:x,children:c("worspace-instruction.title","Custom instructions")}),(0,a.jsx)(eg.v,{value:u,onChange:p,isDirty:d!==u,onSave:e=>{p(e),f({customPersonality:e}),o(!1)},onReset:()=>{p(d),o(!1)},disabled:!1,textareaId:x})]})}function ej(e){let{workspace:t}=e,{t:s}=(0,b.$G)("workspace"),{client:n}=(0,u.useStatsigClient)(),[i,o]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m.zx,{variant:"outline",size:"pill",className:"group text-fg-primary",onClick:()=>{o(!0),n.logEvent("ws_instructions_click")},children:[(0,a.jsx)(ex.Z,{size:16,className:"text-fg-secondary group-hover:text-fg-primary transition-colors duration-100"}),s("workspace-intruction-button.label","Instruction")]}),(0,a.jsx)(eb,{workspace:t,open:i,onOpenChange:o})]})}var ev=s(40629),ey=s(48972),ew=s(3525),ek=s(8781),eN=s(41916),eC=s(31758);let eS=(0,r.memo)(e=>{let{t}=(0,b.$G)("workspace"),{icon:s,onChange:n}=e,[i,o]=(0,r.useState)(!1),l=(0,ek.w)();(0,r.useEffect)(()=>{o(!1)},[s]);let c=(0,r.useCallback)(e=>{o(!1),n((0,eC.c)(e))},[n]),d=(0,a.jsx)(m.zx,{variant:"ghost",size:"iconLg",className:"text-2xl","aria-label":t("workspace-icon.change","Change icon"),children:(0,a.jsx)(p.i,{icon:s,className:"size-6"})});return l?(0,a.jsxs)(ey.dy,{open:i,onOpenChange:o,children:[(0,a.jsx)(ey.Qz,{asChild:!0,children:d}),(0,a.jsxs)(ey.sc,{className:"p-1 max-h-[70dvh]",children:[(0,a.jsxs)(ey.OX,{className:"text-left flex justify-between items-center ",children:[(0,a.jsxs)(ey.iI,{className:"flex gap-2",children:[(0,a.jsx)(U.Z,{size:16,className:"text-secondary"}),t("workspace-icon-drawer.title","Pick new icon")]}),(0,a.jsx)(m.zx,{variant:"ghostSecondary","aria-label":t("close","Close"),onClick:()=>o(!1),children:(0,a.jsx)(eN.Z,{size:16})})]}),(0,a.jsx)(ev.$1,{onSelect:c})]})]}):(0,a.jsxs)(ew.J2,{open:i,onOpenChange:o,children:[(0,a.jsx)(ew.xo,{asChild:!0,children:d}),(0,a.jsx)(ew.yk,{className:"p-0 border",align:"start",children:(0,a.jsx)(ev.$1,{onSelect:c})})]})});var eI=s(44199);let eE=(0,r.memo)(e=>{var t,s;let{workspace:n,editing:i,onEditingChange:o}=e,{t:l}=(0,b.$G)("workspace"),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(i&&c.current){let e=setTimeout(()=>{var e;null===(e=c.current)||void 0===e||e.select()},200);return()=>clearTimeout(e)}},[i]);let[d,u]=(0,r.useState)(null!==(t=n.name)&&void 0!==t?t:"");(0,r.useEffect)(()=>{n.name&&u(n.name)},[n.name]);let{mutate:p,error:f}=(0,w.Yl)(null!==(s=n.workspaceId)&&void 0!==s?s:"");(0,y.c)(f),(0,r.useEffect)(()=>{if(f){var e;u(null!==(e=n.name)&&void 0!==e?e:"")}},[f,n.name]);let h=()=>{p({name:d}),o(!1)},x=(0,r.useId)();return i?(0,a.jsxs)("form",{className:"flex-1 flex gap-2 justify-between items-center min-w-0",onSubmit:e=>{e.preventDefault(),h()},children:[(0,a.jsx)("input",{type:"text",value:d,onChange:e=>{u(e.target.value)},onBlur:()=>{},className:"flex-1 bg-transparent text-2xl focus-visible:outline-none",id:x,ref:c,autoFocus:!0}),(0,a.jsx)(m.zx,{variant:"ghostSecondary",size:"iconLg","aria-label":l("workspace-name-save.label","Save"),type:"submit",disabled:!d,children:(0,a.jsx)(eI.Z,{size:16})})]}):(0,a.jsx)("h1",{className:"flex-1 bg-transparent text-2xl focus-visible:outline-none border-b-secondary min-w-0 truncate",children:d})}),e_=(0,r.memo)(function(e){var t;let{workspace:s}=e,{push:n}=(0,d.p)(),[i,o]=(0,r.useState)(!1),{mutate:l,error:c}=(0,w.Yl)(null!==(t=s.workspaceId)&&void 0!==t?t:"");(0,y.c)(c);let u=(0,r.useCallback)(e=>{l({icon:e})},[l]);return(0,a.jsxs)("div",{className:"flex flex-col @sm:flex-row items-start gap-6 @sm:gap-2 w-full",children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-1 @sm:gap-2 justify-start group min-w-0 w-full",children:[(0,a.jsx)(eS,{icon:s.icon,onChange:u}),(0,a.jsx)(eE,{workspace:s,editing:i,onEditingChange:o}),(0,a.jsx)(C,{workspace:s,className:"m-[1px]",iconSize:16,onDeleteStarted:()=>{n({page:"workspaces"})},onEditStarted:()=>{o(!0)}})]}),(0,a.jsx)(ej,{workspace:s})]})});function eT(e){var t;let{onDrop:s,className:n,workspaceId:i}=e,{t:o}=(0,b.$G)("workspace"),{client:l}=(0,u.useStatsigClient)(),{mutate:c,error:d}=(0,w.cL)(i);(0,y.c)(d);let p=J(i),{data:m}=(0,w.so)(i),f=null!==(t=null==m?void 0:m.assets)&&void 0!==t?t:[],h=(0,r.useRef)(null),x=ef({ref:h,onDrop:(0,r.useCallback)(e=>{if(null==s||s(),f.length+e.length>X.lH){p();return}e.forEach(e=>(l.logEvent("upload_file",e.name,{location:"workspace-file-drop",mimeType:e.type}),c(e)))},[f.length,s,p,l,c])});return(0,a.jsx)(eu,{ref:h,dragState:x,title:o("workspace-dropzone.title","Attach to workspace"),subtitle:o("workspace-dropzone.description","Drop here to add files to workspace"),className:n})}function ez(e){var t;let{workspace:s}=e,{t:n}=(0,b.$G)("chat"),{client:i}=(0,u.useStatsigClient)(),o=null!==(t=s.workspaceId)&&void 0!==t?t:"",l=(0,z.o)(),c=function(){let{client:e}=(0,u.useStatsigClient)();return t=>e.logEvent("create_workspace_convo",t)}(),{route:p,replace:m}=(0,d.p)(),[f,h]=(0,r.useState)(!1),x="workspace"===p.page&&p.tab||"conversations",{mutate:g,error:j}=(0,w.J2)({onSuccess:c});(0,y.c)(j);let v=function(e,t){let{client:s}=(0,u.useStatsigClient)(),a=(0,_.useSession)().user,n=(0,D.gK)(A.Z("establishNewConversation")),i=(0,R.F)(A.Z("isIncognito")),o=(0,D.gK)(A.Z("activeModelId")),l=(0,D.gK)(A.Z("outputMode")),c=(0,D.gK)(A.Z("reasoningMode")),d=(0,Z.g)();return(0,r.useCallback)(async(s,a,r,o,l,c)=>{if(!s)return!1;let u=await n({message:s,fileAttachmentIds:a,webpageUrls:r,toolOverrides:o,temporary:i,isPreset:l,persona:c,enableRetries:d.ENABLE_AUTO_STREAM_RETRY,workspaceIds:[e]}).catch(e=>{(0,O.H)("workspace:establishNewConversation",e)});return!!u&&(t(u),!0)},[o,a,d,s,i,l,c])}(o,e=>{g({conversationId:e.conversationId,workspaceId:o}),l.routeToConversation(e.conversationId),i.logEvent("ws_start_convo")});if(!o)return;let k=()=>{m({page:"workspace",workspaceId:o,tab:"attachments"})};return(0,a.jsxs)("div",{className:"flex-1 flex gap-6 h-full flex-col justify-between items-stretch overflow-hidden",children:[(0,a.jsx)(e_,{workspace:s}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto flex gap-6 flex-col @sm:flex-col-reverse",children:[(0,a.jsxs)(T.mQ,{value:x,className:"flex-1 overflow-hidden flex flex-col relative pt-1",children:[(0,a.jsxs)("div",{className:"flex justify-between sm:ms-1",children:[(0,a.jsxs)(T.dr,{className:"place-self-start !bg-transparent bg-none",children:[(0,a.jsx)(T.SP,{variant:"underline",value:"attachments",asChild:!0,children:(0,a.jsx)(d.r,{route:{page:"workspace",workspaceId:o,tab:"attachments"},children:n("workspace-tab.attachments","Attachments")})}),(0,a.jsx)(T.SP,{variant:"underline",value:"conversations",children:(0,a.jsx)(d.r,{route:{page:"workspace",workspaceId:o,tab:"conversations"},children:n("workspace-tab.conversations","Conversations")})})]}),(0,a.jsx)(ee,{workspaceId:o,onFileAddStarted:k})]}),(0,a.jsx)(T.nU,{value:"conversations",className:"overflow-auto pb-5",children:(0,a.jsx)(ei,{workspace:s})}),(0,a.jsx)(T.nU,{value:"attachments",className:"overflow-hidden flex-1 pb-5",children:(0,a.jsx)(W,{workspace:s,dialogOpen:f,onDialogOpenChange:h})}),(0,a.jsx)(eT,{workspaceId:o,onDrop:k})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(E.B,{className:"",textAreaClassName:"min-h-14 pt-5 my-0 mb-5",placeholder:n("workspac-query-placeholder","Start a conversation in this workspace"),onQuery:v,isIncognito:!1,onFrontPage:!1,expandable:!1},"query-bar"),(0,a.jsx)(eh,{className:"z-20"})]})]})]})}function eZ(e){let{workspaceId:t}=e,{t:s}=(0,b.$G)("chat"),{isPending:n,data:i,isError:o}=(0,w.cF)(t);return((0,r.useEffect)(()=>{(null==i?void 0:i.name)&&(document.title=i.name+" - Grok")},[i]),n)?null:o?(0,a.jsx)(I._,{title:s("workspace-error.title","Error"),description:s("workspace-error.description","There was an issue finding ID {{workspaceId}}",{workspaceId:t}),cta:s("workspace-error.cta","Go Home")}):(0,a.jsx)(ez,{workspace:i})}var eO=s(11286),eR=s(62346),eA=s(2565);function eD(e){let{variant:t,onClick:s,className:n}=e,{t:r}=(0,b.$G)("workspace"),{add:o,isPending:l}=(0,eA.V)(),c="square"===t,d=(0,i.cn)("px-2 rounded-xl shadow-none bg-transparent h-9 w-9 sm:w-auto sm:h-auto",c&&"h-9 w-9",n);return(0,a.jsxs)(m.zx,{variant:"outline",className:d,onClick:()=>{null==s||s(),o()},"aria-busy":l,"aria-label":l?r("add-workspace-button.pending","Creating workspace"):r("add-workspace-button.description","Add new workspace"),children:[l?(0,a.jsx)(eO.Z,{className:"animate-spin",size:16,"aria-hidden":!0}):(0,a.jsx)(eR.Z,{size:16,"aria-hidden":!0}),(0,a.jsx)("span",{className:"hidden sm:block",children:c||r("add-workspace-button.label","Add")})]})}var eL=s(65671);function eP(e){var t;let{className:s}=e,{client:n}=(0,u.useStatsigClient)(),{t:o}=(0,b.$G)("workspace"),{data:c,fetchNextPage:d,hasNextPage:p,isFetchingNextPage:m,isPending:f,isError:h,refetch:x}=(0,w._O)(),g=et((0,r.useCallback)(()=>{p&&!m&&d()},[p,m,d]));if(f)return(0,a.jsx)(eK,{});if(h)return(0,a.jsx)(eM,{onRetry:x});let j=null!==(t=null==c?void 0:c.pages.flatMap(e=>{var t;return null!==(t=e.workspaces)&&void 0!==t?t:[]}))&&void 0!==t?t:[],v=(0,i.cn)("pb-8",s);if(0===j.length)return(0,a.jsxs)(l,{variant:"ghost",className:"p-6 flex flex-col items-center",children:[(0,a.jsx)(U.Z,{size:16,className:"text-secondary"}),(0,a.jsx)("div",{children:o("workspace-list-empty.title","No workspaces yet")}),(0,a.jsx)("div",{className:"text-secondary",children:o("workspace-list-empty.subtitle","Create a new workspace")})]});let y=()=>{n.logEvent("ws_nav_click",void 0,{location:"workspaces"})};return(0,a.jsxs)("div",{"data-testid":"workspaces-list",className:v,children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:j.map(e=>(0,a.jsx)(S,{workspace:e,onClick:y},e.workspaceId))}),p&&(0,a.jsx)("div",{ref:g,className:"text-center mt-8",children:m?o("workspaces-loading.label","Loading more"):o("workspaces-scrollto.label","Scroll to load more")})]})}function eM(e){let{onRetry:t}=e,{t:s}=(0,b.$G)("workspace");return(0,a.jsxs)(l,{variant:"ghost",className:"p-8 flex flex-col gap-4 items-center text-center",children:[(0,a.jsx)(eL.Z,{className:"size-4"}),s("workspaces-error.description","An issue occurred when loading your workspaces"),(0,a.jsx)(m.zx,{variant:"outline",className:"shadow-none",onClick:t,children:s("workspaces-error.cta","Try again")})]})}function eK(){return(0,a.jsx)(L,{children:(0,a.jsxs)("div",{className:"flex flex-col @sm:flex-row gap-3",children:[(0,a.jsx)(eF,{}),(0,a.jsx)(eF,{}),(0,a.jsx)(eF,{})]})})}function eF(){return(0,a.jsxs)(l,{variant:"ghost",className:"flex-1 rounded-xl p-4 flex @sm:flex-col items-center  @sm:items-start gap-4",children:[(0,a.jsx)(M.O,{className:"bg-surface-l1 w-8 h-8 rounded-full"}),(0,a.jsx)(M.O,{className:"bg-surface-l1 w-32 h-4"})]})}function eU(){let{client:e}=(0,u.useStatsigClient)(),{t}=(0,b.$G)("workspace");return(0,a.jsxs)("main",{className:"w-full h-full flex flex-col",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex justify-between align-center my-6 min-h-[42px]",children:[(0,a.jsxs)("h1",{className:"text-2xl flex gap-2 items-center",children:[(0,a.jsx)(U.Z,{size:24,className:"min-w-8"}),t("workspaces-page.title","Workspaces")]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(eD,{onClick:()=>{e.logEvent("ws_create_click",void 0,{location:"workspaces"})}})})]})}),(0,a.jsx)(P.u,{children:(0,a.jsx)(eP,{})})]})}},2565:function(e,t,s){"use strict";s.d(t,{V:function(){return u}});var a=s(40629),n=s(18486),r=s(3453);function i(e){return e[Math.floor(Math.random()*e.length)]}var o=s(74239),l=s(14075),c=s(70702),d=s(31758);function u(){let{t:e}=(0,c.$G)("workspace"),{client:t}=(0,o.useStatsigClient)(),s=(0,l.useRouter)(),{mutate:u,isPending:p}=(0,n.Wq)({onError:r.xo,onSuccess:e=>(t.logEvent("ws_create",e.workspaceId),s.push("/workspace/".concat(e.workspaceId)))});return{isPending:p,add:()=>{u({name:e("workspace-default-name","New Workspace"),icon:function(){let e=i(Object.keys(a.ci)),t=i(a.O9);return(0,d.c)({icon:e,color:t})}()})}}}},31758:function(e,t,s){"use strict";s.d(t,{c:function(){return n},g:function(){return r}});var a=s(40629);function n(e){return"l:".concat(e.icon,":").concat(e.color)}function r(e){let t=RegExp("^l:(?<icon>[^:]+):(?<color>[^:]+)$"),s=e.match(t);if(null==s?void 0:s.groups){let{color:e,icon:t}=s.groups;if(a.O9.includes(e)&&a.ci[t])return{color:e,icon:t}}return null}},1358:function(e,t,s){"use strict";s.d(t,{i:function(){return o}});var a=s(2899),n=s(40629),r=s(91665),i=s(31758);function o(e){let{icon:t,className:s,size:o}=e;if(!t)return(0,a.jsx)(r.Z,{className:s,size:o});let l=(0,i.g)(t);return l?(0,a.jsx)(n.mO,{value:l,className:s,size:o}):(0,a.jsx)(r.Z,{className:s})}},65021:function(e,t,s){"use strict";s.d(t,{L:function(){return E}});var a=s(2899),n=s(65924),r=s(6087),i=s(72802),o=s(34116),l=s(97404),c=s(37446),d=s(94408),u=s(50462),p=s(8781),m=s(18486),f=s(72242),h=s(74239),x=s(62346),g=s(91665),b=s(80893),j=s(4694),v=s(70702),y=s(2565),w=s(1358),k=s(65671);function N(e){let{onRetryClick:t}=e,{t:s}=(0,v.$G)("workspace");return(0,a.jsxs)("div",{className:"p-8 flex flex-col gap-2 items-center text-center text-secondary @sm:min-w-[240px] text-sm",children:[(0,a.jsx)(k.Z,{}),s("workspaces-pill-loading-error.label","An issue occurred while loading your workspaces"),(0,a.jsx)(o.zx,{variant:"outline",onClick:t,className:"rounded-xl shadow-none",children:s("workspaces-pill-loading-error.cta","Try again")})]})}var C=s(48972),S=s(41916);function I(e){let{open:t,onOpenChange:s,children:n}=e,{t:r}=(0,v.$G)("workspace");return(0,a.jsx)(C.dy,{open:t,onOpenChange:s,children:(0,a.jsxs)(C.sc,{className:"p-1 max-h-[70dvh]",children:[(0,a.jsxs)(C.OX,{className:"text-left flex justify-between items-center ",children:[(0,a.jsxs)(C.iI,{className:"flex gap-2",children:[(0,a.jsx)(g.Z,{size:16,className:"text-secondary"}),r("workspace-pill-drawer.title","Workspaces")]}),(0,a.jsx)(o.zx,{variant:"ghostSecondary","aria-label":r("close","Close"),onClick:()=>s(!1),children:(0,a.jsx)(S.Z,{size:16})})]}),n]})})}let E=(0,j.memo)(()=>{var e;let[t,s]=(0,j.useState)(!1),{client:r}=(0,h.useStatsigClient)(),{data:i,isPending:d,isError:f,refetch:g}=(0,m.ku)(),{add:k,isPending:C}=(0,y.V)(),{t:S}=(0,v.$G)("workspace"),E=(0,p.w)(),[Z,O]=(0,u._)("workspace-pill-clicked-before",!1);if(d)return(0,a.jsx)(_,{createdBefore:Z});let R=null!==(e=null==i?void 0:i.workspaces)&&void 0!==e?e:[];if(0===R.length&&!f)return(0,a.jsx)(z,{onClick:()=>O(!0)});let A=()=>{r.logEvent("ws_workspace_menu_toggle")},D=()=>{g(),s(!1)},L=()=>{r.logEvent("ws_all_click",void 0,{location:"popup"})},P=()=>{r.logEvent("ws_nav_click",void 0,{location:"popup"})},M=()=>{k(),r.logEvent("ws_create_click",void 0,{location:"popup"}),O(!0)};return E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T,{onClick:()=>{A(),s(!0)}}),(0,a.jsx)(I,{open:t,onOpenChange:s,children:f?(0,a.jsx)(N,{onRetryClick:D}):(0,a.jsxs)("div",{className:"h-full overflow-hidden flex flex-col gap-2 px-2 pb-2",children:[(0,a.jsx)(n.u,{children:(0,a.jsx)("ul",{className:"flex flex-col gap-1",children:R.map(e=>(0,a.jsx)("li",{className:"hover:bg-button-ghost-hover rounded-xl px-3 py-3",children:(0,a.jsxs)(b.default,{href:"/workspace/".concat(e.workspaceId),className:"flex gap-2 items-center",title:e.name,onClick:P,children:[(0,a.jsx)("span",{children:(0,a.jsx)(w.i,{icon:e.icon,className:"size-4"})}),(0,a.jsx)("span",{className:"flex-1 truncate text-sm",children:e.name})]})},e.workspaceId))})}),(0,a.jsxs)("div",{className:"grid gap-1 grid-cols-2",children:[(0,a.jsxs)(o.zx,{variant:"outline",onClick:M,className:"flex gap-2 bg-transparent text-primary shadow-none rounded-xl hover:bg-button-ghost-hover m-[1px]",children:[(0,a.jsx)("div",{className:"w-3",children:C?(0,a.jsx)(c.$,{size:"xs"}):(0,a.jsx)(x.Z,{size:16})}),S("workspace-add-new.label","Add new")]}),(0,a.jsx)(o.zx,{variant:"outline",asChild:!0,className:"bg-transparent text-primary shadow-none rounded-xl hover:bg-button-ghost-hover m-[1px]",children:(0,a.jsx)(b.default,{href:"/workspace",prefetch:!0,onClick:L,children:S("workspaces-page-link.label","See all")})})]})]})})]}):(0,a.jsxs)(l.h_,{onOpenChange:e=>{e&&A()},children:[(0,a.jsx)(l.$F,{tabIndex:-1,className:"focus:outline-none group",children:(0,a.jsx)(T,{onClick:()=>{},role:""})}),(0,a.jsx)(l.AW,{className:"min-w-40 max-w-[400px] space-y-0.5 pt-0",align:"start",children:f?(0,a.jsx)(N,{onRetryClick:D}):(0,a.jsxs)("div",{className:"h-full overflow-hidden flex flex-col",children:[(0,a.jsx)(n.u,{children:(0,a.jsx)("div",{className:"flex flex-col gap-1 max-h-[200px]",children:R.map(e=>(0,a.jsx)(l.Xi,{asChild:!0,children:(0,a.jsxs)(b.default,{href:"/workspace/".concat(e.workspaceId),className:"flex gap-2 items-center",title:e.name,onClick:P,children:[(0,a.jsx)("span",{children:(0,a.jsx)(w.i,{icon:e.icon,className:"size-4"})}),(0,a.jsx)("span",{className:"flex-1 truncate text-sm",children:e.name})]},e.workspaceId)},e.workspaceId))})}),(0,a.jsxs)("div",{className:"grid gap-1 grid-cols-2",children:[(0,a.jsx)(l.Xi,{asChild:!0,children:(0,a.jsxs)(o.zx,{variant:"outline",onClick:M,className:"flex gap-2 bg-transparent text-primary shadow-none rounded-xl hover:bg-button-ghost-hover m-[1px]",children:[(0,a.jsx)("div",{className:"w-3",children:C?(0,a.jsx)(c.$,{size:"xs"}):(0,a.jsx)(x.Z,{size:16})}),S("workspace-add-new.label","Add new")]})}),(0,a.jsx)(l.Xi,{asChild:!0,children:(0,a.jsx)(o.zx,{variant:"outline",asChild:!0,className:"bg-transparent text-primary shadow-none rounded-xl hover:bg-button-ghost-hover m-[1px]",children:(0,a.jsx)(b.default,{href:"/workspace",prefetch:!0,onClick:L,children:S("workspaces-page-link.label","See all")})})})]})]})})]})});function _(e){let{createdBefore:t}=e,{t:s}=(0,v.$G)("workspace");return(0,a.jsxs)(Z,{"data-testid":"loading",children:[(0,a.jsx)("p",{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:s("workspace-pill.label","Workspaces")}),t?(0,a.jsx)(r.v4,{className:"text-secondary group-data-[state=open]:rotate-180 transition-rotate duration-200",size:12}):(0,a.jsx)("span",{className:"text-orange-400 dark:text-orange-300",children:s("workspace-pill.new","New")})]})}function T(e){let{t}=(0,v.$G)("workspace");return(0,a.jsxs)(Z,{...e,children:[(0,a.jsx)("p",{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:t("workspace-pill.label","Workspaces")}),(0,a.jsx)(r.v4,{className:"text-secondary group-data-[state=open]:rotate-180 transition-rotate duration-200",size:12})]})}function z(e){let{onClick:t}=e,{client:s}=(0,h.useStatsigClient)(),{t:n}=(0,v.$G)("workspace"),{add:r,isPending:i}=(0,y.V)();return(0,a.jsxs)(d.u,{children:[(0,a.jsx)(d.aJ,{asChild:!0,children:(0,a.jsxs)(Z,{onClick:()=>{r(),s.logEvent("ws_create_click",void 0,{location:"main"}),t()},children:[(0,a.jsx)("p",{className:"overflow-hidden whitespace-nowrap text-ellipsis",children:n("workspace-pill.label","Workspaces")}),i?(0,a.jsx)(c.$,{size:"xs"}):(0,a.jsx)("span",{className:"text-orange-400 dark:text-orange-300",children:n("workspace-pill.new","New")})]})}),(0,a.jsx)(d._v,{side:"bottom",className:"max-w-md",children:n("workspace-pill.tooltip","Workspaces help you group files, chats, and custom instructions for seamless, organized workflows.")})]})}let Z=(0,j.forwardRef)((e,t)=>{let{children:s,className:n,...r}=e,o=(0,f.cn)("flex gap-2",n);return(0,a.jsxs)(i.M,{tabIndex:0,...r,className:o,ref:t,children:[(0,a.jsx)(g.Z,{size:18,strokeWidth:2,className:"text-secondary"}),s]})})},28147:function(e,t,s){"use strict";s.d(t,{$Y:function(){return r},DA:function(){return a},zS:function(){return n}});let a="/connect-oauth-error",n="/api/exchange-token/",r="oauth_provider"},83711:function(e,t,s){"use strict";s.d(t,{C6:function(){return i},FG:function(){return o},VM:function(){return n},Zz:function(){return c},aj:function(){return l},gu:function(){return d},op:function(){return r}}),s(2899);var a=s(70702);let n="cmd+j, ctrl+j",r="cmd+shift+j, ctrl+shift+j",i="cmd+k, ctrl+shift+k",o="cmd+enter, ctrl+enter",l="cmd+,, ctrl+,",c="cmd+shift+p, ctrl+shift+p",d="cmd+s, ctrl+s";a.cC,a.cC,a.cC,a.cC,a.cC},12363:function(e,t,s){"use strict";s.d(t,{U:function(){return l}});var a=s(17010),n=s(88101),r=s(43701),i=s(56672),o=s(4694);let l=()=>{let e=(0,r.F)(i.Z("selectedLanguage"));return(0,o.useMemo)(()=>e||a.Z.languages.find(e=>e in n.l2)||n.sm,[a.Z.languages,e])}},32790:function(e,t,s){"use strict";s.d(t,{c:function(){return r}});var a=s(3453),n=s(4694);function r(e){(0,n.useEffect)(()=>{e&&(0,a.xo)(e)},[e])}},69195:function(e,t,s){"use strict";s.d(t,{GC:function(){return u},iQ:function(){return p},lH:function(){return d}});var a=s(69492),n=s(49810),r=s(41307),i=s(56672),o=s(4694),l=s(70702),c=s(75361);let d=10;function u(){let{t:e}=(0,l.$G)("base"),t=(0,a.gK)(i.Z("conversationId")),s=(0,r.O)(i.Z("listByConversationId")),n=(0,r.O)(i.Z("delistByConversationId")),u=(0,r.O)(i.Z("attachListByConversationId")),p=(0,r.O)(i.Z("fetchUploadFile")),m=t||"no_conversation_id",f=s[m]||[];return{attachFiles:(0,o.useCallback)(t=>{var s;if(!t.length)return!1;let a=null!==(s=u[m])&&void 0!==s?s:[],n=t.filter(e=>(e.type,!0));if(f.length+a.length+n.length>d){c.Am.error(e("Can only submit a maximum of max files per message. Please remove some files before uploading more.","Can only submit a maximum of {{max}} files per message. Please remove some files before uploading more.",{max:d}));return}n.forEach(e=>{p(e,m).metadataPromise.catch(e=>{c.Am.error(e.message)})})},[f,m,u]),detachFile:(0,o.useCallback)((e,t)=>{if(!e.current){t&&n(m,t);return}let s=e.current.files;if(!s||!t)return;let a=new DataTransfer;Array.from(s).forEach(e=>{e!=e&&a.items.add(e)}),e.current.files=a.files,n(m,t)},[m])}}function p(e){return({".png":"image/png",".jpg":"image/jpeg",".jpeg":"image/jpeg",".webp":"image/webp",".txt":"text/plain",".log":"text/plain",".md":"text/plain",".csv":"application/csv",".json":"application/json",".yaml":"application/x-yaml",".yml":"application/x-yaml",".xml":"application/xml",".toml":"application/toml",".pdf":"application/pdf",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})[e.startsWith(".")?e.toLowerCase():"."+e.toLowerCase()]||"text/plain"}n.Hu,n.Vb,n.JY},36183:function(e,t,s){"use strict";s.d(t,{m:function(){return r}});var a=s(72242),n=s(4694);function r(){let e=(0,n.useRef)(null),[t,s]=(0,n.useState)(!1),[r,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let t=()=>{e.current&&(e.current.scrollLeft>0?s(!0):s(!1),e.current.scrollLeft+e.current.clientWidth>=e.current.scrollWidth?i(!0):i(!1))},a=e.current;return a&&a.addEventListener("scroll",t),()=>{a&&a.removeEventListener("scroll",t)}},[]),{scrollRef:e,className:(0,a.cn)("will-change-[mask-image] @sm:[mask-image:none]",{"[mask-image:linear-gradient(to_right,transparent_0,black_0px,black_calc(100%_-_40px),transparent_100%)]":!t,"[mask-image:linear-gradient(to_right,transparent_0,black_20px,black_calc(100%_-_40px),transparent_100%)]":t&&!r,"[mask-image:linear-gradient(to_right,transparent_0,black_20px,black_100%)]":t&&r})}}},38040:function(e,t,s){"use strict";s.d(t,{y:function(){return r}});var a=s(99306),n=s(4694);function r(e,t,s){(0,n.useEffect)(()=>((0,a.Z)(e,t),()=>a.Z.unbind(e,t)),[...s,e])}a.Z.filter=()=>!0},385:function(e,t,s){"use strict";s.d(t,{D:function(){return r}});var a=s(4694);function n(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function r(){let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(n)},[]),e}},25634:function(e,t,s){"use strict";s.d(t,{h:function(){return i}});var a=s(26777),n=s(15149),r=s(67206);function i(){let{user:e}=(0,a.kP)();return(0,r.aM)({queryKey:["oauth-connectors"],queryFn:async()=>{var e;let t=await (0,n.kG)("/api/oauth-connectors",{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json()).error);return null!==(e=(await t.json()).oauthConnectors)&&void 0!==e?e:[]},enabled:!!e,staleTime:6e4})}},18486:function(e,t,s){"use strict";s.d(t,{J2:function(){return C},RL:function(){return h},ri:function(){return E},Wq:function(){return g},Fi:function(){return p},vm:function(){return I},qp:function(){return x},uq:function(){return f},ku:function(){return c},Yl:function(){return b},DA:function(){return S},cL:function(){return j},_6:function(){return y},mx:function(){return k},cF:function(){return d},so:function(){return m},Np:function(){return N},_O:function(){return u}});var a=s(54596);let n=a.z.object({workspaceId:a.z.string(),name:a.z.string(),createTime:a.z.string(),lastUseTime:a.z.string(),icon:a.z.string(),customPersonality:a.z.string().optional()});a.z.object({workspaces:a.z.array(n),nextPageToken:a.z.string().optional()});let r=["workspaces","recent"];var i=s(46913),o=s(67206),l=s(98437).lW;function c(){return(0,o.aM)({queryKey:r,queryFn:()=>i.UZ.workspaceRepositoryListWorkspaces({pageSize:20,orderBy:"ORDER_BY_LAST_USE_TIME"})})}function d(e){return(0,o.aM)({queryKey:["workspaces",e],queryFn:()=>i.UZ.workspaceRepositoryGetWorkspace({workspaceId:e})})}function u(){return(0,o.NS)({queryKey:["workspaces"],queryFn:e=>{let{pageParam:t}=e;return i.UZ.workspaceRepositoryListWorkspaces({pageSize:63,orderBy:"ORDER_BY_LAST_USE_TIME",pageToken:t||void 0})},initialPageParam:"",getNextPageParam:e=>e.nextPageToken})}function p(e){let t=(0,o.NL)();return(0,o.Db)({mutationFn:()=>i.UZ.workspaceRepositoryDeleteWorkspace({workspaceId:e}),mutationKey:["delete-workspace",e],onSuccess:()=>{t.invalidateQueries({queryKey:["workspaces"]})}})}function m(e){return(0,o.aM)({queryKey:["workspace-assets",e],queryFn:()=>i.af.assetRepositoryListAssetMetadata({workspaceId:e,pageSize:100,orderBy:"ORDER_BY_LAST_USE_TIME"})})}function f(){return(0,o.aM)({queryKey:["assets","recent"],queryFn:()=>i.af.assetRepositoryListAssetMetadata({pageSize:9,orderBy:"ORDER_BY_LAST_USE_TIME"})})}function h(e){let t=(0,o.NL)();return(0,o.Db)({mutationFn:t=>i.UZ.workspaceRepositoryAddAsset({workspaceId:e,body:{assetId:t.assetId}}),onMutate:async s=>{let a=["workspace-assets",e];await t.cancelQueries({queryKey:a});let n=t.getQueryData(a);return t.setQueryData(a,e=>{var t;return{...e,assets:[s,...null!==(t=e.assets)&&void 0!==t?t:[]]}}),n},onError:(s,a,n)=>{let r=["workspace-assets",e];t.setQueryData(r,n)}})}function x(e){let t=(0,o.NL)();return(0,o.Db)({mutationFn:t=>i.UZ.workspaceRepositoryRemoveAsset({workspaceId:e,assetId:t}),onMutate:async s=>{let a=["workspace-assets",e];await t.cancelQueries({queryKey:a});let n=t.getQueryData(a);return t.setQueryData(a,e=>{var t;return{...e,assets:null===(t=e.assets)||void 0===t?void 0:t.filter(e=>e.assetId!==s)}}),n},onError:(s,a,n)=>{let r=["workspace-assets",e];t.setQueryData(r,n)}})}function g(e){let{onSuccess:t,onError:s}=e,a=(0,o.NL)();return(0,o.Db)({mutationFn:e=>i.UZ.workspaceRepositoryCreateWorkspace({body:e}),onSuccess:e=>{a.invalidateQueries({queryKey:["workspaces"]}),t(e)},onError:s})}function b(e){let t=(0,o.NL)();return(0,o.Db)({mutationFn:t=>i.UZ.workspaceRepositoryUpdateWorkspace({workspaceId:e,body:t}),mutationKey:["update-workspace",e],onSuccess:s=>{t.invalidateQueries({queryKey:["workspaces"],type:"inactive"}),t.invalidateQueries({queryKey:["conversation-workspaces"]}),t.setQueryData(["workspaces",e],s)}})}function j(e){let t=(0,o.NL)();return(0,o.Db)({mutationFn:t=>v(t,e),mutationKey:["upload-file",e],onSuccess(){t.invalidateQueries({queryKey:["workspace-assets",e]})}})}async function v(e,t){let s=await e.arrayBuffer(),a=await i.xU.chatUploadFile({body:{fileName:e.name,fileMimeType:e.type,content:l.from(s).toString("base64")}});return i.UZ.workspaceRepositoryAddAsset({workspaceId:t,body:{assetId:a.fileMetadataId}})}function y(e){let t=(0,o.NL)();return(0,o.Db)({mutationFn:t=>w(t.name,t.mimeType,t.fileSource,t.thirdPartyFileId,e),mutationKey:["upload-file",e],onSuccess(){t.invalidateQueries({queryKey:["workspace-assets",e]})}})}async function w(e,t,s,a,n){let r=await i.xU.chatUploadFile({body:{fileName:e,fileMimeType:t,fileSource:s,thirdPartyFileId:a}});return i.UZ.workspaceRepositoryAddAsset({workspaceId:n,body:{assetId:r.fileMetadataId}})}function k(e){return(0,o.So)({filters:{mutationKey:["upload-file",e]}}).filter(e=>"success"!==e.status).map(e=>e.variables)}function N(e){return(0,o.NS)({queryKey:["workspace-conversations",e],queryFn:t=>{let{pageParam:s}=t;return i.xU.chatListConversations({workspaceId:e,pageSize:"100",pageToken:s||void 0})},initialPageParam:"",getNextPageParam:e=>e.nextPageToken})}function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.NL)();return(0,o.Db)({mutationFn:e=>{let{workspaceId:t,conversationId:s}=e;return i.UZ.workspaceRepositoryAddConversation({workspaceId:t,body:{conversationId:s}})},mutationKey:["add-workspace-conversation"],onSuccess:(s,a)=>{var n;let{workspaceId:r,conversationId:i}=a;t.invalidateQueries({queryKey:["workspace-conversations",r]}),t.invalidateQueries({queryKey:["conversation-workspaces",i]}),null===(n=e.onSuccess)||void 0===n||n.call(e,i)}})}function S(e){let t=(0,o.NL)();return(0,o.Db)({mutationFn:t=>i.xU.chatUpdateConversation({conversationId:e,body:t}),mutationKey:["update-conversation",e],onSuccess:()=>{t.invalidateQueries({queryKey:["workspace-conversations"]})}})}function I(e){let t=(0,o.NL)();return(0,o.Db)({mutationFn:()=>i.xU.chatDeleteConversation({conversationId:e}),mutationKey:["delete-conversation",e],onSuccess:()=>{t.invalidateQueries({queryKey:["workspace-conversations"]})}})}function E(e,t){return(0,o.aM)({queryKey:["conversation-workspaces",e],queryFn:async()=>{var t;let s=await i.xU.chatGetConversation({conversationId:e,includeWorkspaces:!0});return null!==(t=null==s?void 0:s.workspaces)&&void 0!==t?t:[]},enabled:!t})}},49810:function(e,t,s){"use strict";s.d(t,{AB:function(){return o},Hu:function(){return a},JY:function(){return r},LA:function(){return u},Vb:function(){return n},Vh:function(){return p},hW:function(){return c},t0:function(){return i},vG:function(){return d},vU:function(){return l}});let a="application/vnd.google-apps.document",n="application/vnd.google-apps.spreadsheet",r="application/vnd.google-apps.presentation",i="application/msword",o="application/vnd.openxmlformats-officedocument.wordprocessingml.document",l="application/vnd.ms-excel",c="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",d="application/vnd.ms-powerpoint",u="application/vnd.openxmlformats-officedocument.presentationml.presentation";function p(e,t){if(!t)return;let s=new URL(e);return s.pathname=t,s.toString()}},17010:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(87325),n=s(64944),r=s(70702),i=s(88101),o=s(6848);a.ZP.use(o.Z).use(r.Db).use((0,n.Z)((e,t)=>s(75006)("./".concat(e,"/").concat(t,".json")))).init({fallbackLng:"en",supportedLngs:i.bB.map(e=>e[0]),debug:!1,detection:{lookupLocalStorage:"i18nextLng",lookupCookie:"i18nextLng",order:["localStorage","cookie","navigator"],caches:["localStorage","cookie"],cookieMinutes:525600},partialBundledLanguages:!0,nonExplicitSupportedLngs:!1,react:{bindI18n:"loaded languageChanged",bindI18nStore:"added",useSuspense:!0}});var l=a.ZP},88101:function(e,t,s){"use strict";s.d(t,{bB:function(){return o},k1:function(){return r},l2:function(){return i},nD:function(){return a},sm:function(){return n},w1:function(){return c}});let a=["ar","de","en","es","fr","id","it","ja","ko","nl","pl","pt","ru","sv","tr","uk-UA","vi","zh","zh-TW"],n="en",r={ar:{nativeName:"",name:"Arabic"},en:{nativeName:"English",name:"English"},es:{nativeName:"Espa\xf1ol",name:"Spanish"},de:{nativeName:"Deutsch",name:"German"},fr:{nativeName:"Fran\xe7ais",name:"French"},id:{nativeName:"Bahasa Indonesia",name:"Indonesian"},it:{nativeName:"Italiano",name:"Italian"},ja:{nativeName:"",name:"Japanese"},pl:{nativeName:"Polski",name:"Polish"},ko:{nativeName:"",name:"Korean"},nl:{nativeName:"Nederlands",name:"Dutch"},pt:{nativeName:"Portugu\xeas",name:"Portuguese"},ru:{nativeName:"",name:"Russian"},sv:{nativeName:"Svenska",name:"Swedish"},tr:{nativeName:"T\xfcrk\xe7e",name:"Turkish"},"uk-UA":{nativeName:" ",name:"Ukrainian"},vi:{nativeName:"Ting Vit",name:"Vietnamese"},zh:{nativeName:"",name:"Simplified Chinese"},"zh-TW":{nativeName:"",name:"Traditional Chinese"}},i=Object.entries(r).reduce((e,t)=>{let[s,a]=t;return e[s]=a.nativeName,e},{}),o=Object.entries(i),l=new Set(["ar","he","fa","ur","ps","sd","ug","ha","ks","ku"]);function c(e){if(!e)return"ltr";let t=e.split("-")[0].toLowerCase();return l.has(t)?"rtl":"ltr"}},38453:function(e,t,s){"use strict";s.d(t,{p:function(){return m},r:function(){return p}});var a=s(2899),n=s(14075),r=s(91218),i=s(4694),o=s(65692);let l=["conversations","attachments"],c=new r.y("/workspace"),d=new r.y("/workspace/:id");function u(e){switch(e.page){case"main":case"unknown":return{pathname:"/"};case"workspaces":return{pathname:"/workspace"};case"workspace":return{pathname:"/workspace/"+e.workspaceId,query:{tab:"attachments"!==e.tab?e.tab:void 0}};default:return console.error("Unhandled route case:",e),{}}}let p=(0,i.forwardRef)((e,t)=>{let{route:s,onClick:n,...r}=e,o=(0,i.useMemo)(()=>f(u(s)),[s]),l=(0,i.useCallback)(e=>{var t;null==n||n(e),e.defaultPrevented||function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||2===e.button}(e)||(e.preventDefault(),null===(t=globalThis)||void 0===t||t.window.history.pushState({},"",o))},[n,o]);return(0,a.jsx)("a",{...r,onClick:l,href:o,ref:t})});function m(){let{push:e,replace:t}=(0,n.useRouter)(),s=(0,n.usePathname)(),a=(0,n.useSearchParams)(),r=(0,i.useCallback)(t=>{e(f(u(t)))},[e]),o=(0,i.useCallback)(e=>{t(f(u(e)))},[t]);return(0,i.useMemo)(()=>({push:r,replace:o,route:function(e,t){if("/"===e)return{page:"main"};if(c.test(e))return{page:"workspaces"};let s=d.test(e);if(null==s?void 0:s.id){var a,n;let e=null!==(a=t.get("tab"))&&void 0!==a?a:"";return{page:"workspace",workspaceId:s.id,tab:null!==(n=l.includes(e)?e:void 0)&&void 0!==n?n:"attachments"}}return{page:"unknown"}}(s,a)}),[r,o,s,a.toString()])}function f(e){if(e.query&&"string"!=typeof e.query)for(let t in e.query)void 0===e.query[t]&&delete e.query[t];return(0,o.format)(e)}},73848:function(e,t,s){"use strict";s.d(t,{b:function(){return i},p:function(){return o}});var a=s(95315);let n=/^(https?:\/\/)?[^\s/]+\.[^\s/]+(\/[^\s/]+)*\/?$/i,r=/\.(jpg|jpeg|png|gif|bmp|webp|tiff?|svg)$/i;function i(e){try{let t=new URL(e).hostname;return null==t?void 0:t.replace(/^www\./,"")}catch(t){return e}}function o(e){if(!n.test(e))return!1;let{domain:t,isIcann:s}=(0,a.Qc)(e,{detectIp:!1,mixedInputs:!1});return!(!t||!s||r.test(e))}},3189:function(e,t,s){"use strict";s.d(t,{a:function(){return m}});var a=s(29598),n=s(46913),r=s(30722),i=s.n(r),o=s(41307);let l={},c={},d={},u={};class p{constructor(e,t){this.set=e,this.get=t,this.byId=l,this.promiseById=c,this.listByReq=d,this.promiseListByReq=u,this.upsertAsset=(0,a.H)(this.set,"byId","assetId"),this.appendAssets=(0,a.R3)(this.set,"byId","assetId"),this.removeAsset=(0,a.Od)(this.set,"byId"),this.idsertPromise=(0,a.Qd)(this.set,"promiseById"),this.removePromise=(0,a.Od)(this.set,"promiseById"),this.idsertList=(0,a.Qd)(this.set,"listByReq"),this.idsertPromiseList=(0,a.Qd)(this.set,"promiseListByReq"),this.fetchCreateAsset=e=>{let t=this.get(),s=n.af.assetRepositoryCreateAsset({body:e}).then(e=>e);return s.then(e=>{t.idsertPromise(s,e.assetId),t.upsertAsset(e)}),s},this.fetchDeleteAsset=e=>{let t=this.get(),s=n.af.assetRepositoryDeleteAsset(e);return t.removePromise(e.assetId),t.removeAsset(e.assetId),s},this.fetchDeleteAssetMetadata=e=>{let t=this.get(),s=n.af.assetRepositorySoftDeleteAssetMetadata(e);return s.then(()=>{t.removePromise(e.assetId),t.removeAsset(e.assetId),t.set(t=>({...t,listByReq:i().mapValues(t.listByReq,t=>({...t,assets:t.assets.filter(t=>t.assetId!==e.assetId)}))})),o.O.getState().set(t=>({...t,attachListByConversationId:i().mapValues(t.attachListByConversationId,t=>t.filter(t=>t.assetId!==e.assetId))}))}).catch(e=>{console.error(e)}),s},this.fetchGetAsset=e=>{let t=this.get();if(e.assetId in t.byId)return Promise.resolve(t.byId[e.assetId]);if(e.assetId in t.promiseById)return t.promiseById[e.assetId];let s=n.af.assetRepositoryGetAssetMetadata(e).then(e=>e);return t.idsertPromise(s,e.assetId),s.then(t.upsertAsset),s},this.fetchListAssets=e=>{let t=this.get(),s=i()(e).omit(e,["pageToken","pageSize"]).entries().sortBy().value().toString(),a=t.listByReq[s];if(a&&a.nextPageToken!==e.pageToken)return Promise.resolve(a);let r=i()(e).omit(e,["pageSize"]).entries().sortBy().value().toString(),o=t.promiseListByReq[r];if(o)return o;let l=n.af.assetRepositoryListAssetMetadata(e).then(e=>e).then(e=>{if(!e.assets)throw Error("No assets returned");t.appendAssets(e.assets);let s={};return e.assets.map(e=>{s[e.assetId]=Promise.resolve(e)}),t.set(e=>({promiseById:{...e.promiseById,...s}})),{assets:((null==a?void 0:a.assets)||[]).concat(e.assets),nextPageToken:e.nextPageToken}});return t.idsertPromiseList(l,r),l.then(e=>t.idsertList(e,s)),l}}}let m=(0,a.MT)(p)},74417:function(e,t,s){"use strict";s.d(t,{_:function(){return r}});var a=s(29598);class n{constructor(e,t){this.set=e,this.get=t,this.isUpselling=!1,this.setIsUpselling=(0,a.f0)(this.set,"isUpselling")}}let r=(0,a.MT)(n);"#subscribe"===window.location.hash&&r.getState().setIsUpselling(!0),r.subscribe((e,t)=>{var s;e.isUpselling!==t.isUpselling&&(s=e.isUpselling?"subscribe":void 0,window.history.pushState({},"","".concat(window.location.pathname).concat(s?"#".concat(s):"")))}),window.addEventListener("popstate",()=>{let e=window.location.hash;r.getState().setIsUpselling("#subscribe"===e)})}}]);